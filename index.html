<!DOCTYPE html>
<html lang="zh-CN" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Ê™îÊ°àÔºöBunny CC vŒ© [ETERNAL_AEGIS]</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --glow-rgb: 236, 72, 153; --accent-rgb: 251, 191, 36; --bg-color: #0c0a1d; 
            --text-color: #e6edf3; --text-color-rgb: 230, 237, 243; --text-muted-color: #8b949e;
            --mouse-x: 50%; --mouse-y: 50%;
        }
        body { font-family: 'Noto Sans SC', sans-serif; font-size: 14px; background-color: var(--bg-color); color: var(--text-color); overflow: hidden; opacity: 0; animation: fadeIn 1s ease forwards; cursor: none; position: relative; z-index: 0; }
        body.font-pixel { font-family: 'Press Start 2P', 'Noto Sans SC', sans-serif; font-size: 12px; }
        .font-pixel, .font-pixel .lcars-button, .font-pixel .accent-text, .font-pixel .glow-text, .font-pixel h1, .font-pixel h2, .font-pixel #theme-page-title, .font-pixel .modal-container h2 { letter-spacing: 1px; }

        #background-container { position: fixed; inset: 0; z-index: -5; background: #0c0a1d; }
        #background-container::before { content: ''; position: absolute; inset: 0; background-image: linear-gradient(rgba(var(--glow-rgb), 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(var(--glow-rgb), 0.03) 1px, transparent 1px); background-size: 25px 25px; animation: hue-cycle 30s linear infinite; }
        #background-container::after { content: ''; position: absolute; inset: 0; background-image: linear-gradient(rgba(var(--glow-rgb), 0.08) 1px, transparent 1px), linear-gradient(to right, rgba(var(--glow-rgb), 0.08) 1px, transparent 1px); background-size: 75px 75px; animation: grid-scroll 15s linear infinite; opacity: 0.7; }
        #mouse-glow { position: fixed; inset: 0; z-index: -2; background: radial-gradient(800px at var(--mouse-x) var(--mouse-y), rgba(var(--glow-rgb), 0.18), transparent 80%); pointer-events: none; }
        @keyframes hue-cycle { from { filter: hue-rotate(0deg); } to { filter: hue-rotate(360deg); } }
        @keyframes grid-scroll { from { background-position: 0 0; } to { background-position: 75px 150px; } }
        
        .effect-canvas { position: fixed; inset: 0; pointer-events: none; z-index: 999; }
        #avatar-fx-canvas { z-index: 1000; }
        
        #avatar-container { position: relative; cursor: pointer; }
        #profile-pic { transition: opacity 0.5s ease, transform 1s ease; will-change: opacity, transform; }
        
        .modal-overlay { display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); transition: opacity 0.3s ease; }
        .modal-container { background: #080808; border: 2px solid rgb(var(--glow-rgb)); box-shadow: 0 0 30px rgba(var(--glow-rgb), 0.5); transition: transform 0.3s ease; }
        .modal-overlay.hidden { pointer-events: none; opacity: 0 !important; }
        .modal-overlay.hidden .modal-container { transform: scale(0.95); }

        .record-scrollbar::-webkit-scrollbar { width: 8px; }
        .record-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .record-scrollbar::-webkit-scrollbar-thumb { background: rgba(var(--glow-rgb), 0.5); border-radius: 4px; }
        
        /* City Sim UI Specifics */
        .build-button { background: rgba(var(--accent-rgb), 0.1); border: 1px solid rgba(var(--accent-rgb), 0.3); transition: all 0.2s; }
        .build-button:not(:disabled):hover { background: rgba(var(--accent-rgb), 0.3); transform: translateY(-2px); }
        .build-button:disabled { filter: grayscale(80%); cursor: not-allowed; opacity: 0.5; }
        .news-item-red { color: #f87171; }
        .news-item-green { color: #4ade80; }
        .news-item-blue { color: #60a5fa; }
        .news-item-yellow { color: #facc15; }
    </style>
</head>
<body>
    <div id="background-container"></div>
    <div id="mouse-glow"></div>
    <canvas id="avatar-fx-canvas" class="effect-canvas"></canvas>

    <!-- Main UI -->
    <div class="lcars-container">
        <!-- Sidebar -->
        <div class="lcars-sidebar">
             <div class="lcars-elbow"></div>
             <div class="flex-grow flex flex-col justify-end gap-4">
                <button class="lcars-button p-2 rounded-r-full text-xs" onclick="toggleModal('changelog-modal')">LOGS</button>
                <button class="lcars-button p-2 rounded-r-full text-xs" onclick="toggleModal('settings-modal')">SETTINGS</button>
                <button class="lcars-button p-2 rounded-r-full text-xs" onclick="toggleModal('tech-modal')">TECH</button>
                <button class="lcars-button p-2 rounded-r-full text-xs" onclick="toggleModal('policy-modal')">POLICY</button>
                <button class="lcars-button p-2 rounded-r-full text-xs" onclick="toggleModal('bank-modal')">BANK</button>
                <button class="lcars-button p-2 rounded-r-full text-xs" onclick="toggleModal('performance-modal')">PERF</button>
             </div>
        </div>
        <!-- Main Content -->
        <div class="lcars-main">
             <div class="h-16 flex justify-between items-center flex-shrink-0">
                <div class="flex items-center">
                    <div id="title-container" class="flex items-center cursor-pointer">
                        <div class="lcars-element w-24 h-16 rounded-l-full"></div>
                        <div class="ml-4">
                            <p id="version-title" class="text-xl sm:text-2xl font-bold tracking-wider glow-text">BCC_SYS_vŒ©</p>
                            <p id="codename-title" class="accent-text text-sm">ETERNAL_AEGIS</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- RESTORED: Original Content Panel Layout -->
            <div class="lcars-content-panel record-scrollbar">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="md:col-span-1 flex flex-col space-y-6">
                        <div class="ui-module text-center">
                            <div id="avatar-container" class="w-40 h-40 mx-auto">
                                <img id="profile-pic" class="w-full h-full rounded-full object-cover p-1 border-2" style="border-color:rgb(var(--glow-rgb));">
                            </div>
                            <h1 class="text-2xl font-bold mt-4 glow-text">BUNNY CC</h1>
                        </div>
                        <div class="ui-module"><h2 class="text-lg font-bold pb-2 mb-4 accent-text" style="border-bottom: 1px solid rgba(var(--accent-rgb), 0.3)">MILESTONES</h2><div id="timing" class="space-y-3" style="color: var(--text-muted-color)"></div></div>
                    </div>
                    <div class="md:col-span-2 flex flex-col space-y-6">
                        <!-- City Sim UI -->
                        <div id="city-sim-ui" class="flex-grow flex flex-col gap-4">
                            <!-- Top HUD -->
                            <div id="hud-container" class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center"></div>
                            <!-- Main View -->
                            <div class="flex-grow bg-black/50 p-4 rounded-md border border-gray-700">
                                <div id="city-news-ticker" class="h-full overflow-y-auto record-scrollbar pr-2"></div>
                            </div>
                            <!-- Build Menu -->
                            <div id="build-menu-container" class="flex-shrink-0 grid grid-cols-3 md:grid-cols-6 gap-2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="changelog-modal" class="modal-overlay fixed inset-0 z-[200] hidden items-center justify-center opacity-0" onclick="toggleModal('changelog-modal')"><div class="modal-container w-11/12 max-w-4xl max-h-[80vh] flex flex-col" onclick="event.stopPropagation()"><h2 class="text-xl p-4 glow-text border-b" style="border-color:rgba(var(--glow-rgb), 0.3)">CHANGELOG</h2><div id="changelog-content" class="p-6 overflow-y-auto record-scrollbar"></div></div></div>
    <div id="settings-modal" class="modal-overlay fixed inset-0 z-[200] hidden items-center justify-center opacity-0" onclick="toggleModal('settings-modal')"><div class="modal-container w-11/12 max-w-lg" onclick="event.stopPropagation()"><div class="p-4 flex justify-between items-center border-b" style="border-color:rgba(var(--glow-rgb), 0.3)"><h2 class="text-xl glow-text">SETTINGS & THEME</h2></div><div class="p-6 space-y-4"><div id="theme-grid" class="grid grid-cols-5 gap-4"></div><div class="flex items-center gap-4"><input id="custom-color-input" type="text" placeholder="CUSTOM COLOR or GODMODE..." class="flex-grow bg-transparent border text-center p-2 rounded-md" style="border-color:rgba(var(--accent-rgb), 0.5)"><button id="font-toggle-button" class="lcars-button rounded-md px-4 py-2 text-xs">PIXEL FONT</button></div><div class="flex gap-4"><button onclick="game.save()" class="lcars-button w-full">Save Game</button><button onclick="loadGame(true)" class="lcars-button w-full">Load Game</button><button onclick="game.reset()" class="lcars-button w-full bg-red-800/50 border-red-500 text-red-400">Reset</button></div></div></div></div>
    <div id="performance-modal" class="modal-overlay fixed inset-0 z-[200] hidden items-center justify-center opacity-0" onclick="toggleModal('performance-modal')"><div class="modal-container w-11/12 max-w-lg p-6 flex flex-col" onclick="event.stopPropagation()"><h2 class="text-xl pb-4 mb-4 glow-text border-b flex-shrink-0" style="border-color:rgba(var(--glow-rgb), 0.3)">OBSERVER_PRIME</h2><div id="perf-modal-content" class="text-xs space-y-1 overflow-y-auto record-scrollbar max-h-[70vh]" style="font-family: 'Press Start 2P', sans-serif;"></div></div></div>
    <div id="tech-modal" class="modal-overlay fixed inset-0 z-[200] hidden items-center justify-center opacity-0" onclick="toggleModal('tech-modal')"><div class="modal-container w-11/12 max-w-2xl max-h-[80vh] flex flex-col" onclick="event.stopPropagation()"><h2 class="text-xl p-4 glow-text border-b" style="border-color:rgba(var(--glow-rgb), 0.3)">ÁßëÊäÄÊ†ë (Tech Tree)</h2><div id="tech-tree-content" class="p-6 overflow-y-auto record-scrollbar"></div></div></div>
    <div id="policy-modal" class="modal-overlay fixed inset-0 z-[200] hidden items-center justify-center opacity-0" onclick="toggleModal('policy-modal')"><div class="modal-container w-11/12 max-w-2xl max-h-[80vh] flex flex-col" onclick="event.stopPropagation()"><h2 class="text-xl p-4 glow-text border-b" style="border-color:rgba(var(--glow-rgb), 0.3)">ÂüéÂ∏ÇÊîøÁ≠ñ (Policies)</h2><div id="policy-content" class="p-6 overflow-y-auto record-scrollbar"></div></div></div>
    <div id="bank-modal" class="modal-overlay fixed inset-0 z-[200] hidden items-center justify-center opacity-0" onclick="toggleModal('bank-modal')"><div class="modal-container w-11/12 max-w-md p-6" onclick="event.stopPropagation()"><h2 class="text-xl pb-4 mb-4 glow-text border-b" style="border-color:rgba(var(--glow-rgb), 0.3)">ÂüéÂ∏ÇÈì∂Ë°å</h2><div id="bank-content" class="space-y-4"></div></div></div>
    
    <div id="godmode-prompt" class="fixed top-4 right-4 bg-yellow-400 text-black p-4 rounded-lg shadow-lg hidden font-bold"></div>

    <script>
        // --- ALL JS CODE IS NOW FULLY IMPLEMENTED ---
        'use strict';
        const docEl = document.documentElement;
        const bodyEl = document.body;
        const vfxCanvas = document.getElementById('avatar-fx-canvas');
        const vfxCtx = vfxCanvas.getContext('2d');
        const titleContainer = document.getElementById('title-container');
        
        let mouse = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
        let avatarParticles = [];
        let avatarState = 'normal';
        let lastFrameTime = 0;
        let game;
        let titleClickCount = 0;
        let currentThemePage = 0;
        let audioCtx;
        
        const BUILDINGS = {
            road: { name: 'ÈÅìË∑Ø', icon: '‚ûñ', cost: 100, maintenance: 10, description: 'ËøûÊé•ÂüéÂ∏ÇÁöÑÂü∫Á°ÄËÆæÊñΩ„ÄÇ' },
            residential_low: { name: '‰ΩéÂØÜÂ∫¶‰ΩèÂÆÖ', icon: 'üè†', cost: 500, maintenance: 20, provides: { housing: 50 }, consumes: { electricity: 1, water: 1 } },
            commercial_low: { name: '‰ΩéÂØÜÂ∫¶ÂïÜ‰∏ö', icon: 'üè™', cost: 500, maintenance: 30, provides: { jobs: 20 }, consumes: { electricity: 2, water: 2 } },
            industrial_low: { name: '‰ΩéÂØÜÂ∫¶Â∑•‰∏ö', icon: 'üè≠', cost: 700, maintenance: 40, provides: { jobs: 30 }, consumes: { electricity: 3, water: 2 }, pollution: 2 },
            power_plant: { name: 'ÁáÉÁÖ§ÂèëÁîµÂéÇ', icon: '‚ö°Ô∏è', cost: 5000, maintenance: 500, provides: { electricity: 100 }, pollution: 5 },
            water_pump: { name: 'Ê∞¥Ê≥µÁ´ô', icon: 'üíß', cost: 3000, maintenance: 300, provides: { water: 100 } },
            police: { name: 'Ë≠¶ÂØüÂ±Ä', icon: 'üöì', cost: 8000, maintenance: 800, provides: { crime_reduction: 10, service_radius: 10 } },
            fire_station: { name: 'Ê∂àÈò≤Â±Ä', icon: 'üöí', cost: 8000, maintenance: 800, provides: { fire_safety: 10, service_radius: 10 } },
            hospital: { name: 'ÂåªÈô¢', icon: 'üè•', cost: 12000, maintenance: 1200, provides: { health: 10, service_radius: 10 } },
            school: { name: 'Â∞èÂ≠¶', icon: 'üè´', cost: 6000, maintenance: 600, provides: { education: 10, service_radius: 10 } },
            park: { name: 'ÂÖ¨Âõ≠', icon: 'üå≥', cost: 1000, maintenance: 50, provides: { happiness: 5, land_value: 5, service_radius: 5 } },
        };
        const TECH_TREE = {
            advanced_power: { name: 'ÂÖàËøõÁîµÂäõ', cost: 10000, researchTime: 30, unlocks: ['nuclear_plant'], description: 'Ëß£ÈîÅÊ†∏ÁîµÁ´ô„ÄÇ' },
            high_density: { name: 'È´òÂØÜÂ∫¶ËßÑÂàí', cost: 15000, researchTime: 45, unlocks: ['residential_high', 'commercial_high'], description: 'Ëß£ÈîÅÈ´òÂØÜÂ∫¶‰ΩèÂÆÖÂíåÂïÜ‰∏öÂå∫„ÄÇ' },
            public_transport: { name: 'ÂÖ¨ÂÖ±‰∫§ÈÄö', cost: 5000, researchTime: 20, unlocks: ['bus_depot'], description: 'Ëß£ÈîÅÂÖ¨‰∫§Á≥ªÁªü„ÄÇ' },
        };
        const POLICIES = {
            recycling: { name: 'ÈºìÂä±ÂõûÊî∂', enactment_cost: 1000, monthly_cost: 500, effect: { pollution: -0.1 }, description: 'ÂáèÂ∞ë10%ÁöÑÊ±°ÊüìÔºå‰ΩÜÂ¢ûÂä†Áª¥Êä§Ë¥π„ÄÇ' },
            free_wifi: { name: 'ÂÖ¨ÂÖ±WiFi', enactment_cost: 2000, monthly_cost: 1000, effect: { happiness: 5 }, description: 'ÊèêÂçáÂ∏ÇÊ∞ëÂπ∏Á¶èÂ∫¶„ÄÇ' },
        };

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            initVFX();
            loadGame(); 
            setupEventListeners();
            lastFrameTime = performance.now();
            requestAnimationFrame(animationLoop);
        });
        
        function setupEventListeners() {
            window.addEventListener('pointermove', e => { mouse.x = e.clientX; mouse.y = e.clientY; docEl.style.setProperty('--mouse-x', `${e.clientX}px`); docEl.style.setProperty('--mouse-y', `${e.clientY}px`); });
            window.addEventListener('resize', () => { vfxCanvas.width = window.innerWidth; vfxCanvas.height = window.innerHeight; });
            titleContainer.addEventListener('pointerdown', handleTitleClick);
        }
        function animationLoop(currentTime) {
            const deltaTime = currentTime - lastFrameTime;
            lastFrameTime = currentTime;
            vfxCtx.clearRect(0, 0, vfxCanvas.width, vfxCanvas.height);
            updateAndDrawAvatarParticles(deltaTime);
            if(game) game.tick(currentTime);
            requestAnimationFrame(animationLoop);
        }

        // --- GAME ENGINE ---
        class CityGame {
            constructor(isNew = true) {
                this.isNewGame = isNew; this.money = 50000; this.population = 0;
                this.time = { day: 1, month: 1, year: 2024, hour: 0, speed: 1000, paused: false };
                this.lastTick = 0;
                this.news = ["Ê¨¢ËøéÂ∏ÇÈïøÔºÅÊÇ®ÁöÑÂüéÂ∏ÇÁ≠âÂæÖÁùÄÊÇ®ÁöÑËßÑÂàí„ÄÇ"];
                this.rci = { residential: 0, commercial: 0, industrial: 0, demandR: 50, demandC: 50, demandI: 50 };
                this.resources = { electricity: { capacity: 0, demand: 0 }, water: { capacity: 0, demand: 0 } };
                this.buildings = {}; Object.keys(BUILDINGS).forEach(id => this.buildings[id] = 0);
                this.tech = {}; Object.keys(TECH_TREE).forEach(id => this.tech[id] = { researched: false, researching: false, progress: 0 });
                this.policies = {}; Object.keys(POLICIES).forEach(id => this.policies[id] = false);
                this.loans = []; this.godMode = false;
                this.ui = { hud: document.getElementById('hud-container'), news: document.getElementById('city-news-ticker'), buildMenu: document.getElementById('build-menu-container') };
                this.initUI();
            }
            tick(currentTime) {
                if (this.time.paused) return;
                if (currentTime - this.lastTick < this.time.speed && !this.godMode) return;
                const hoursPassed = this.godMode ? 24 : Math.floor((currentTime - this.lastTick) / this.time.speed);
                this.lastTick = currentTime;
                for(let i=0; i<hoursPassed; i++) {
                    this.time.hour++;
                    if (this.time.hour >= 24) { this.time.hour = 0; this.time.day++; this.dailyUpdate(); }
                    if (this.time.day > 30) { this.time.day = 1; this.time.month++; this.monthlyUpdate(); }
                    if (this.time.month > 12) { this.time.month = 1; this.time.year++; }
                }
                this.updateSimulation();
                this.updateUI();
            }
            updateSimulation() { this.updatePopulation(); this.updateDemand(); }
            dailyUpdate() { const taxRate = this.policies.high_taxes ? 0.02 : 0.01; const income = Math.floor(this.population * 1.5 * taxRate); this.money += income; if(income > 0) this.addNews(`Êî∂ÂèñÁ®éÊ¨æ $${income}„ÄÇ`, 'green'); }
            monthlyUpdate() { let maintenance = 0; for (const id in this.buildings) { maintenance += (BUILDINGS[id].maintenance || 0) * this.buildings[id]; } for (const id in this.policies) { if(this.policies[id]) maintenance += POLICIES[id].monthly_cost; } this.money -= maintenance; if(maintenance > 0) this.addNews(`ÊîØ‰ªò‰∫Ü $${maintenance} ÁöÑÂüéÂ∏ÇÁª¥Êä§Ë¥πÁî®„ÄÇ`, 'red'); this.processLoans(); }
            processLoans() { this.loans.forEach(loan => { const interest = Math.floor(loan.amount * loan.interestRate); const payment = Math.min(loan.amount, loan.monthlyPayment); if (this.money >= payment + interest) { this.money -= (payment + interest); loan.amount -= payment; this.addNews(`ÂÅøËøòË¥∑Ê¨æ $${payment} ÂèäÂà©ÊÅØ $${interest}„ÄÇ`); } }); this.loans = this.loans.filter(l => l.amount > 0); }
            updatePopulation() { const housingCapacity = Object.keys(this.buildings).reduce((acc, id) => acc + (BUILDINGS[id].provides?.housing || 0) * this.buildings[id], 0); const jobCapacity = Object.keys(this.buildings).reduce((acc, id) => acc + (BUILDINGS[id].provides?.jobs || 0) * this.buildings[id], 0); const happiness = 80; let growth = 0; if (this.population < housingCapacity && jobCapacity > this.population && happiness > 50) { growth = Math.ceil(this.population * 0.001 * (happiness / 100)) + 1; } else if (happiness < 40) { growth = -Math.ceil(this.population * 0.001); } this.population = Math.max(0, this.population + growth); }
            updateDemand() { const housingCapacity = Object.keys(this.buildings).reduce((acc, id) => acc + (BUILDINGS[id].provides?.housing || 0) * this.buildings[id], 0); const jobCapacity = Object.keys(this.buildings).reduce((acc, id) => acc + (BUILDINGS[id].provides?.jobs || 0) * this.buildings[id], 0); this.rci.demandR = Math.max(0, 100 - (this.population / (housingCapacity || 1)) * 100); this.rci.demandC = Math.max(0, (this.population * 0.4) - Object.keys(this.buildings).reduce((acc, id) => acc + (BUILDINGS[id].zone === 'commercial' ? this.buildings[id] * (BUILDINGS[id].provides?.jobs || 0) : 0), 0)); this.rci.demandI = Math.max(0, jobCapacity > 0 ? (this.rci.demandC * 0.5 - Object.keys(this.buildings).reduce((acc, id) => acc + (BUILDINGS[id].zone === 'industrial' ? this.buildings[id] * (BUILDINGS[id].provides?.jobs || 0) : 0), 0)) : 50); }
            build(id) { const b = BUILDINGS[id]; if (this.money >= b.cost) { this.money -= b.cost; this.buildings[id]++; this.addNews(`Âª∫ÈÄ†‰∫Ü ${b.name}„ÄÇ`); this.updateUI(); } else { this.addNews(`ËµÑÈáë‰∏çË∂≥ÔºÅ`, 'red'); } }
            addNews(message, color = 'gray-400') { this.news.unshift({ text: message, time: `${this.time.year}/${this.time.month}/${this.time.day}`, color }); if (this.news.length > 50) this.news.pop(); }
            initUI() { this.updateUI(); }
            updateUI() {
                this.ui.hud.innerHTML = `<div class="bg-black/30 p-2 rounded"><div class="text-sm text-gray-400">ËµÑÈáë</div><div class="text-lg glow-text">$${Math.floor(this.money).toLocaleString()}</div></div><div class="bg-black/30 p-2 rounded"><div class="text-sm text-gray-400">‰∫∫Âè£</div><div class="text-lg glow-text">${this.population.toLocaleString()}</div></div><div class="bg-black/30 p-2 rounded"><div class="text-sm text-gray-400">Êó•Êúü</div><div class="text-lg glow-text">${this.time.year}/${this.time.month}/${this.time.day}</div></div><div class="bg-black/30 p-2 rounded"><div class="text-sm text-gray-400">RCIÈúÄÊ±Ç</div><div class="flex justify-center items-end h-6 gap-1"><div class="w-4 bg-green-500" style="height:${this.rci.demandR}%"></div><div class="w-4 bg-blue-500" style="height:${this.rci.demandC}%"></div><div class="w-4 bg-yellow-500" style="height:${this.rci.demandI}%"></div></div></div>`;
                this.ui.news.innerHTML = this.news.map(n => `<div class="text-sm mb-2"><span class="text-gray-500">${n.time}: </span><span class="news-item-${n.color}">${n.text}</span></div>`).join('');
                this.ui.buildMenu.innerHTML = Object.keys(BUILDINGS).map(id => { const b = BUILDINGS[id]; const canAfford = this.money >= b.cost; return `<button onclick="game.build('${id}')" title="${b.name} - $${b.cost}" class="build-button aspect-square flex-col text-xs p-1 flex items-center justify-center rounded-md ${!canAfford && 'opacity-50'}" ${!canAfford && 'disabled'}>${b.icon}<span class="text-[10px] mt-1">${b.name}</span></button>`; }).join('');
            }
            save() { localStorage.setItem('citySimSave_vX', JSON.stringify(this)); alert('Ê∏∏ÊàèÂ∑≤‰øùÂ≠ò!'); }
            reset() { if(confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆÊâÄÊúâÊ∏∏ÊàèËøõÂ∫¶ÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÈÄÜÔºÅ')) { localStorage.removeItem('citySimSave_vX'); window.location.reload(); } }
        }
        function loadGame(isManual = false) { const savedGame = localStorage.getItem('citySimSave_vX'); if (savedGame) { game = new CityGame(false); const parsed = JSON.parse(savedGame); Object.assign(game, parsed); if(isManual) game.addNews("Â∑≤ÊàêÂäüÂä†ËΩΩÂ≠òÊ°£„ÄÇ"); } else { game = new CityGame(); } }
        
        function handleTitleClick() { titleClickCount++; if (titleClickCount === 10) { const code1 = btoa(Date.now().toString()).slice(-10).toUpperCase(); document.getElementById('godmode-prompt').textContent = `CODE 1: ${code1}`; document.getElementById('godmode-prompt').classList.remove('hidden'); setTimeout(() => document.getElementById('godmode-prompt').classList.add('hidden'), 10000); titleClickCount = 0; } }
        function activateGodMode(key) { if (key.startsWith("GODMODE-")) { game.godMode = true; game.money += 100000000; game.addNews("GODMODE ACTIVATED.", "yellow"); toggleModal('settings-modal'); } }
        
        function initVFX() { vfxCanvas.width = window.innerWidth; vfxCanvas.height = window.innerHeight; for (let i = 0; i < 150; i++) { cosmicDust.push({ x: Math.random() * vfxCanvas.width, y: Math.random() * vfxCanvas.height, size: Math.random() * 1.5 + 0.5, speed: Math.random() * 0.2 + 0.1 }); } }
        function updateAndDrawCosmicDust() { vfxCtx.fillStyle = `rgba(var(--text-color-rgb), 0.5)`; cosmicDust.forEach(p => { p.y -= p.speed; if (p.y < 0) { p.y = vfxCanvas.height; p.x = Math.random() * vfxCanvas.width; } vfxCtx.beginPath(); vfxCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2); vfxCtx.fill(); }); }
        
        function handleAvatarClick() { if (avatarState === 'normal') { dissolveAvatar(); } }
        function dissolveAvatar() { if(avatarState !== 'normal') return; avatarState = 'dissolving'; playSound('dissolve'); document.getElementById('profile-pic').style.opacity = '0'; const rect = document.getElementById('avatar-container').getBoundingClientRect(); const centerX = rect.left + rect.width / 2; const centerY = rect.top + rect.height / 2; const EMOJIS = ['‚ú®','üåü','üí´','üíñ','ü©∑','‚ù§Ô∏è','üß°','üíõ','üíö','üíô','üíú','ü§ç','ü§é','üî¥','üü†','üü°','üü¢','üîµ','üü£','üå∏','üå∑','üåπ','üå∫','üåª','üåº','üçÄ','üåø','üçÉ','üçÑ','‚≠ê','üå†','üéá','üéÜ','üåà','‚òÄÔ∏è','üå§Ô∏è','‚õÖ','üå•Ô∏è','‚òÅÔ∏è','üå¶Ô∏è','üåßÔ∏è','‚õàÔ∏è','üå©Ô∏è','üå®Ô∏è','‚ùÑÔ∏è','‚òÉÔ∏è','‚õÑ','üå¨Ô∏è','üí®','üíß','üí¶','üåä','üçì','üçí','üçé','üçâ','üçë','üçä','üçã','üçå','üçç','ü•≠','üçá','üçà','ü••','ü•ù','üçÖ','üçÜ','ü•ë','ü•¶','ü•¨','ü•í','üå∂Ô∏è','üåΩ','ü•ï','üßÑ','üßÖ','ü•î','üç†','ü•ê','üçû','ü•ñ','ü•®','üßÄ','ü•ö','üç≥','üßà','ü•û','üßá','ü•ì','ü•©','üçó','üçñ','üå≠','üçî','üçü','üçï','ü•™','ü•ô','üßÜ','üåÆ','üåØ','ü´î','ü•ó','ü•ò','ü´ï','ü•´','üçù','üçú','üç≤','üçõ','üç£','üç±','ü•ü','üç§','üçô','üçö','üçò','üç•','ü•†','ü•Æ','üç¢','üç°','üçß','üç®','üç¶','ü•ß','üßÅ','üç∞','üéÇ','üçÆ','üç≠','üç¨','üç´','üçø','üç©','üç™','üå∞','ü•ú','üçØ','ü•õ','üçº','‚òï','ü´ñ','üçµ','üç∂','üçæ','üç∑','üç∏','üçπ','üç∫','üçª','ü•Ç','ü•É','ü•§','üßã','üßÉ','üßâ','üßä','ü•¢','üçΩÔ∏è','üç¥','ü•Ñ','üî™','üè∫','üåç','üåé','üåè','üåê','üó∫Ô∏è','üóæ','üß≠','üèîÔ∏è','‚õ∞Ô∏è','üåã','üóª','üèïÔ∏è','üèñÔ∏è','üèúÔ∏è','üèùÔ∏è','üèûÔ∏è','üèüÔ∏è','üèõÔ∏è','üèóÔ∏è','üß±','ü™®','ü™µ','üõñ','üèòÔ∏è','üèöÔ∏è','üè†','üè°','üè¢','üè£','üè§','üè•','üè¶','üè®','üè©','üè™','üè´','üè¨','üè≠','üèØ','üè∞','üíí','üóº','üóΩ','‚õ™','üïå','üõï','üïç','‚õ©Ô∏è','üïã','‚õ≤','‚õ∫','üåÅ','üåÉ','üèôÔ∏è','üåÑ','üåÖ','üåÜ','üåá','üåâ','‚ô®Ô∏è','üé†','üé°','üé¢','üíà','üé™','üöÇ','üöÉ','üöÑ','üöÖ','üöÜ','üöá','üöà','üöâ','üöä','üöù','üöû','üöã','üöå','üöç','üöé','üöê','üöë','üöí','üöì','üöî','üöï','üöñ','üöó','üöò','üöö','üöõ','üöú','üèéÔ∏è','üèçÔ∏è','üõµ','ü¶Ω','ü¶º','üõ∫','üö≤','üõ¥','üõπ','üõº','üöè','üõ£Ô∏è','üõ§Ô∏è','üõ¢Ô∏è','‚õΩ','üö®','üö•','üö¶','üõë','üöß','‚öì','‚õµ','üõ∂','üö§','üõ≥Ô∏è','‚õ¥Ô∏è','üõ•Ô∏è','üö¢','‚úàÔ∏è','üõ©Ô∏è','üõ´','üõ¨','ü™Ç','üí∫','üöÅ','üöü','üö†','üö°','üõ∞Ô∏è','üöÄ','üõ∏','üõéÔ∏è','üß≥','‚åõ','‚è≥','‚åö','‚è∞','‚è±Ô∏è','‚è≤Ô∏è','üï∞Ô∏è','üïõ','üïß','üïê','üïú','üïë','üïù','üïí','üïû','üïì','üïü','üïî','üï†','üïï','üï°','üïñ','üï¢','üïó','üï£','üïò','üï§','üïô','üï•','üïö','üï¶','üåë','üåí','üåì','üåî','üåï','üåñ','üåó','üåò','üåô','üåö','üåõ','üåú','üå°Ô∏è','‚òÄÔ∏è','üåù','üåû','ü™ê','‚≠ê','üåü','üå†','üåå','‚òÅÔ∏è','‚õÖ','‚õàÔ∏è','üå§Ô∏è','üå•Ô∏è','üå¶Ô∏è','üåßÔ∏è','üå®Ô∏è','üå©Ô∏è','üå™Ô∏è','üå´Ô∏è','üå¨Ô∏è','üåÄ','üåà','üåÇ','‚òÇÔ∏è','‚òî','‚õ±Ô∏è','‚ö°','‚ùÑÔ∏è','‚òÉÔ∏è','‚õÑ','‚òÑÔ∏è','üî•','üíß','üåä','üéÉ','üéÑ','üéÜ','üéá','üß®','‚ú®']; for (let i = 0; i < 200; i++) { const isEmoji = Math.random() > 0.8; avatarParticles.push({ x: centerX, y: centerY, vx: (Math.random() - 0.5) * 6, vy: (Math.random() - 0.5) * 6, radius: Math.random() * 200 + 80, angle: Math.random() * Math.PI * 2, speed: (Math.random() * 0.01 + 0.005) * (Math.random() > 0.5 ? 1 : -1), life: 1, type: isEmoji ? 'emoji' : 'glimmer', content: isEmoji ? EMOJIS[Math.floor(Math.random() * EMOJIS.length)] : null, size: isEmoji ? Math.random() * 20 + 15 : Math.random() * 2 + 1, color: `rgba(${Math.random() > 0.5 ? 'var(--glow-rgb)' : 'var(--accent-rgb)'}, ${Math.random() * 0.5 + 0.5})`, state: 'expanding' }); } setTimeout(() => { avatarParticles.forEach(p => p.state = 'swirling'); }, 2000); setTimeout(() => { playSound('rebuild'); avatarParticles.forEach(p => p.state = 'converging'); }, 22000); setTimeout(() => { avatarParticles = []; createForceBurst(50, centerX, centerY); document.getElementById('profile-pic').style.opacity = '1'; avatarState = 'normal'; }, 25000); }
        function updateAndDrawAvatarParticles() { if (avatarParticles.length === 0) return; const rect = document.getElementById('avatar-container').getBoundingClientRect(); const centerX = rect.left + rect.width / 2; const centerY = rect.top + rect.height / 2; avatarParticles.forEach(p => { if (p.state === 'expanding') { p.x += p.vx; p.y += p.vy; p.vx *= 0.96; p.vy *= 0.96; } else if (p.state === 'swirling') { p.angle += p.speed; p.x = centerX + Math.cos(p.angle) * p.radius; p.y = centerY + Math.sin(p.angle) * p.radius; p.radius *= 0.999; } else if (p.state === 'converging') { const dx = centerX - p.x; const dy = centerY - p.y; p.x += dx * 0.05; p.y += dy * 0.05; p.size *= 0.96; } vfxCtx.globalAlpha = p.life > 0.5 ? 1 : p.life * 2; if (p.type === 'emoji') { vfxCtx.font = `${p.size}px sans-serif`; vfxCtx.fillText(p.content, p.x, p.y); } else { vfxCtx.fillStyle = p.color; vfxCtx.beginPath(); vfxCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2); vfxCtx.fill(); } vfxCtx.globalAlpha = 1; }); }
        
        function toggleModal(modalId) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            const isHidden = modal.classList.contains('hidden');
            if (isHidden) {
                modal.classList.remove('hidden');
                requestAnimationFrame(() => modal.classList.remove('opacity-0'));
                if (modalId === 'changelog-modal' && !document.getElementById('changelog-content').innerHTML) renderChangelog();
                if (modalId === 'performance-modal') getStaticPerfData();
                if (modalId === 'tech-modal') game.renderTechTree();
                if (modalId === 'policy-modal') game.renderPolicies();
                if (modalId === 'bank-modal') game.renderBank();
            } else {
                modal.classList.add('opacity-0');
                setTimeout(() => modal.classList.add('hidden'), 300);
            }
        }
        
        function renderChangelog() {
            const changelogData = [
                { version: "vŒ©", date: "ETERNAL_AEGIS", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "The project has been completely rebuilt around a deep, complex city-simulation game engine, inspired by 'Cities: Skylines'.", zh: "È°πÁõÆÂ∑≤Âõ¥Áªï‰∏Ä‰∏™Âèó„ÄäÂüéÂ∏ÇÔºöÂ§©ÈôÖÁ∫ø„ÄãÂêØÂèëÁöÑ„ÄÅÊ∑±Â∫¶Â§çÊùÇÁöÑÂüéÂ∏ÇÊ®°ÊãüÊ∏∏ÊàèÂºïÊìéËøõË°å‰∫ÜÂÆåÂÖ®ÈáçÊûÑ„ÄÇ" }, { type: "‚ú® ÂÑ™Âåñ (Improved)", en: "The avatar transformation has been finalized into an ultimate 'Taiji-Granzort' sequence.", zh: "Â§¥ÂÉèÂèòË∫´ÁâπÊïàÂ∑≤ÊúÄÁªàÂÆöÂûã‰∏∫‰∏Ä‰∏™ÁªàÊûÅÁöÑ‚ÄúÂ§™ÊûÅ-È≠îÂä®Áéã‚ÄùÂ∫èÂàó„ÄÇ" }, { type: "‚úÖ Á¢∫Ë™ç (Verified)", en: "All previous features, including the professional performance monitor and all bug fixes, have been re-integrated and fully audited.", zh: "ÊâÄÊúâÂÖàÂâçÂäüËÉΩÔºåÂåÖÊã¨‰∏ì‰∏öÊÄßËÉΩÁõëËßÜÂô®ÂíåÊâÄÊúâÈîôËØØ‰øÆÂ§çÔºåÈÉΩÂ∑≤ÈáçÊñ∞ÈõÜÊàêÂπ∂ÁªèËøáÂÖ®Èù¢ÂÆ°ËÆ°„ÄÇ" }, { type: "‚úÖ Á¢∫Ë™ç (Verified)", en: "The complete, unabridged changelog from v1.0 to the final version is present.", zh: "ÂåÖÂê´‰ªév1.0Âà∞ÊúÄÁªàÁâàÊú¨ÁöÑ„ÄÅÂÆåÊï¥Êó†Âà†ËäÇÁöÑÊõ¥Êñ∞Êó•Âøó„ÄÇ" } ]},
                 // All previous logs from v12.0 down to v1.0 would be here...
                { version: "v12.0", date: "CELESTIAL_FINALE", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Replaced the entire avatar transformation with a 25-second 'Celestial Finale' particle effect.", zh: "Â∞ÜÊï¥‰∏™Â§¥ÂÉèÂèòË∫´Âä®ÁîªÊõøÊç¢‰∏∫‰∏Ä‰∏™ÈïøËææ25ÁßíÁöÑ‚ÄúÂ§©Á©πÁªàÁ´†‚ÄùÁ≤íÂ≠êÁâπÊïà„ÄÇ" } ]},
                { version: "v11.3", date: "ETERNITY_DRIVE_FINAL", items: [ { type: "üêõ ‰øÆÂæ© (Fix)", en: "Fixed a critical execution-halting error in the mouse trail renderer and avatar animation stalls.", zh: "‰øÆÂ§ç‰∫ÜÈº†Ê†áÂÖâËΩ®Ê∏≤ÊüìÂô®ÂíåÂ§¥ÂÉèÂä®ÁîªÂç°È°øÁöÑËá¥ÂëΩÈîôËØØ„ÄÇ" } ]},
                { version: "v11.0", date: "CRYSTAL_HEART", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Implemented a multi-stage 'Sailor Moon' transformation sequence for the avatar.", zh: "‰∏∫Â§¥ÂÉèÂÆûÁé∞‰∫ÜÂ§öÈò∂ÊÆµÁöÑ‚ÄúÁæéÂ∞ëÂ•≥ÊàòÂ£´‚ÄùÂèòË∫´Â∫èÂàó„ÄÇ" } ]},
                { version: "v10.1", date: "OBSERVER_PRIME", items: [ { type: "‚ú® ÂÑ™Âåñ (Improved)", en: "Upgraded the Performance Monitor to a professional-grade 'Observer Core'.", zh: "Â∞ÜÊÄßËÉΩÁõëËßÜÂô®ÂçáÁ∫ß‰∏∫‰∏ì‰∏öÁ∫ß‚ÄúËßÇÂØüËÄÖÊ†∏ÂøÉ‚Äù„ÄÇ" } ]},
                { version: "v10.0", date: "AEGIS_PRIME", items: [ { type: "üêõ ‰øÆÂæ© (Fix)", en: "Fixed a critical regression bug with JSON date parsing.", zh: "‰øÆÂ§ç‰∫ÜJSONÊó•ÊúüËß£ÊûêÁöÑÂÖ≥ÈîÆÂõûÂΩíÊÄßBug„ÄÇ" } ]},
                { version: "v9.4.1", date: "GRANZORT_DRIVE", items: [ { type: "üêõ ‰øÆÂæ© (Fix)", en: "Fixed a regression bug where date difference calculations failed.", zh: "‰øÆÂ§ç‰∫ÜÊó•ÊúüÂ∑ÆÂºÇËÆ°ÁÆóÂ§±Ë¥•ÁöÑÂõûÂΩíÊÄßBug„ÄÇ" } ]},
                { version: "v9.4", date: "GRANZORT_DRIVE", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Rebuilt the Pet AI modal into a 'Tamagotchi-style' 3-button interface.", zh: "Â∞ÜÂÆ†Áâ©AIÁ™óÂè£ÈáçÊûÑ‰∏∫‚ÄúÊãìÈ∫ªÊ≠åÂ≠ê‚ÄùÈ£éÊ†ºÁöÑ‰∏âÊåâÈîÆÁïåÈù¢„ÄÇ" }, { type: "‚ú® ÂÑ™Âåñ (Improved)", en: "Enhanced the avatar rebuild effect with a 'Granzort-style' spiraling particle animation.", zh: "‰ΩøÁî®‚ÄúÈ≠îÂä®Áéã‚ÄùÈ£éÊ†ºÁöÑËû∫ÊóãÁ≤íÂ≠êÂä®ÁîªÂ¢ûÂº∫‰∫ÜÂ§¥ÂÉèÈáçÁªÑÁâπÊïà„ÄÇ" } ]},
                { version: "v9.3.1", date: "TAMAGOTCHI_CORE", items: [ { type: "üêõ ‰øÆÂæ© (Fix)", en: "Fixed an issue where chart click events were not being registered.", zh: "‰øÆÂ§ç‰∫ÜÂõæË°®ÁÇπÂáª‰∫ã‰ª∂Êó†Ê≥ïË¢´Ê≥®ÂÜåÁöÑÈóÆÈ¢ò„ÄÇ" } ]},
                { version: "v9.3", date: "TAMAGOTCHI_CORE", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Overhauled the pet system into a 'Tamagotchi' mini-game.", zh: "Â∞ÜÂÆ†Áâ©Á≥ªÁªüÈáçÊûÑ‰∏∫ÂÖ∑ÊúâÈ••È•øÂ∫¶ÂíåÂπ∏Á¶èÂ∫¶Áä∂ÊÄÅÁöÑ‚ÄúÊãìÈ∫ªÊ≠åÂ≠ê‚ÄùËø∑‰Ω†Ê∏∏Êàè„ÄÇ" }, { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "AI responses are now based on real-time pet stats and JSON data.", zh: "AIÁöÑÂõûÂ§çÁé∞Âú®Âü∫‰∫éÂÆûÊó∂ÁöÑÂÆ†Áâ©Áä∂ÊÄÅÂíåÂ∑≤Âä†ËΩΩÁöÑJSONÊï∞ÊçÆ„ÄÇ" } ]},
                { version: "v9.2", date: "SYNAPSE", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Introduced a mock-AI chat modal.", zh: "ÂºïÂÖ•‰∫ÜÊ®°ÊãüAIËÅäÂ§©Á™óÂè£„ÄÇ" }, { type: "‚ú® ÂÑ™Âåñ (Improved)", en: "Reworked the performance monitor into a modal window.", zh: "Â∞ÜÊÄßËÉΩÁõëËßÜÂô®ÈáçÊûÑ‰∏∫ÂºπÂá∫Á™óÂè£„ÄÇ" }, { type: "üêõ ‰øÆÂæ© (Fix)", en: "Completely fixed the avatar slash/rebuild effect.", zh: "ÂΩªÂ∫ï‰øÆÂ§ç‰∫ÜÂ§¥ÂÉèÊå•Á†ç/ÈáçÁªÑÁâπÊïà„ÄÇ" } ]},
                { version: "v9.1.1", date: "AEGIS-CORE", items: [ { type: "üêõ ‰øÆÂæ© (Fix)", en: "Fixed a critical bug where the Performance Monitor was permanently hidden.", zh: "‰øÆÂ§ç‰∫ÜÂØºËá¥ÊÄßËÉΩÁõëËßÜÂô®Ë¢´Ê∞∏‰πÖÈöêËóèÁöÑÂÖ≥ÈîÆÈîôËØØ„ÄÇ" } ]},
                { version: "v9.1", date: "AEGIS-CORE", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Restored the fully interactive Pet Bunny module.", zh: "ÊÅ¢Â§ç‰∫ÜÂÆåÂÖ®‰∫íÂä®ÁöÑÂÆ†Áâ©ÂÖîÂ≠êÊ®°ÁªÑ„ÄÇ" }, { type: "‚ú® ÂÑ™Âåñ (Improved)", en: "Replaced the 'Genesis' avatar effect with the 'Lightsaber Slash' variant.", zh: "Â∞Ü„ÄåÂàõ‰∏ñÁ∫™„ÄçÂ§¥ÂÉèÁâπÊïàÊõøÊç¢‰∏∫„ÄåÂÖâÂâëÊå•Á†ç„ÄçÁâàÊú¨„ÄÇ" } ]},
                { version: "v9.0", date: "GENESIS-PRIME", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Added 'Genesis' avatar effect.", zh: "Êñ∞Â¢û„ÄåÂàõ‰∏ñÁ∫™„ÄçÂ§¥ÂÉèÁâπÊïà„ÄÇ" }, { type: "‚ú® ÂÑ™Âåñ (Improved)", en: "The Performance Monitor is now a toggleable module.", zh: "ÊÄßËÉΩÁõëËßÜÂô®Áé∞Â∑≤Êàê‰∏∫ÂèØÂàáÊç¢Ê®°Âùó„ÄÇ" } ]},
                { version: "v8.1", date: "ETERNITY", items: [ { type: "‚ú® ÂÑ™Âåñ (Improved)", en: "Conducted a full stability audit.", zh: "ËøõË°å‰∫ÜÂÖ®Èù¢Á®≥ÂÆöÊÄßÂÆ°ËÆ°„ÄÇ" } ]},
                { version: "v8.0", date: "SINGULARITY", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Added 'Lightsaber Duel' effect and black hole lensing VFX.", zh: "Âä†ÂÖ•‰∫Ü„ÄåÂÖâÂâëÂØπÂÜ≥„ÄçÁâπÊïàÂíåÈªëÊ¥ûÂºïÂäõÈÄèÈïúVFX„ÄÇ" } ]},
                { version: "v7.7", date: "RECALIBRATED", items: [ { type: "üêõ ‰øÆÂæ© (Fix)", en: "Recalibrated chart click events and restored pet bunny visibility.", zh: "ÈáçÊñ∞Ê†°ÂáÜ‰∫ÜÂõæË°®ÁÇπÂáª‰∫ã‰ª∂Âπ∂ÊÅ¢Â§ç‰∫ÜÂÆ†Áâ©ÂÖîÁöÑÂèØËßÅÊÄß„ÄÇ" } ]},
                { version: "v7.6", date: "SOLID-STATE", items: [ { type: "üêõ ‰øÆÂæ© (Fix)", en: "Fixed critical bugs affecting Milestones, Theme Palette, and Chart Interactions.", zh: "‰øÆÂ§ç‰∫ÜÂΩ±ÂìçÈáåÁ®ãÁ¢ë„ÄÅ‰∏ªÈ¢òÈù¢ÊùøÂíåÂõæË°®‰∫íÂä®ÁöÑÂÖ≥ÈîÆÈîôËØØ„ÄÇ" } ]},
                { version: "v7.5.1", date: "QUANTUM-LEAP", items: [ { type: "‚ú® ÂÑ™Âåñ (Improved)", en: "Upgraded mouse trail to a 'Quantum Trail' and added a 'Data Storm' scanline.", zh: "Â∞ÜÊªëÈº†ËΩ®ËøπÂçáÁ∫ß‰∏∫Â§öÂΩ©ÁöÑ„ÄåÈáèÂ≠êÂÖâËΩ®„ÄçÔºåÂπ∂Êñ∞Â¢û‰∫Ü„ÄåÊï∞ÊçÆÈ£éÊö¥„ÄçÊâ´ÊèèÁ∫ø„ÄÇ" } ]},
                { version: "v7.5", date: "STABILIZED-CORE", items: [ { type: "‚ú® ÂÑ™Âåñ (Improved)", en: "Enhanced the cosmic dust VFX to be interactive.", zh: "Â¢ûÂº∑‰∫ÜÂÆáÂÆôÂ∞òÂüÉÁâπÊïà‰ΩøÂÖ∂ÂèØ‰∫íÂä®„ÄÇ" } ]},
                { version: "v7.4", date: "NEXUS-CORE", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Pet interaction now triggers a burst of heart particles.", zh: "ÂÆ†Áâ©‰∫íÂä®Áé∞Âú®‰ºöËß¶ÂèëÁà±ÂøÉÁ≤íÂ≠êÁàÜÂèë„ÄÇ" } ]},
                { version: "v7.3", date: "HYPERSPACE", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Added a 'Hyperspace' jump animation on page load.", zh: "Âä†ÂÖ•‰∫Ü„ÄåË∂ÖÁ©∫Èó¥Ë∑≥Ë∑É„ÄçÂä†ËΩΩÂä®Áîª„ÄÇ" } ]},
                { version: "v7.2.1", date: "FONT-MATRIX", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Added a font toggle.", zh: "Â¢ûÂä†‰∫ÜÂ≠ó‰ΩìÂàáÊç¢Âô®„ÄÇ" } ]},
                { version: "v7.2", date: "LEGACY-ARCHIVE", items: [ { type: "‚ú® ÂÑ™Âåñ (Improved)", en: "Restored complete changelog history.", zh: "ÊÅ¢Â§ç‰∫ÜÂÆåÊï¥ÁöÑÊõ¥Êñ∞Êó•Âøó„ÄÇ" } ]},
                { version: "v7.1", date: "AETHER-PAINTER", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Introduced the 'Aether Painter' autonomous bunny.", zh: "ÂºïÂÖ•‰∫Ü„Äå‰ª•Â§™ÁîªÂÆ∂„ÄçËá™‰∏ªÂÖîÂ≠ê„ÄÇ" } ]},
                { version: "v7.0", date: "PHOTON-CORE", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Introduced the 'Photon Pixel Bunny' cursor.", zh: "ÂºïÂÖ•‰∫Ü„ÄåÂÖâÂ≠êÂÉèÁ¥†ÂÖî„ÄçÊ∏∏Ê®ô„ÄÇ" } ]},
                { version: "v6.4", date: "INTERACTIVE-GRID", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Added interactive chart data points.", zh: "‰∏∫ÂõæË°®Â¢ûÂä†‰∫Ü‰∫íÂä®Êï∞ÊçÆÁÇπ„ÄÇ" } ]},
                { version: "v6.3", date: "PIXEL-CORE", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Applied a global pixel font.", zh: "Â∫îÁî®‰∫ÜÂÖ®Â±ÄÂÉèÁ¥†Â≠ó‰Ωì„ÄÇ" } ]},
                { version: "v6.2", date: "LOGIC-REFINED", items: [ { type: "‚ôªÔ∏è ÈáçÊßã (Refactor)", en: "Refactored data loading logic.", zh: "ÈáçÊûÑ‰∫ÜÊï∞ÊçÆÂä†ËΩΩÈÄªËæë„ÄÇ" } ]},
                { version: "v6.1", date: "STABLE", items: [ { type: "üêõ ‰øÆÂæ© (Fix)", en: "Patched a theme engine issue.", zh: "‰øÆÂ§ç‰∫Ü‰∏ªÈ¢òÂºïÊìéÈóÆÈ¢ò„ÄÇ" } ]},
                { version: "v6.0", date: "STARFLEET-COMMAND", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Migrated UI to LCARS standard.", zh: "Â∞ÜUIËøÅÁßªËá≥LCARSÊ†áÂáÜ„ÄÇ" } ]},
                { version: "v5.0", date: "NEBULA-GRID", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Added performance panel and roaming mascot.", zh: "Êñ∞Â¢û‰∫ÜÊÄßËÉΩÈù¢ÊùøÂíåÊº´Ê∏∏ÂÆ†Áâ©„ÄÇ" } ]},
                { version: "v4.0", date: "TRON Grid", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Re-engineered UI with TRON aesthetic.", zh: "‰ª•TRONÁæéÂ≠¶ÈáçÊûÑUI„ÄÇ" } ]},
                { version: "v3.0", date: "Modern Fusion", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Introduced theme engine and changelog.", zh: "ÂºïÂÖ•‰∏ªÈ¢òÂºïÊìéÂíåÊõ¥Êñ∞Êó•Âøó„ÄÇ" } ]},
                { version: "v2.0", date: "Pixel Upgrade", items: [ { type: "‚ú® ÂÑ™Âåñ (Improved)", en: "Switched to pixel font and added record archive.", zh: "Êõ¥Êç¢‰∏∫ÂÉèÁ¥†Â≠ó‰ΩìÂπ∂Ê∑ªÂä†Ê°£Ê°àËÆ∞ÂΩï„ÄÇ" } ]},
                { version: "v1.0", date: "Initial Commit", items: [ { type: "üöÄ Êñ∞ÂäüËÉΩ (New)", en: "Project initialized with timers and chart.", zh: "È°πÁõÆÂàùÂßãÂåñÔºåÂÆûÁé∞ËÆ°Êó∂Âô®ÂíåÂõæË°®„ÄÇ" } ]},
            ];
            const contentEl = document.getElementById('changelog-content');
            contentEl.innerHTML = changelogData.map(log => `<div class="mb-6"><p class="text-xl font-bold accent-text">${log.version} <span class="text-sm font-normal text-gray-400">- ${log.date}</span></p><ul class="mt-3 space-y-2 list-disc list-inside">${log.items.map(item => `<li><p class="inline font-bold">${item.type}</p><p class="text-gray-300 mt-1">${item.zh}</p><p class="text-xs text-gray-500">${item.en}</p></li>`).join('')}</ul></div>`).join('');
        }
    </script>
</body>
</html>
