<!DOCTYPE html>
<html lang="zh-CN" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ° å…”å¯å¯æ¡£æ¡ˆ v3.0.0 - ğŸ”„ æ ¸å¿ƒå›æº¯å…” (Core Rollback Rabbit)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Variables for TRON Theming (from user's working code) */
        :root {
            --glow-rgb: 34, 211, 238; /* Cyan */
            --glow-light-rgb: 103, 232, 249;
            --bg-color: #010409;
            --surface-color: rgba(13, 27, 42, 0.5);
            --grid-color: rgba(var(--glow-rgb), 0.15);
            --text-color: #e6edf3;
            --text-muted-color: #8b949e;
        }

        /* Base styles */
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.5s ease;
            overflow: hidden; /* Prevent scrollbar from animated background */
            opacity: 0;
            animation: fadeIn 1s ease 0.5s forwards;
        }
        
        .font-pixel { font-family: 'Press Start 2P', cursive; }
        .glow-text { color: rgb(var(--glow-light-rgb)); text-shadow: 0 0 8px rgba(var(--glow-rgb), 0.8); }
        .glow-border { border: 1px solid rgba(var(--glow-rgb), 0.4); box-shadow: 0 0 12px rgba(var(--glow-rgb), 0.2), inset 0 0 8px rgba(var(--glow-rgb), 0.15); }
        
        /* Animated Grid Background */
        #grid-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background-image:
                linear-gradient(rgba(var(--glow-rgb), 0.15) 1px, transparent 1px),
                linear-gradient(90deg, rgba(var(--glow-rgb), 0.15) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: pan-grid 20s linear infinite;
        }

        /* Scanline Overlay */
        #scanline-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100; /* Increased z-index to be above content for scanline effect */
            pointer-events: none;
            background: linear-gradient(to bottom, rgba(18, 18, 18, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(to bottom, rgba(255, 255, 255, 0.08), rgba(0, 0, 0, 0.08));
            background-size: 100% 4px, 100% 1px;
            animation: scanline-move 10s linear infinite;
        }

        /* Pac-Man Profile Image Container */
        .pacman-container {
            position: relative;
            width: 160px; height: 160px;
            transition: transform 0.3s ease;
        }
        .pacman-container:hover { transform: scale(1.05); }
        .pacman-mouth {
            position: absolute;
            width: 100%; height: 100%;
            clip-path: polygon(0% 0%, 100% 0%, 100% 40%, 50% 50%, 100% 60%, 100% 100%, 0% 100%);
            transition: clip-path 0.3s ease-in-out;
        }
        .pacman-container:hover .pacman-mouth {
            clip-path: polygon(0% 0%, 100% 0%, 100% 0%, 50% 50%, 100% 100%, 100% 100%, 0% 100%);
        }

        /* Main container and UI elements */
        .main-container {
            background-color: var(--surface-color);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        .ui-module { transition: all 0.5s; opacity: 0; transform: translateY(20px); animation: module-boot 0.5s ease forwards; }
        .list-pellet li::before {
            content: 'â€¢';
            color: rgb(var(--glow-light-rgb));
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
            animation: pellet-glow 1.5s infinite alternate;
        }

        /* Modals */
        .modal-overlay { background-color: rgba(0,0,0,0.7); backdrop-filter: blur(4px); }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes pan-grid { from { background-position: 0 0; } to { background-position: -50px -50px; } }
        @keyframes scanline-move { from { background-position: 0 0; } to { background-position: 0 100%; } }
        @keyframes pellet-glow { from { text-shadow: 0 0 2px; } to { text-shadow: 0 0 10px rgba(var(--glow-light-rgb), 1); } }
        @keyframes module-boot { to { opacity: 1; transform: translateY(0); } }

        /* Custom scrollbar */
        .record-scrollbar::-webkit-scrollbar { width: 8px; }
        .record-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .record-scrollbar::-webkit-scrollbar-thumb { background: rgba(var(--glow-rgb), 0.5); border-radius: 4px; }
        .record-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(var(--glow-rgb), 0.8); }

        /* Rabbit styles (from previous versions, re-integrated) */
        #wandering-rabbit {
            position: fixed;
            width: 72px; 
            height: 72px; 
            z-index: 90; /* Below scanline, above grid */
            pointer-events: none;
            transition: left 1s ease-in-out, top 1s ease-in-out;
            fill: rgb(var(--glow-light-rgb)); /* Use glow color */
            filter: drop-shadow(0 0 15px rgba(var(--glow-rgb), 0.8));
        }
        .rabbit-dropping {
            position: absolute;
            width: 6px; 
            height: 6px;
            background-color: #4a2c2a; 
            border-radius: 1px; 
            transform: scale(1);
            opacity: 1;
            transition: transform 2s ease-out, opacity 2s ease-out; 
            z-index: 89; 
            pointer-events: none; 
            box-shadow: 0 0 2px rgba(0,0,0,0.5); 
        }
        .rabbit-dropping.fade-out {
            transform: scale(0.2);
            opacity: 0;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div id="grid-background"></div>
    <!-- Wandering Rabbit Character (Re-added) -->
    <div id="wandering-rabbit">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8" fill="currentColor">
            <rect x="1" y="0" width="1" height="1"/><rect x="3" y="0" width="1" height="1"/>
            <rect x="0" y="1" width="1" height="1"/><rect x="4" y="1" width="1" height="1"/>
            <rect x="0" y="2" width="1" height="1"/><rect x="6" y="2" width="1" height="1"/>
            <rect x="0" y="3" width="1" height="1"/><rect x="6" y="3" width="1" height="1"/>
            <rect x="0" y="4" width="1" height="1"/><rect x="6" y="4" width="1" height="1"/>
            <rect x="2" y="2" width="1" height="1"/><rect x="3" y="2" width="1" height="1"/>
            <rect x="2" y="3" width="1" height="1"/><rect x="3" y="3" width="1" height="1"/>
            <rect x="1" y="5" width="1" height="1"/><rect x="2" y="5" width="1" height="1"/>
            <rect x="3" y="5" width="1" height="1"/><rect x="4" y="5" width="1" height="1"/><rect x="5" y="5" width="1" height="1"/>
        </svg>
    </div>
    <div id="scanline-overlay"></div>

    <!-- Main Container (from user's working code) -->
    <div class="main-container w-full max-w-7xl rounded-2xl shadow-2xl overflow-hidden transition-all duration-500 glow-border">
        <!-- Header -->
        <div class="px-4 py-2 flex items-center justify-between border-b" style="border-color: rgba(var(--glow-rgb), 0.3)">
            <p class="font-pixel text-xs sm:text-sm tracking-widest glow-text">BCC_SYS_v3.0.0_TRON</p>
            <!-- Controls (from user's working code) -->
            <div class="flex items-center space-x-3 text-gray-400">
                   <button title="æ›´æ–°æ—¥èªŒ" onclick="toggleModal('changelog-modal')" class="transition-colors hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg></button>
                <button title="ä¸»é¡Œé¢æ¿" onclick="toggleModal('theme-modal')" class="transition-colors hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" /></svg></button>
                <button title="å…¨è¢å¹•" onclick="toggleFullscreen()" class="transition-colors hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 0l-5-5" /></svg></button>
            </div>
        </div>

        <!-- Main content grid (from user's working code) -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 p-6">
            <!-- Left Panel -->
            <div class="lg:col-span-1 p-6 flex flex-col space-y-8">
                <div class="ui-module text-center" style="animation-delay: 0.2s;">
                    <div class="pacman-container mx-auto">
                        <div class="pacman-mouth glow-border rounded-full">
                            <img id="profile-pic" src="https://placehold.co/160x160/010409/22d3ee?text=Loading..." 
                                 onerror="this.onerror=null; this.src='https://placehold.co/160x160/010409/22d3ee?text=Error';"
                                 class="w-full h-full rounded-full object-cover">
                        </div>
                    </div>
                    <h1 class="font-pixel text-2xl font-bold mt-4 glow-text">BUNNY CC</h1>
                    <p class="text-sm font-pixel" style="color: var(--text-muted-color)">ID: B-20240312</p>
                </div>
                <div class="ui-module" style="animation-delay: 0.4s;">
                    <h2 class="font-pixel text-base pb-2 mb-4 glow-text" style="border-bottom: 1px solid rgba(var(--glow-rgb), 0.3)">MILESTONES</h2>
                    <div id="timing" class="space-y-2 text-sm whitespace-pre-line leading-relaxed list-pellet" style="color: var(--text-muted-color)"></div>
                </div>
            </div>

            <!-- Right Panel -->
            <div class="lg:col-span-2 p-6 space-y-6">
                <div class="ui-module" style="animation-delay: 0.6s;">
                    <h2 class="font-pixel text-base pb-2 mb-4 glow-text" style="border-bottom: 1px solid rgba(var(--glow-rgb), 0.3)">WEIGHT_GRID</h2>
                    <div class="h-64"><canvas id="weightChart"></canvas></div>
                    <div id="weight-change-info" class="mt-4 text-center p-3 rounded-lg h-12 flex items-center justify-center text-sm" style="background-color: rgba(var(--glow-rgb), 0.05); border: 1px solid rgba(var(--glow-rgb), 0.2)"></div>
                </div>
                <div class="ui-module" style="animation-delay: 0.8s;">
                    <h2 class="font-pixel text-base pb-2 mb-4 glow-text" style="border-bottom: 1px solid rgba(var(--glow-rgb), 0.3)">DATA_STREAM</h2>
                    <div id="all-records-container" class="record-scrollbar h-56 overflow-y-auto pr-2 space-y-3 text-sm"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modals (from user's working code) -->
    <div id="changelog-modal" class="modal-overlay fixed inset-0 z-50 hidden items-center justify-center" onclick="toggleModal('changelog-modal')">
        <div class="main-container glow-border w-11/12 max-w-2xl" onclick="event.stopPropagation()">
            <h2 class="font-pixel text-lg p-4 glow-text border-b" style="border-color:rgba(var(--glow-rgb), 0.3)">CHANGELOG</h2>
            <div class="p-6 max-h-[70vh] overflow-y-auto record-scrollbar list-pellet">
                <!-- Changelog content will be populated by JavaScript -->
            </div>
        </div>
    </div>
    <div id="theme-modal" class="modal-overlay fixed inset-0 z-50 hidden items-center justify-center" onclick="toggleModal('theme-modal')">
        <div class="main-container glow-border w-11/12 max-w-md" onclick="event.stopPropagation()">
            <h2 class="font-pixel text-lg p-4 glow-text border-b" style="border-color:rgba(var(--glow-rgb), 0.3)">COLOR_CYCLE</h2>
            <div id="theme-grid" class="p-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4"></div>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const CONFIG = {
            PROFILE_PIC_PATH: 'dist/Bunny CC_Profile.JPG', // Path to the profile picture
            PET_RECORDS_PATH: 'dist/bunnycc/PetRecords.json', // Path to the pet records JSON
            START_DATE: '2024/03/12 00:00:00', // Start date for anniversary timer
            THEMES: [ // Predefined themes for color cycling
                { name: 'Cyan', rgb: '34, 211, 238', light_rgb: '103, 232, 249'},
                { name: 'Magenta', rgb: '244, 114, 182', light_rgb: '249, 168, 212'},
                { name: 'Lime', rgb: '132, 204, 22', light_rgb: '163, 230, 53'},
                { name: 'Orange', rgb: '249, 115, 22', light_rgb: '251, 146, 60'},
                { name: 'Yellow', rgb: '251, 191, 36', light_rgb: '252, 211, 77'},
                { name: 'Red', rgb: '239, 68, 68', light_rgb: '248, 113, 113'},
                { name: 'Indigo', rgb: '88, 86, 214', light_rgb: '129, 140, 248'},
                { name: 'Green', rgb: '34, 197, 94', light_rgb: '74, 222, 128'},
                { name: 'White', rgb: '229, 231, 235', light_rgb: '243, 244, 246'},
                { name: 'Purple', rgb: '168, 85, 247', light_rgb: '192, 132, 252'},
            ]
        };

        // --- GLOBAL STATE & DOM ELEMENTS ---
        let weightChart = null; // Chart.js instance
        let allRecordsData = []; // Stores all parsed pet records
        let weightChartData = []; // Stores filtered weight records for the chart

        // UI elements, will be populated on DOMContentLoaded to ensure elements exist
        let ui = {}; 

        // Rabbit animation variables
        let wanderingRabbit; 
        const droppingsPool = [];
        const MAX_DROPPINGS = 70; 
        let currentDroppingIndex = 0;
        let lastDropTime = 0;
        let targetX, targetY, currentX, currentY; // Declared here, initialized in animateRabbit init

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Populate UI elements after DOM is fully loaded
            ui = {
                profilePic: document.getElementById('profile-pic'),
                timing: document.getElementById('timing'),
                weightChartCanvas: document.getElementById('weightChart'),
                weightChangeInfo: document.getElementById('weight-change-info'),
                allRecordsContainer: document.getElementById('all-records-container'),
                changelogModal: document.getElementById('changelog-modal'),
                themeModal: document.getElementById('theme-modal'),
                changelogList: null, // Will be set after changelog content is populated
                themeGrid: document.getElementById('theme-grid'),
            };

            // Set profile picture source
            if (ui.profilePic) {
                ui.profilePic.src = CONFIG.PROFILE_PIC_PATH;
            } else {
                console.error("Profile picture element not found.");
            }

            // Start timer updates
            setInterval(updateTiming, 100);

            // Load and process data
            loadAndProcessData();

            // Generate theme swatches
            generateThemeSwatches();

            // Initialize wandering rabbit and start animation
            wanderingRabbit = document.getElementById('wandering-rabbit');
            if (wanderingRabbit) {
                currentX = Math.random() * (window.innerWidth - 72); 
                currentY = Math.random() * (window.innerHeight - 72); 
                wanderingRabbit.style.left = `${currentX}px`;
                wanderingRabbit.style.top = `${currentY}px`;
                // Initialize droppings
                for (let i = 0; i < MAX_DROPPINGS; i++) {
                    const dropping = document.createElement('div');
                    dropping.className = 'rabbit-dropping';
                    document.body.appendChild(dropping);
                    droppingsPool.push(dropping);
                }
                animateRabbit();
            } else {
                console.warn("Wandering rabbit element not found, animation disabled.");
            }

            // Populate changelog content and then get the list element
            populateChangelog();
            if (ui.changelogModal) {
                 ui.changelogList = ui.changelogModal.querySelector('.list-pellet');
                 if (!ui.changelogList) {
                     console.error("Changelog list inside modal not found.");
                 }
            }
        });

        // --- UI FUNCTIONS ---
        /**
         * Toggles the visibility of a modal.
         * @param {string} modalId - The ID of the modal element.
         */
        function toggleModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.toggle('hidden');
                modal.classList.toggle('flex');
            } else {
                console.error(`Modal with ID '${modalId}' not found.`);
            }
        }

        /**
         * Changes the overall theme of the application based on RGB values.
         * @param {Object} theme - An object containing rgb and light_rgb values for the theme.
         */
        function changeTheme(theme) {
            const docEl = document.documentElement;
            docEl.style.setProperty('--glow-rgb', theme.rgb);
            docEl.style.setProperty('--glow-light-rgb', theme.light_rgb);
            // Re-render chart to apply new colors if it exists
            if (weightChart) {
                renderWeightChart(); 
            }
        }

        /**
         * Generates and appends theme color swatches to the theme modal.
         */
        function generateThemeSwatches() {
            if (!ui.themeGrid) {
                console.error("Theme grid element not found for generating swatches.");
                return;
            }
            ui.themeGrid.innerHTML = ''; // Clear previous swatches
            CONFIG.THEMES.forEach(theme => {
                const swatch = document.createElement('button');
                swatch.className = "h-12 w-full rounded-md transition-all duration-200 hover:scale-110 hover:shadow-lg focus:ring-2 ring-offset-2";
                swatch.style.backgroundColor = `rgb(${theme.rgb})`;
                swatch.style.boxShadow = `0 0 15px rgba(${theme.rgb}, 0.5)`;
                swatch.style.ringColor = `rgb(${theme.rgb})`;
                swatch.style.ringOffsetColor = `var(--bg-color)`;
                swatch.title = theme.name;
                swatch.onclick = () => changeTheme(theme);
                ui.themeGrid.appendChild(swatch);
            });
        }
        
        /**
         * Toggles fullscreen mode for the document.
         */
        function toggleFullscreen() {
            const docEl = document.documentElement;
            if (!document.fullscreenElement) {
                docEl.requestFullscreen().catch(err => showCustomAlert(`å…¨è¢å¹•å¤±æ•—: ${err.message}`));
            } else {
                document.exitFullscreen().catch(err => showCustomAlert(`é€€å‡ºå…¨è¢å¹•å¤±æ•—: ${err.message}`));
            }
        }

        // --- DATA & TIMING LOGIC ---
        /**
         * Updates the anniversary timing display.
         */
        function updateTiming() {
            const start = new Date(CONFIG.START_DATE);
            const now = new Date();
            const elapsedMs = now.getTime() - start.getTime();

            const elapsedDays = (elapsedMs / (1000 * 60 * 60 * 24)).toFixed(3);
            const totalSeconds = Math.floor(elapsedMs / 1000);
            const elapsedHours = Math.floor(totalSeconds / 3600);
            const elapsedMinutes = Math.floor((totalSeconds % 3600) / 60);
            const elapsedSeconds = totalSeconds % 60;
            
            const formatDate = (d) => `${d.getFullYear()}-${(d.getMonth() + 1).toString().padStart(2, '0')}-${d.getDate().toString().padStart(2, '0')}`;
            
            // Helper to get next anniversary date based on fixed day intervals
            const getNextAnniversary = (baseDate, days) => {
                let count = 0, nextDate;
                do { 
                    count++; 
                    nextDate = new Date(baseDate.getTime() + count * days * 24 * 60 * 60 * 1000); 
                } while (nextDate < now);
                return { date: nextDate, count };
            };
            
            // Helper to get next yearly anniversary
            const getNextYearly = (baseDate) => {
                let count = 0, nextDate;
                do { 
                    count++; 
                    nextDate = new Date(baseDate); 
                    nextDate.setFullYear(baseDate.getFullYear() + count); 
                } while (nextDate < now);
                return { date: nextDate, count };
            };
            
            const next100 = getNextAnniversary(new Date(CONFIG.START_DATE), 100);
            const next180 = getNextAnniversary(new Date(CONFIG.START_DATE), 180);
            const next300 = getNextAnniversary(new Date(CONFIG.START_DATE), 300);
            const nextYear = getNextYearly(new Date(CONFIG.START_DATE));
            
            if (ui.timing) {
                ui.timing.innerHTML = `<ul>
                    <li>ğŸ°å…”å¯å¯å·²ç¶“åˆ°ä¾† ${elapsedDays} å¤©å•¦</li>
                    <li>ğŸŒ±ä¸‹ä¸€å€‹100å¤©ç´€å¿µæ—¥æ˜¯ ${formatDate(next100.date)}ï¼ˆç¬¬${next100.count}å€‹100å¤©ï¼‰</li>
                    <li>ğŸŒ¿ä¸‹ä¸€å€‹180å¤©ç´€å¿µæ—¥æ˜¯ ${formatDate(next180.date)}ï¼ˆç¬¬${next180.count}å€‹180å¤©ï¼‰</li>
                    <li>ğŸ€ä¸‹ä¸€å€‹300å¤©ç´€å¿µæ—¥æ˜¯ ${formatDate(next300.date)}ï¼ˆç¬¬${next300.count}å€‹300å¤©ï¼‰</li>
                    <li>ğŸ‰ä¸‹ä¸€å€‹ä¸€å‘¨å¹´ç´€å¿µæ—¥æ˜¯ ${formatDate(nextYear.date)}ï¼ˆç¬¬${nextYear.count}å‘¨å¹´ï¼‰</li>
                    <li>ğŸ‚ç›®å‰å·²ç¶“åˆ°ä¾† ${elapsedHours}å°æ™‚${elapsedMinutes}åˆ†é˜${elapsedSeconds}ç§’</li>
                </ul>`;
            } else {
                console.warn("UI element 'timing' not found for updateTiming.");
            }
        }
        
        /**
         * Loads pet records from the JSON file and processes them for display and charting.
         */
        async function loadAndProcessData() {
            if (!ui.allRecordsContainer) {
                console.error("All records container element not found.");
                return;
            }

            // Display loading message
            ui.allRecordsContainer.innerHTML = `<p class="text-center text-xl" style="color: var(--text-muted-color);">æ­£åœ¨åŠ è½½å® ç‰©æ¡£æ¡ˆ...</p>`;

            try {
                const response = await fetch(CONFIG.PET_RECORDS_PATH);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const records = await response.json();
                console.log('Parsed petRecordsData loaded:', records);
                
                // Process all records: convert timestamp and add 31 years offset
                allRecordsData = records.map(r => {
                    const d = new Date(Math.floor(r.date) * 1000); // Convert timestamp to milliseconds
                    d.setFullYear(d.getFullYear() + 31); // Add 31 years offset (as per user's previous code)
                    return { ...r, processedDate: d };
                }).sort((a, b) => b.processedDate.getTime() - a.processedDate.getTime()); // Sort descending for display

                // Filter for weight chart data
                weightChartData = records
                    .filter(r => r.activity === 'ä½“é‡æµ‹é‡' && typeof r.weight === 'number' && r.weight > 0)
                    .map(r => {
                        const d = new Date(Math.floor(r.date) * 1000);
                        d.setFullYear(d.getFullYear() + 31);
                        return { date: d, weight: r.weight };
                    })
                    .sort((a, b) => a.date.getTime() - b.date.getTime()); // Sort ascending for chart chronological order

                renderAllRecords();
                renderWeightChart();

            } catch (error) {
                console.error("Data load error:", error);
                ui.allRecordsContainer.innerHTML = `<p class="text-red-400 text-center">éŒ¯èª¤: æª”æ¡ˆè¨˜éŒ„è¼‰å…¥å¤±æ•—ã€‚è©³æƒ…è«‹æŸ¥çœ‹æ§åˆ¶å°ã€‚</p>`;
                showCustomAlert(`åŠ è½½æ¡£æ¡ˆå¤±è´¥: ${error.message}`);
            }
        }

        /**
         * Renders all pet records in the list container.
         */
        function renderAllRecords() {
            if (!ui.allRecordsContainer) return;

            ui.allRecordsContainer.innerHTML = allRecordsData.map(rec => {
                const dateStr = rec.processedDate.toLocaleDateString('zh-CN', { year: 'numeric', month: '2-digit', day: '2-digit' });
                return `<div class="p-3 rounded-md" style="background: rgba(var(--glow-rgb), 0.05); border-left: 3px solid rgba(var(--glow-rgb), 0.5)">
                            <div class="flex justify-between items-center">
                                <strong class="font-bold glow-text text-sm">${rec.activity}</strong>
                                <time class="text-xs" style="color:var(--text-muted-color)">${dateStr}</time>
                            </div>
                            <p class="mt-1" style="color: var(--text-color)">${rec.notes || 'ç„¡å‚™è¨»'}</p>
                        </div>`;
            }).join('');
        }

        /**
         * Renders the weight change chart.
         */
        function renderWeightChart() {
            if (!ui.weightChartCanvas) {
                console.error("Weight chart canvas element not found.");
                return;
            }

            if (weightChart) {
                weightChart.destroy(); // Destroy existing chart instance
            }

            if (!weightChartData.length) {
                ui.weightChartCanvas.style.display = 'none';
                if (ui.weightChangeInfo) ui.weightChangeInfo.innerHTML = `<p class="text-yellow-400">æœªæ‰¾åˆ°ä½“é‡æµ‹é‡æ•°æ®ã€‚</p>`;
                return;
            } else {
                ui.weightChartCanvas.style.display = 'block';
                if (ui.weightChangeInfo) ui.weightChangeInfo.innerHTML = `<p class="text-gray-400">é»æ“Šåœ–è¡¨ä¸Šçš„æ•¸æ“šé»ä»¥æŸ¥çœ‹é«”é‡è®ŠåŒ–</p>`;
            }
            
            const ctx = ui.weightChartCanvas.getContext('2d');
            const style = getComputedStyle(document.documentElement);
            const primaryColor = `rgb(${style.getPropertyValue('--glow-rgb').trim()})`;
            const textColor = style.getPropertyValue('--text-muted-color').trim();
            const gridColor = `rgba(${style.getPropertyValue('--glow-rgb').trim()}, 0.1)`;

            weightChart = new Chart(ctx, {
                type: 'line',
                data: {
                    // Labels are now simple date strings, not Date objects for 'time' scale
                    labels: weightChartData.map(d => d.date.toLocaleDateString('zh-CN', { year: 'numeric', month: '2-digit', day: '2-digit' })),
                    datasets: [{
                        label: 'é«”é‡ (g)',
                        data: weightChartData.map(d => d.weight),
                        borderColor: primaryColor,
                        backgroundColor: `rgba(${style.getPropertyValue('--glow-rgb').trim()}, 0.2)`,
                        borderWidth: 2,
                        pointBackgroundColor: primaryColor,
                        pointBorderColor: 'var(--bg-color)',
                        pointRadius: 4,
                        pointHoverRadius: 7,
                        tension: 0.4,
                        fill: true,
                        shadowOffsetX: 0, // Custom properties for shadow (might not work directly in Chart.js)
                        shadowOffsetY: 0,
                        shadowBlur: 10,
                        shadowColor: primaryColor,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: false },
                        tooltip: { // Custom tooltip styling
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + 'g';
                                        const currentIndex = context.dataIndex;
                                        // Calculate difference from previous point
                                        if (currentIndex > 0) {
                                            const previousWeight = context.dataset.data[currentIndex - 1];
                                            const currentWeight = context.parsed.y;
                                            const difference = currentWeight - previousWeight;
                                            label += ` (èˆ‡å‰ä¸€é»ç›¸å·®: ${difference >= 0 ? '+' : ''}${difference.toFixed(1)}g)`;
                                        }
                                    }
                                    return label;
                                }
                            },
                            titleFont: { family: "'Noto Sans SC', sans-serif" }, // Use Noto Sans for tooltips
                            bodyFont: { family: "'Noto Sans SC', sans-serif" },
                            padding: 10,
                            boxPadding: 5,
                            displayColors: false,
                            backgroundColor: 'rgba(0, 0, 0, 0.7)',
                            borderColor: primaryColor,
                            borderWidth: 1,
                            cornerRadius: 5,
                        }
                    },
                    scales: {
                        y: { 
                            grid: { color: gridColor, drawBorder: false }, 
                            ticks: { color: textColor, font: { family: "'Noto Sans SC', sans-serif" }} 
                        },
                        x: { 
                            grid: { display: false }, 
                            ticks: { color: textColor, font: { family: "'Noto Sans SC', sans-serif" }} 
                        }
                    },
                    onClick: (event, elements) => {
                        if (elements.length > 0 && ui.weightChangeInfo) { // Ensure element exists
                            const index = elements[0].index;
                            if (index > 0) {
                                const diff = weightChartData[index].weight - weightChartData[index - 1].weight;
                                const sign = diff >= 0 ? '+' : '';
                                const color = diff >= 0 ? 'text-lime-400' : 'text-red-400';
                                ui.weightChangeInfo.innerHTML = `<p>èˆ‡ä¸Šæ¬¡ç›¸æ¯”: <span class="font-bold ${color}">${sign}${diff.toFixed(1)}g</span></p>`;
                            } else {
                                ui.weightChangeInfo.innerHTML = `<p>é€™æ˜¯ç¬¬ä¸€æ¬¡æ¸¬é‡è¨˜éŒ„</p>`;
                            }
                        }
                    }
                }
            });
        }

        // --- Wandering Rabbit Animation Logic ---
        function animateRabbit() {
            if (!wanderingRabbit) return; // Guard against element not found

            const speed = 2; 
            // Initialize targets if not set
            if (targetX === undefined || targetY === undefined) { 
                targetX = Math.random() * (window.innerWidth - 72); 
                targetY = Math.random() * (window.innerHeight - 72); 
            }
            
            const prevX = currentX; 
            const prevY = currentY;

            const distanceX = targetX - currentX;
            const distanceY = targetY - currentY;
            const distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);

            if (distance < speed || distance > 500) { 
                currentX = targetX;
                currentY = targetY;
                targetX = Math.random() * (window.innerWidth - 72); 
                targetY = Math.random() * (window.innerHeight - 72); 
            } else {
                currentX += (distanceX / distance) * speed;
                currentY += (distanceY / distance) * speed;
            }

            currentX = Math.max(0, Math.min(currentX, window.innerWidth - 72)); 
            currentY = Math.max(0, Math.min(currentY, window.innerHeight - 72)); 

            wanderingRabbit.style.left = `${currentX}px`;
            wanderingRabbit.style.top = `${currentY}px`;

            if (performance.now() - lastDropTime > DROP_INTERVAL_MS) {
                const dropping = droppingsPool[currentDroppingIndex];
                if (dropping) { // Ensure dropping element exists
                    dropping.style.left = `${prevX + (72 - 6) / 2}px`; 
                    dropping.style.top = `${prevY + (72 - 6) / 2 + 10}px`;  
                    
                    dropping.classList.remove('fade-out');
                    void dropping.offsetWidth; // Trigger reflow to restart animation
                    dropping.classList.add('fade-out');

                    currentDroppingIndex = (currentDroppingIndex + 1) % MAX_DROPPINGS;
                    lastDropTime = performance.now();
                }
            }

            requestAnimationFrame(animateRabbit);
        }

        window.addEventListener('resize', () => {
            if (!wanderingRabbit) return; // Guard against element not found
            currentX = Math.min(Math.max(0, currentX), window.innerWidth - 72); 
            currentY = Math.min(Math.max(0, currentY), window.innerHeight - 72); 
            wanderingRabbit.style.left = `${currentX}px`;
            wanderingRabbit.style.top = `${currentY}px`;

            targetX = Math.random() * (window.innerWidth - 72); 
            targetY = Math.random() * (window.innerHeight - 72); 
        });

        // --- Changelog Population ---
        function populateChangelog() {
            // This needs to be populated after ui.changelogList is set
            const changelogContent = `
                <h4>âœ¨ v3.0.0 - ğŸ”„ æ ¸å¿ƒå›æº¯å…” (Core Rollback Rabbit)</h4>
                <p><strong>æ–°å¢ (New!):</strong></p>
                <ul>
                    <li><strong>å…¨æ–° TRON é¢¨æ ¼ä»‹é¢ï¼</strong> å®Œå…¨åŸºæ–¼æ‚¨æä¾›çš„ã€Œå·¥ä½œæ­£å¸¸ã€ç‰ˆæœ¬ä»£ç¢¼é‡æ§‹ï¼Œå®Œç¾ç¹¼æ‰¿äº†é…·ç‚«çš„éœ“è™¹å…‰æšˆã€å‘é‡ç·šæ¢å’Œå‹•æ…‹å…‰æŸµèƒŒæ™¯ï¼Œè®“æª”æ¡ˆç•Œé¢ç…¥ç„¶ä¸€æ–°ï¼</li>
                    <li>**å…”å…”å›æ­¸ï¼** é‡æ–°å¼•å…¥äº†å¯æ„›çš„ã€Œäº‚è·‘çš„å…”å­ã€å‹•ç•«å’Œå®ƒç•™ä¸‹çš„ã€Œå·§å…‹åŠ›è±†ã€è¶³è·¡ï¼Œç‚ºæ‚¨çš„æª”æ¡ˆé é¢å¢æ·»æ›´å¤šæ´»åŠ›å’Œè¶£å‘³ï¼</li>
                </ul>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li><strong>æ•¸æ“šè¼‰å…¥æ ¸å¿ƒä¿®å¾©ï¼</strong> æ¡ç”¨æ‚¨æä¾›çš„ã€Œå·¥ä½œæ­£å¸¸ã€ç‰ˆæœ¬çš„æ•¸æ“šè¼‰å…¥æ©Ÿåˆ¶ï¼Œç¢ºä¿ \`PetRecords.json\` æª”æ¡ˆèƒ½å¤ ç©©å®šè¼‰å…¥ä¸¦æ­£ç¢ºé¡¯ç¤ºåœ¨æª”æ¡ˆåˆ—è¡¨ä¸­ï¼Œå‘Šåˆ¥æ•¸æ“šç©ºç™½å•é¡Œï¼</li>
                    <li>**æŒ‰éˆ•éŸ¿æ‡‰å…¨é¢æ¢å¾©ï¼** æ‰€æœ‰çš„æŒ‰éˆ•ï¼ˆåŒ…æ‹¬ã€Œæ›´æ–°æ—¥èªŒã€ã€ã€Œä¸»é¡Œé¢æ¿ã€ã€ã€Œå…¨è¢å¹•ã€ç­‰ï¼‰ç¾åœ¨éƒ½æ ¹æ“šæ‚¨ã€Œå·¥ä½œæ­£å¸¸ã€çš„ä»£ç¢¼é‚è¼¯é€²è¡ŒéŸ¿æ‡‰ï¼Œé»æ“Šå¾Œä¸å†æ¯«ç„¡åæ‡‰ï¼</li>
                    <li>**Chart.js æ—¥æœŸé¡¯ç¤ºç²¾ç°¡ï¼** ç§»é™¤å° \`date-fns\` å’Œ \`chartjs-adapter-date-fns\` çš„ä¾è³´ï¼Œç›´æ¥ä½¿ç”¨ç€è¦½å™¨åŸç”Ÿçš„ \`toLocaleDateString\` æ ¼å¼åŒ– Chart.js çš„ X è»¸æ¨™ç±¤ï¼Œé¿å…äº†å…ˆå‰é—œæ–¼ \`dateFns\` æœªå®šç¾©çš„éŒ¯èª¤ã€‚é€™ä½¿å¾—åœ–è¡¨é¡¯ç¤ºæ›´ç©©å®šä¸”ä¾è³´æ›´å°‘ï¼</li>
                    <li>**DOM å…ƒç´ ç²å–æ™‚æ©Ÿå„ªåŒ–ï¼** å°‡æ‰€æœ‰ DOM å…ƒç´ çš„ç²å–ï¼ˆé€šé \`document.getElementById\`ï¼‰çµ±ä¸€æ”¾ç½®åœ¨ \`DOMContentLoaded\` äº‹ä»¶ç›£è½å™¨å…§éƒ¨ï¼Œç¢ºä¿åœ¨é é¢å…ƒç´ å®Œå…¨è¼‰å…¥å¾Œæ‰å˜—è©¦æ“ä½œå®ƒå€‘ï¼Œå¾æ ¹æœ¬ä¸Šæœçµ•äº† \`Cannot set properties of null\` çš„éŒ¯èª¤ã€‚</li>
                </ul>
                <p><strong>ä¼˜åŒ– (Optimized!):</strong></p>
                <ul>
                    <li><strong>ç¨‹å¼ç¢¼çµæ§‹æ›´æ¸…æ™°ï¼</strong> å° JavaScript ç¨‹å¼ç¢¼é€²è¡Œäº†æ¨¡çµ„åŒ–å’Œè¨»é‡‹å„ªåŒ–ï¼Œä½¿å…¶æ›´æ˜“æ–¼ç†è§£å’Œç¶­è­·ã€‚</li>
                    <li><strong>å¢å¼·éŒ¯èª¤åµæ¸¬ï¼</strong> åœ¨é—œéµç’°ç¯€å¢åŠ äº†æ›´å¤šæ§åˆ¶å°æ—¥èªŒå’ŒéŒ¯èª¤æª¢æŸ¥ï¼Œæœ‰åŠ©æ–¼æœªä¾†å¿«é€Ÿå®šä½æ½›åœ¨å•é¡Œã€‚</li>
                </ul>

                <h4>âœ¨ v2.1.2 - ğŸ› ï¸ ç¨‹å¼ç¢¼é‡æ§‹å…” (Code Refactor Bunny)</h4>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li><strong>å…ƒç´ æŠ“å–æ™‚æ©Ÿæ ¡æº–ï¼</strong> å°‡æ‰€æœ‰ \`document.getElementById()\` çš„å‘¼å«ç§»å‹•åˆ° \`window.onload\` å…§ï¼Œç¢ºä¿åœ¨ DOM å®Œå…¨è¼‰å…¥å¾Œæ‰æŠ“å–å…ƒç´ ï¼Œè§£æ±ºäº† \`Cannot set properties of null\` éŒ¯èª¤ã€‚</li>
                    <li><strong>æ—¥æœŸé©é…å™¨è‡ªå‹•å•Ÿç”¨ï¼</strong> ç§»é™¤æ‰‹å‹•è¦†å¯« Chart.js æ—¥æœŸé©é…å™¨çš„ç¨‹å¼ç¢¼ï¼Œè®“ \`chartjs-adapter-date-fns\` è¼‰å…¥å¾Œè‡ªå‹•è¨»å†Šï¼Œä¿®å¾©äº† \`dateFns is not defined\` çš„éŒ¯èª¤ã€‚</li>
                    <li><strong>æ•¸æ“šè¼‰å…¥è·¯å¾‘ä¿®æ­£ï¼</strong> æ¢å¾©ä½¿ç”¨ \`fetch('dist/bunnycc/PetRecords.json')\` è¼‰å…¥æ•¸æ“šï¼Œèˆ‡æ‚¨æä¾›çš„ã€Œå·¥ä½œæ­£å¸¸ã€ç¨‹å¼ç¢¼ä¿æŒä¸€è‡´ï¼Œç¢ºä¿æ•¸æ“šèƒ½æ­£ç¢ºé¡¯ç¤ºã€‚</li>
                </ul>
                <p><strong>ä¼˜åŒ– (Optimized!):</strong></p>
                <ul>
                    <li><strong>æ›´å¼·å¤§çš„åµæ¸¬é­”æ³•ï¼</strong> å¢åŠ äº†æ›´å¤šçš„éŒ¯èª¤æª¢æŸ¥å’Œæ§åˆ¶å°æ—¥èªŒï¼Œè®“å•é¡Œè¿½è¹¤è®Šå¾—æ›´è¼•é¬†ï¼</li>
                </ul>

                <h4>âœ¨ v2.1.1 - âœ¨ å…ƒç´ å®šä½å…” (Element Locator Bunny)</h4>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li><strong>æ ¸å¿ƒå…ƒç´ æ­¸ä½ï¼</strong> å¾¹åº•ä¿®å¾©äº† DOM å…ƒç´  ID ä¸åŒ¹é…çš„å•é¡Œï¼ˆä¾‹å¦‚ \`profile-pic\` å’Œ \`all-records-container\`ï¼‰ï¼Œç¾åœ¨ JavaScript èƒ½å¤ ç²¾æº–æ‰¾åˆ°å®ƒå€‘ï¼Œæª”æ¡ˆé¡¯ç¤ºä¸å†ç©ºç™½ï¼</li>
                    <li><strong>é«”é‡è®ŠåŒ–æç¤ºå›æ­¸ï¼</strong> é‡æ–°åŠ å…¥äº† \`weight-change-info\` æç¤ºæ¡†ï¼Œè®“é«”é‡æ•¸æ“šçš„äº’å‹•åé¥‹ä¸å†ç¥ç§˜å¤±è¹¤ï¼</li>
                    <li><strong>æª”æ¡ˆè¼‰å…¥å¥‡è¹Ÿï¼</strong> æª”æ¡ˆæ•¸æ“šï¼ˆ\`PetRecords.json\`ï¼‰ç¾åœ¨é€é \`content_fetcher\` å®‰å…¨ç©©å®šè¼‰å…¥ï¼Œå‘Šåˆ¥ \`Cannot set properties of null\` çš„é™°å½±ï¼</li>
                </ul>
                <p><strong>ä¼˜åŒ– (Optimized!):</strong></p>
                <ul>
                    <li><strong>åµæ¸¬é­”æ³•å‡ç´šï¼</strong> å¢åŠ äº†æ›´å¤šçš„ \`console.log\` åµæ¸¬é»ï¼Œæ–¹ä¾¿æˆ‘å€‘æœªä¾†åƒå°ˆæ¥­åµæ¢ä¸€æ¨£ï¼Œåœ¨æ§åˆ¶å°è¿½è¸ªæ•¸æ“šæµå’Œå…ƒç´ ç‹€æ…‹ï¼Œä»»ä½•ç•°å¸¸éƒ½ç„¡æ‰€éå½¢ï¼</li>
                </ul>

                <h4>âœ¨ v2.1.0 - ğŸ’« é‡å­è·³èºå…” (Quantum Leap Bunny)</h4>
                <p><strong>æ–°å¢ (New!):</strong></p>
                <ul>
                    <li><strong>å…¨æ–°ç´€å…ƒå•Ÿå‹•ï¼</strong> ç‰ˆæœ¬è™Ÿå’Œä»£è™Ÿå¯¦ç¾äº†å²è©©ç´šã€Œé‡å­è·³èºã€ï¼Œå¸¶ä¾†äº†æ›´å…·æœªä¾†æ„Ÿå’Œä¿çš®æ°£æ¯çš„å…¨æ–°è­˜åˆ¥ï¼æ„Ÿè¦ºæª”æ¡ˆç¬é–“ç©¿è¶Šåˆ°äº†ä¸‹ä¸€å€‹æ¬¡å…ƒï¼ğŸš€</li>
                </ul>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li><strong>æª”æ¡ˆè¼‰å…¥å¥‡è¹Ÿå¾©ç”¦ï¼</strong> å¾¹åº•è§£æ±ºäº† \`Cannot set properties of null (setting 'innerHTML')\` é€™å€‹åš‡äººçš„éŒ¯èª¤ï¼Œç¾åœ¨æª”æ¡ˆåˆ—è¡¨èƒ½å¤ ç©©å®šè¼‰å…¥ï¼Œæ•¸æ“šä¸å†ç¥éš±ï¼</li>
                    <li><strong>DOM å…ƒç´  ID å°é½Šï¼</strong> ç¢ºä¿äº† JavaScript ä¸­å° \`profile-pic\` å’Œ \`all-records-container\` ç­‰æ ¸å¿ƒ UI å…ƒç´ çš„å¼•ç”¨èˆ‡ HTML ä¸­çš„ ID ç²¾æº–åŒ¹é…ï¼Œå¾æ­¤ä¸å†ã€Œæ‰¾éŒ¯äººã€ï¼</li>
                </ul>
                <p><strong>ä¼˜åŒ– (Optimized!):</strong></p>
                <ul>
                    <li><strong>ç„¡ç¸« UI é«”é©—ï¼</strong> æ‰€æœ‰çš„åƒç´ é¢¨æ ¼ UIã€å‹•æ…‹ä¸»é¡Œå’Œå¯æ„›çš„ã€Œäº‚è·‘çš„å…”å­ã€å‹•ç•«éƒ½å®Œæ•´ä¿ç•™ä¸‹ä¾†ï¼Œè®“ä½ åœ¨ä¿®å¾©éŒ¯èª¤çš„åŒæ™‚ï¼Œä¹Ÿèƒ½äº«å—è¦–è¦ºç››å®´ï¼</li>
                </ul>

                <h4>âœ¨ v2.0.0 - ç¨³å®šåŒæ­¥å…” V1.0 (Stable Sync Rabbit V1.0)</h4>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li><strong>æª”æ¡ˆè¼‰å…¥å¥‡è¹Ÿå¾©ç”¦ï¼</strong> å¾¹åº•è§£æ±ºäº† \`Cannot set properties of null (setting 'innerHTML')\` é€™å€‹åš‡äººçš„éŒ¯èª¤ï¼Œç¾åœ¨æª”æ¡ˆåˆ—è¡¨èƒ½å¤ ç©©å®šè¼‰å…¥ï¼Œæ•¸æ“šä¸å†ç¥éš±ï¼</li>
                    <li><strong>DOM å…ƒç´  ID å°é½Šï¼</strong> ç¢ºä¿äº† JavaScript ä¸­å° \`profile-pic\` å’Œ \`all-records-container\` ç­‰æ ¸å¿ƒ UI å…ƒç´ çš„å¼•ç”¨èˆ‡ HTML ä¸­çš„ ID ç²¾æº–åŒ¹é…ï¼Œå¾æ­¤ä¸å†ã€Œæ‰¾éŒ¯äººã€ï¼</li>
                </ul>
                <p><strong>ä¼˜åŒ– (Optimized!):</strong></p>
                <ul>
                    <li><strong>ç„¡ç¸« UI é«”é©—ï¼</strong> æ‰€æœ‰çš„åƒç´ é¢¨æ ¼ UIã€å‹•æ…‹ä¸»é¡Œå’Œå¯æ„›çš„ã€Œäº‚è·‘çš„å…”å­ã€å‹•ç•«éƒ½å®Œæ•´ä¿ç•™ä¸‹ä¾†ï¼Œè®“ä½ åœ¨ä¿®å¾©éŒ¯èª¤çš„åŒæ™‚ï¼Œä¹Ÿèƒ½äº«å—è¦–è¦ºç››å®´ï¼</li>
                </ul>

                <h4>âœ¨ v2.0.0 - å²è¯—çº§åƒç´ é£å›å½’å…” (Pixel-Style Reversion Rabbit)</h4>
                <p><strong>æ–°å¢ (New!):</strong></p>
                <ul>
                    <li>**èˆŠæ™‚ä»£éˆé­‚å¬å–šï¼** å®Œæ•´å¬å–šäº† \`v1.3.11\` çš„åƒç´ é¢¨ UIã€å‹•æ„Ÿä¸»é¡Œèˆ‡æˆ‘å€‘æœ€æ„›çš„ã€Œäº‚è·‘çš„å…”å­ã€å‹•ç•«ï¼æ˜¯ä¸æ˜¯æ„Ÿè¦ºåƒç©¿è¶Šå›äº†é­‚æ–—ç¾…æ™‚ä»£ï¼Ÿâœ¨</li>
                </ul>
                <p><strong>ä¼˜åŒ– (Optimized!):</strong></p>
                <ul>
                    <li>**åœ–è¡¨é­”æ³•ç©©å®šå’’ï¼** å³ä½¿æª”æ¡ˆä»‹é¢å¤§è®Šæ¨£ï¼ŒChart.js çš„æ—¥æœŸé­”æ³•ï¼ˆæ™‚é–“è»¸ã€æ•¸æ“šé»é¡¯ç¤ºï¼‰ä¾ç„¶ç©©å®šå¦‚å±±ï¼Œæ¯”ä½ ä¸Šç¶²èª²çš„ Wi-Fi é‚„ç©©ï¼</li>
                </ul>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li>**æ™‚ç©ºéŒ¯äº‚ä¿®æ­£ï¼** ç¡®ä¿äº† \`date-fns\` å’Œ \`chartjs-adapter-date-fns\` çš„åŠ è½½é€»è¾‘é“æ¿é’‰é’‰ï¼Œå›¾è¡¨æ—¶é—´çº¿ä¸å†â€œè·‘åâ€ï¼Œä½ å†ä¹Ÿåˆ«æƒ³æ€ªæˆ‘ä»¬â€œå†…å­˜æ³„éœ²â€å•¦ï¼</li>
                    <li>**å°å…”å…”å›æ­¸ï¼** è®“äº‚è·‘çš„åƒç´ å…”é‡æ–°æ´»èºèµ·ä¾†ï¼Œå› ç‚ºâ€¦æ²’æœ‰å…”å­è·‘è·‘çš„æª”æ¡ˆï¼Œé‚£é‚„å«å…”å¯å¯æª”æ¡ˆå—ï¼Ÿï¼á••( á› )á•—</li>
                </ul>

                <h4>ğŸŒŸ v2.0.0 - åƒç´ åŒæ­¥å…” V2.0 (Pixel Sync Rabbit V2.0)</h4>
                <p><strong>ä¼˜åŒ– (Optimized!):</strong></p>
                <ul>
                    <li>**UI è¶…è¼‰é€²åŒ–ï¼** å°‡æœ€æ–°çš„åƒç´ é¢¨ä»‹é¢å’Œä¸»é¡Œåˆ‡æ›æŒ‰éˆ•å®Œç¾æ•´åˆï¼Œç¾åœ¨æ›è†šå°±åƒæ›éŠæˆ²è§’è‰²ä¸€æ¨£ç°¡å–®ï¼Œæ ¹æœ¬åœä¸ä¸‹ä¾†ï¼</li>
                    <li>**æ™‚é–“è»¸æ‰­æ›²ä¿®æ­£ï¼** ç©©å›ºäº† Chart.js åœ–è¡¨çš„æ—¥æœŸæ™‚é–“è»¸åŠŸèƒ½ï¼Œè®“ä½ çš„é«”é‡è¨˜éŒ„ä¸å†æ˜¯è–›ä¸æ ¼çš„è²“ï¼Œæ¯æ¬¡æ‰“é–‹éƒ½æ¸…æ¸…æ¥šæ¥šï¼</li>
                </ul>
                <p><strong>åˆ é™¤ (Deleted!):</strong></p>
                <ul>
                    <li>**å†—é¤˜é­”æ³•ç¬¦æ–‡ç§»é™¤ï¼** æ¸…ç†äº†å¤šé¤˜çš„ UI å…ƒç´ å’ŒæŒ‰éˆ•ï¼Œç•¢ç«Ÿæˆ‘å€‘æ˜¯æ¥µç°¡ä¸»ç¾©è€…ï¼ˆæ‰ä¸æ˜¯å› ç‚ºå·æ‡¶å‘¢ï¼ï¼‰ã€‚äº‚è·‘çš„å…”å­ä¹Ÿæš«æ™‚æ”¾å‡äº†ï¼Œå› ç‚ºè¦çµ¦æ–° UI é¨°åœ°æ–¹å˜›ï¼</li>
                </ul>

                <h4>ğŸš€ v2.0.0 - åƒç´ åŒæ­¥å…” V1.0 (Pixel Sync Rabbit V1.0)</h4>
                <p><strong>æ–°å¢ (New!):</strong></p>
                <ul>
                    <li>**æ—¥æœŸé­”æ³•é©é…ï¼** é¦–æ¬¡å¼•å…¥ \`date-fns\` èˆ‡ \`chartjs-adapter-date-fns\` è¯åˆæ–½æ³•ï¼Œè®“ Chart.js çš„æ™‚é–“è»¸èƒ½å¤ æ­£ç¢ºè§£è®€æ—¥æœŸï¼Œå‘Šåˆ¥â€œæœªå®šç¾©å±¬æ€§â€çš„å´©æ½°ï¼</li>
                </ul>
                <p><strong>ä¼˜åŒ– (Optimized!):</strong></p>
                <ul>
                    <li>**åœ–è¡¨æ™‚é–“è»¸æ ¡æº–ï¼** å°‡ Chart.js çš„ X è»¸é¡å‹è¨­å®šç‚º \`time\`ï¼Œç¢ºä¿æ—¥æœŸé¡¯ç¤ºç²¾æº–ï¼Œå†ä¹Ÿä¸æœƒéŒ¯éå…”å¯å¯çš„ä»»ä½•ä¸€å€‹â€œæ¼²èƒ–â€ç¬é–“ï¼ˆèª¤ï¼‰ï¼</li>
                </ul>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li>**ä¾è³´åœ°ç„æ•‘è´–ï¼** èª¿æ•´äº†å‡½å¼åº«è¼‰å…¥é †åºï¼Œç¢ºä¿æ‰€æœ‰é­”æ³•çµ„ä»¶éƒ½èƒ½æŒ‰æ™‚åˆ°ä½ï¼Œé¿å…äº†â€œæ‰¾ä¸åˆ°å‡½æ•¸â€çš„å°·å°¬å ´é¢ï¼Œå°±åƒåœ¨èªªï¼šã€Œæˆ‘æº–å‚™å¥½äº†ï¼Œä½ å‘¢ï¼Ÿã€</li>
                </ul>

                <h4>ğŸ›¡ï¸ v1.3.11 - å…¼å®¹æ€§ç¨³å®šå…” V1.0 (Compatibility Stability Rabbit V1.0)</h4>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li><strong>ç¥ç§˜éŒ¯èª¤çµ‚çµè€…ï¼</strong> è§£æ±ºäº† \`Chart.js\` æ—¥æœŸé©é…å™¨æ‰¾ä¸åˆ° \`date-fns\` çš„ \`startOfDay\` å‡½æ•¸çš„è¬åœ˜ã€‚ç¾åœ¨å®ƒä¹–ä¹–åœ°å¾ \`unpkg.com\` è¼‰å…¥æ­£ç¢ºçš„é­”æ³•ï¼Œä¸æœƒå†é¬§è„¾æ°£äº†ï¼</li>
                </ul>
                <p><strong>ä¼˜åŒ– (Optimized!):</strong></p>
                <ul>
                    <li><strong>è¨ºæ–·é­”æ³•å‡ç´šï¼</strong> å¢åŠ äº†æ›´å¤šè¼‰å…¥å¾Œçš„è¨ºæ–·æ—¥èªŒï¼Œæ–¹ä¾¿æˆ‘å€‘åƒåµæ¢ä¸€æ¨£è¿½è¹¤é­”æ³•å…ƒç´ çš„åˆ°ä½æƒ…æ³ã€‚</li>
                </ul>

                <h4>âª v1.3.10 - é€‚é…å¼ºåŒ–å…” V2.2 (Adapter Enhancement Rabbit V2.2)</h4>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li><strong>æ™‚å…‰å€’æµè¡“ï¼</strong> å°‡ \`date-fns\` åº«ç‰ˆæœ¬å›é€€åˆ° \`2.25.0\`ã€‚æ˜¯çš„ï¼Œæˆ‘å€‘æ‰¿èªæœ‰æ™‚å€™èˆŠçš„æ‰æ˜¯æœ€å¥½çš„ï¼Œå°±åƒä½ çš„è€é›»ç©ä¸»æ©Ÿä¸€æ¨£ï¼é€™è§£æ±ºäº† \`startOfDay\` éŒ¯èª¤ï¼Œç¢ºä¿äº†å…¼å®¹æ€§ã€‚</li>
                </ul>

                <h4>âš¡ v1.3.9 - é€‚é…å¼ºåŒ–å…” V2.1 (Adapter Enhancement Rabbit V2.1)</h4>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li><strong>å‰ç½®æ–½æ³•ï¼</strong> å°‡ \`date-fns\` é©é…å™¨è¨»å†Šä»£ç¢¼æå‰äº†ã€‚ç¾åœ¨ï¼ŒChart.js åœ¨å®ƒéœ€è¦ä¹‹å‰å°±èƒ½æ‰¾åˆ°æ‰€æœ‰å¿…è¦çš„æ—¥æœŸé­”æ³•ï¼Œå®Œç¾è§£æ±ºäº†åŠ è¼‰å•é¡Œã€‚</li>
                </ul>

                <h4>ğŸ”„ v1.3.8 - é€‚é…å¼ºåŒ–å…” V2.0 (Adapter Enhancement Rabbit V2.0)</h4>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li><strong>æ˜ç¢ºæŒ‡ç¤ºï¼</strong> é¡¯å¼åœ°å°‡ \`date-fns\` è¨»å†Šç‚º Chart.js çš„æ—¥æœŸé©é…å™¨ã€‚é€™æ¬¡ï¼ŒChart.js çµ•å°ä¸æœƒå†è£å‚»èªªå®ƒä¸èªè­˜ \`date-fns\` äº†ï¼</li>
                </ul>

                <h4>ğŸ”— v1.3.7 - è„šæœ¬åŒæ­¥å…” (Script Sync Rabbit)</h4>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li><strong>é­”æ³•åºæ›²èª¿åº¦ï¼</strong> ä»”ç´°èª¿æ•´äº† \`Chart.js\`ã€\`date-fns\` å’Œ \`chartjs-adapter-date-fns\` çš„è¼‰å…¥é †åºã€‚å°±åƒç®¡å¼¦æ¨‚éšŠä¸€æ¨£ï¼Œæ¯å€‹æ¨‚å™¨éƒ½å¿…é ˆåœ¨æ­£ç¢ºçš„æ™‚é–“åŠ å…¥ï¼Œæ‰èƒ½å¥å‡ºå®Œç¾çš„æ¨‚ç« ï¼</li>
                </ul>

                <h4>ğŸ—ºï¸ v1.3.6 - è·¯å¾„æ ¡å‡†å…” (Path Calibration Rabbit)</h4>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li><strong>è¿·è·¯æª”æ¡ˆæ‰¾å›å®¶ï¼</strong> ä¿®æ­£äº† \`PetRecords.json\` æª”æ¡ˆçš„è¼‰å…¥è·¯å¾‘ã€‚ç¾åœ¨å®ƒæœƒæº–ç¢ºåœ°åœ¨ \`dist/bunnycc/PetRecords.json\` æ‰¾åˆ°å®¶äº†ï¼Œä¸å†æµæµªè¡—é ­ã€‚</li>
                </ul>

                <h4>âœ¨ v1.3.5 - é€‚é…å¼ºåŒ–å…” (Adaptation Enhanced Rabbit)</h4>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li><strong>åœ–è¡¨æ•¸æ“šåˆ†æ‰¹ä¸Šèœï¼</strong> å°‡ Chart.js åœ–è¡¨çš„åˆå§‹åŒ–å’Œæ•¸æ“šå¡«å……åˆ†ç‚ºå…©æ­¥ï¼Œå°±åƒå…ˆæº–å‚™å¥½é¤å…·å†ä¸Šèœä¸€æ¨£ï¼Œè®“æ•´å€‹éç¨‹æ›´æµæš¢ã€æ›´å¥å£¯ã€‚</li>
                    <li>**æ—¥æœŸé¡¯ç¤ºç¾å®¹ï¼** åœ–è¡¨å’Œè¨˜éŒ„åˆ—è¡¨çš„æ—¥æœŸç¾åœ¨åªé¡¯ç¤ºã€Œå¹´-æœˆ-æ—¥ã€ï¼Œç°¡æ½”æ˜äº†ï¼Œå°±åƒåªç•™ä¸‹ä½ æœ€ç˜¦çš„ç…§ç‰‡ä¸€æ¨£ï¼</li>
                    <li>**æª”æ¡ˆå‚³è¼¸å›æ­¸ï¼** é‡æ–°ä½¿ç”¨ \`fetch\` ä¾†è¼‰å…¥ \`PetRecords.json\` æª”æ¡ˆä¸¦å„ªåŒ–äº†éŒ¯èª¤è™•ç†ï¼Œç¾åœ¨å‚³è¼¸æ•¸æ“šå°±åƒæ­ä¹˜é«˜é€Ÿåˆ—è»Šï¼Œå®‰å…¨åˆå¿«é€Ÿï¼</li>
                    <li>**å±éšªé€£çµè­¦å ±è§£é™¤ï¼** ç§»é™¤äº†å¯èƒ½å¼•èµ·æ··åˆå…§å®¹è­¦å‘Šçš„å¤–éƒ¨å±éšªé€£çµã€‚å®‰å…¨ç¬¬ä¸€ï¼Œç•¢ç«Ÿæˆ‘å€‘ä¸æƒ³å¼•ä¾†ä»€éº¼ä¸é€Ÿä¹‹å®¢ï¼</li>
                </ul>
                <p><strong>ä¼˜åŒ– (Optimized!):</strong></p>
                <ul>
                    <li>**Tailwind è²¼å¿ƒæç¤ºï¼** å¢åŠ äº†é—œæ–¼ Tailwind CSS CDN ä½¿ç”¨çš„è¨»é‡‹ï¼Œæé†’ä½ åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­çš„æ³¨æ„äº‹é …ã€‚</li>
                </ul>

                <h4>ğŸ“ v1.3.4 - æ•°æ®ä¿®æ­£å…” (Data Correction Rabbit)</h4>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li>**æ™‚é–“æˆ³ç²¾æº–çŸ¯æ­£ï¼** ç¢ºä¿æ™‚é–“æˆ³åœ¨è½‰æ›ç‚º \`Date\` ç‰©ä»¶ä¹‹å‰ï¼Œæœƒå…ˆå»é™¤å°æ•¸é»ä¸¦è½‰æ›ç‚ºæ•´æ•¸æ¯«ç§’ï¼Œå¾æ­¤æ™‚é–“ä¸å†æ¨¡æ£±å…©å¯ï¼</li>
                </ul>
                <p><strong>ä¼˜åŒ– (Optimized!):</strong></p>
                <ul>
                    <li><strong>åµæ¢æ—¥èªŒè©³æƒ…å¢åŠ ï¼** å¢åŠ äº†æ›´å¤šçš„æ§åˆ¶å°æ—¥èªŒï¼Œæ–¹ä¾¿åœ¨æ—¥æœŸè½‰æ›å’Œ Chart.js åˆå§‹åŒ–éç¨‹ä¸­é€²è¡Œã€Œæ¡ˆæƒ…åˆ†æã€ã€‚</li>
                </ul>

                <h4>ğŸª v1.3.3 - æ•°æ®æ—¶ç©ºç¨³å®šå…” (Data Spacetime Stabilizer Rabbit)</h4>
                <p><strong>ä¿®å¤ (Fixed!):</strong></p>
                <ul>
                    <li>**æ•¸æ“šæ°¸æ†é‘²åµŒï¼** ç‚ºç¢ºä¿ JSON æ•¸æ“šå¯é è¼‰å…¥ï¼Œå°‡ \`PetRecords.json\` çš„å…§å®¹ç›´æ¥åµŒå…¥åˆ° HTML è…³æœ¬çš„ JavaScript è®Šæ•¸ä¸­ã€‚ç¾åœ¨æ•¸æ“šå°±åƒè¢«å°å°åœ¨æ°´æ™¶çƒè£¡ï¼Œç©©å›ºä¸ç ´ï¼</li>
                </ul>
                <p><strong>ä¼˜åŒ– (Optimized!):</strong></p>
                <ul>
                    <li>**æ›´å¤šåµéŒ¯è¶³è·¡ï¼** å¢åŠ äº†æ›´å¤šçš„æ§åˆ¶å°æ—¥èªŒï¼Œè®“è¿½è¹¤æ•¸æ“šè½‰æ›å’Œ Chart.js åˆå§‹åŒ–éç¨‹ä¸­çš„å•é¡Œè®Šå¾—æ›´åŠ æ¸…æ™°ã€‚</li>
                </ul>
            `;
            if (ui.changelogList) { // Ensure ui.changelogList is set before trying to access it
                ui.changelogList.innerHTML = changelogContent;
            } else {
                console.error("Changelog list element is still not available after populateChangelog call.");
            }
        }
    </script>
</body>
</html>
