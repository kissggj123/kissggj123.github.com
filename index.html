<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ° Bunny CC Archive v8.0.2 - ğŸŒŸ Grand Revival Rabbit</title>
    <!-- Tailwind CSS CDN - æ³¨æ„ï¼šç”¨æ–¼ç”Ÿç”¢ç’°å¢ƒæ™‚ï¼Œè«‹ä½œç‚º PostCSS æ’ä»¶å®‰è£æˆ–ä½¿ç”¨ Tailwind CLI -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Press Start 2P ç”¨æ–¼åƒç´ åŒ–æ¨™é¡Œ, Noto Sans SC ç”¨æ–¼ä¸»è¦å…§å®¹ -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* CSS è®Šæ•¸ç”¨æ–¼ TRON ä¸»é¡Œ (é¡è‰²é€é JS å‹•æ…‹è¨­ç½®) */
        :root {
            --glow-rgb: 34, 211, 238; /* é’è‰² - é è¨­ */
            --glow-light-rgb: 103, 232, 249; /* æ·ºé’è‰² - é è¨­ */
            --bg-color: #010409; /* æ·±è—è‰² - é è¨­åŸºç¤èƒŒæ™¯ */
            /* é¢æ¿è¡¨é¢é¡è‰²ç¾åœ¨å‹•æ…‹ä½¿ç”¨ glow-rgb ä¸¦å¸¶æœ‰é€æ˜åº¦ */
            --surface-color: rgba(var(--glow-rgb), 0.08); /* é¢æ¿çš„å¾®å¦™ç™¼å…‰è‰²èª¿ */
            --grid-color: rgba(var(--glow-rgb), 0.15); /* ç¶²æ ¼ç·šé¡è‰²åŸºæ–¼ç™¼å…‰è‰² */
            --text-color: #e6edf3; /* æ·ºç°ç™½è‰²æ–‡å­— */
            --text-muted-color: #8b949e; /* æŸ”å’Œç°è‰²æ–‡å­— */

            /* æ–°å¢: èƒŒæ™¯å¾‘å‘æ¼¸è®Šé¡è‰² (é€é JS å‹•æ…‹è¨­ç½®) */
            --bg-radial-start: rgba(var(--glow-rgb), 0.08); /* ä¸­å¿ƒå¾®å¼±ç™¼å…‰ */
            --bg-radial-end: rgba(1, 4, 9, 0.9); /* èå…¥æ·±è‰²èƒŒæ™¯ */
            --grad-pos-x: 20%; /* é€é CSS é—œéµå¹€å‹•ç•« */
            --grad-pos-y: 20%; /* é€é CSS é—œéµå¹€å‹•ç•« */
        }

        /* æ—¥é–“æ¨¡å¼ç‰¹å®šè¦†è“‹ (é€é JS æ¿€æ´») */
        body.day-mode {
            --bg-color: #f0f8ff; /* æ·ºè—è‰²ä½œç‚ºè¼ƒæ·ºçš„åŸºç¤è‰² */
            --text-color: #333333; /* è¼ƒæ·±çš„æ–‡å­—ç”¨æ–¼å°æ¯” */
            --text-muted-color: #666666; /* æ—¥é–“æ¨¡å¼çš„æŸ”å’Œç°è‰² */
            --surface-color: rgba(var(--glow-rgb), 0.15); /* é¢æ¿çš„è¼ƒæ·ºç™¼å…‰è‰²èª¿ */

            /* æ—¥é–“æ¨¡å¼å¾‘å‘æ¼¸è®Šèª¿æ•´ */
            --bg-radial-start: rgba(var(--glow-rgb), 0.15); /* è¼ƒå¼·çš„ç™¼å…‰èµ·å§‹ */
            --bg-radial-end: rgba(240, 248, 255, 0.9); /* èå…¥æ·ºè‰²èƒŒæ™¯ */
        }

        /* åŸºæœ¬æ¨£å¼ */
        body {
            font-family: 'Noto Sans SC', sans-serif; /* ä¸»è¦å…§å®¹ä½¿ç”¨ Noto Sans SC å­—é«” */
            background-color: var(--bg-color); /* åŸºç¤èƒŒæ™¯è‰² */
            color: var(--text-color);
            transition: background-color 0.5s ease, color 0.5s ease; /* ä¸»é¡Œåˆ‡æ›å¹³æ»‘éæ¸¡ */
            overflow-x: hidden; /* é˜²æ­¢æ°´å¹³æ»¾å‹•æ¢ */
            overflow-y: auto; /* å…è¨±å…§å®¹å‚ç›´æ»¾å‹• */
            opacity: 0;
            animation: fadeIn 1s ease 0.5s forwards;
            position: relative; /* ç”¨æ–¼ç–ŠåŠ å±¤çš„ z-index ä¸Šä¸‹æ–‡ */
        }
        
        .font-pixel { font-family: 'Press Start 2P', cursive; } /* åƒ…å°ç‰¹å®šå…ƒç´ æ‡‰ç”¨åƒç´ å­—é«” */
        .glow-text { color: rgb(var(--glow-light-rgb)); text-shadow: 0 0 8px rgba(var(--glow-rgb), 0.8); }
        .glow-border { 
            border: 1px solid rgba(var(--glow-rgb), 0.4); 
            box-shadow: 0 0 12px rgba(var(--glow-rgb), 0.2), inset 0 0 8px rgba(var(--glow-rgb), 0.15); 
            transition: border-color 0.5s ease, box-shadow 0.5s ease; /* å¹³æ»‘éæ¸¡ */
        }
        
        /* å‹•ç•«ç¶²æ ¼å’Œå¾‘å‘æ¼¸è®ŠèƒŒæ™¯ */
        #grid-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2; /* ä½æ–¼æ‰€æœ‰å…§å®¹ä¹‹ä¸‹ */
            background-image:
                /* å¾‘å‘æ¼¸è®Šç”¨æ–¼å…‰å½±æ•ˆæœ - ç¬¬ä¸€å±¤ */
                radial-gradient(circle at var(--grad-pos-x) var(--grad-pos-y), 
                                var(--bg-radial-start) 0%, 
                                var(--bg-radial-end) 60%),
                /* ç¾æœ‰ç¶²æ ¼ç·š - ç¬¬äºŒå±¤ */
                linear-gradient(rgba(var(--glow-rgb), 0.15) 1px, transparent 1px),
                linear-gradient(90deg, rgba(var(--glow-rgb), 0.15) 1px, transparent 1px);
            background-size: cover, 50px 50px, 50px 50px; /* å¾‘å‘è¦†è“‹ï¼Œç¶²æ ¼ 50px */
            background-repeat: no-repeat, repeat, repeat; /* å¾‘å‘ä¸é‡è¤‡ï¼Œç¶²æ ¼é‡è¤‡ */
            /* å¾‘å‘æ¼¸è®Šç§»å‹•è·¯å¾‘æ›´æ–°ç‚ºæ›´éš¨æ©Ÿå’Œæµæš¢ */
            animation: pan-grid 20s linear infinite, radial-move 60s cubic-bezier(0.4, 0, 0.2, 1) infinite alternate;
            transition: background-image 0.5s ease; /* ä¸»é¡Œé¡è‰²åˆ‡æ›çš„å¹³æ»‘éæ¸¡ */
        }

        /* æƒæç·šç–ŠåŠ  */
        #scanline-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100; /* ä½æ–¼å¤§å¤šæ•¸å…§å®¹ä¹‹ä¸Šï¼Œæ¨¡æ…‹æ¡†ä¹‹ä¸‹ */
            pointer-events: none; /* å…è¨±é»æ“Šç©¿é€ */
            background: linear-gradient(to bottom, rgba(18, 18, 18, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(to bottom, rgba(255, 255, 255, 0.08), rgba(0, 0, 0, 0.08));
            background-size: 100% 4px, 100% 1px;
            animation: scanline-move 10s linear infinite;
        }

        /* æ´¾å…‹æ›¼é ­åƒå®¹å™¨ - å¢å¼·å‹•æ…‹æ•ˆæœ */
        .pacman-container {
            position: relative;
            width: 160px; height: 160px;
            border-radius: 50%; 
            overflow: hidden; 
            transition: box-shadow 0.3s ease; /* å¹³æ»‘ç™¼å…‰éæ¸¡ */
        }
        .pacman-container .profile-image-wrapper {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            overflow: hidden; 
            position: relative; 
            transition: clip-path 0.4s ease-in-out; /* å¹³æ»‘å˜´å·´å‹•ç•« */
            /* åˆå§‹ç‹€æ…‹: å®Œæ•´åœ“å½¢ */
            clip-path: circle(50% at 50% 50%);
        }

        .pacman-container:hover .profile-image-wrapper {
            /* æ‡¸åœæ™‚ï¼Œå‰µå»ºæ´¾å…‹æ›¼å˜´å·´æ•ˆæœ */
            clip-path: polygon(0% 0%, 100% 0%, 100% 40%, 50% 50%, 100% 60%, 100% 100%, 0% 100%);
        }
        
        /* æ‡¸åœæ™‚æ·»åŠ å‹•æ…‹ç™¼å…‰æ•ˆæœ */
        .pacman-container:hover {
            box-shadow: 0 0 30px rgba(var(--glow-rgb), 0.9), inset 0 0 20px rgba(var(--glow-rgb), 0.6); /* æ‡¸åœæ™‚å¼·çƒˆç™¼å…‰ */
        }


        /* ä¸»å®¹å™¨å’Œ UI å…ƒç´  */
        .main-container {
            background-color: var(--surface-color); /* ç¾åœ¨ä½¿ç”¨å‹•æ…‹è¡¨é¢è‰² */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            min-height: 80vh; 
            min-width: 320px; /* ç¢ºä¿å°è¢å¹•çš„æœ€å°å¯¬åº¦ */
            position: relative; /* ç”¨æ–¼æ¨¡å¡Šçš„ z-index ä¸Šä¸‹æ–‡ */
            transition: background-color 0.5s ease; /* ä¸»é¡Œåˆ‡æ›å¹³æ»‘éæ¸¡ */
            border-radius: 1rem; /* æ›´åœ“æ½¤çš„ç¾ä»£ç§‘æŠ€æ„Ÿ */
        }
        .ui-module { 
            transition: all 0.5s; 
            opacity: 0; 
            transform: translateY(20px); 
            animation: module-boot 0.5s ease forwards; 
            min-height: 150px; 
            background-color: rgba(var(--glow-rgb), 0.05); /* åŸºæ–¼ä¸»é¡Œçš„å¾®å¦™æ¨¡å¡ŠèƒŒæ™¯ */
            border-left: 3px solid rgba(var(--glow-rgb), 0.5); /* å·¦å´é‚Šæ¡†ä¹ŸåŸºæ–¼ä¸»é¡Œ */
            transition: background-color 0.5s ease, border-left-color 0.5s ease; /* å¹³æ»‘éæ¸¡ */
            border-radius: 0.75rem; /* æ¨¡å¡Šä¸€è‡´çš„åœ“è§’ */
            box-shadow: 0 4px 15px rgba(var(--glow-rgb), 0.1); /* æ›´æ˜é¡¯çš„å¾®å¦™é™°å½± */
        }
        .list-pellet li::before {
            content: 'â€¢';
            color: rgb(var(--glow-light-rgb));
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
            animation: pellet-glow 1.5s infinite alternate;
        }

        /* æ¨¡æ…‹æ¡† */
        .modal-overlay { background-color: rgba(0,0,0,0.7); backdrop-filter: blur(4px); z-index: 1000; } /* ç¢ºä¿æ¨¡æ…‹æ¡†ä½æ–¼é ‚éƒ¨ */
        .modal-content-base {
            background-color: var(--surface-color); /* æ¨¡æ…‹æ¡†ä¹Ÿä½¿ç”¨å‹•æ…‹è¡¨é¢è‰² */
            transition: background-color 0.5s ease; /* å¹³æ»‘éæ¸¡ */
            border-radius: 1rem; /* æ¨¡æ…‹æ¡†ä¸€è‡´çš„åœ“è§’ */
        }


        /* å‹•ç•« */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes pan-grid { from { background-position: 0 0; } to { background-position: -50px -50px; } }
        @keyframes scanline-move { from { background-position: 0 0; } to { background-position: 0 100%; } }
        @keyframes pellet-glow { from { text-shadow: 0 0 2px; } to { text-shadow: 0 0 10px rgba(var(--glow-light-rgb), 1); } }
        @keyframes module-boot { to { opacity: 1; transform: translateY(0); } }
        /* æ–°å¢: å¾‘å‘æ¼¸è®Šç§»å‹•å‹•ç•« - æ›´è¤‡é›œçš„è·¯å¾‘ä»¥å¯¦ç¾éš¨æ©Ÿæ€§ */
        @keyframes radial-move {
            0% { --grad-pos-x: 10%; --grad-pos-y: 10%; }
            16% { --grad-pos-x: 90%; --grad-pos-y: 20%; }
            32% { --grad-pos-x: 30%; --grad-pos-y: 90%; }
            48% { --grad-pos-x: 70%; --grad-pos-y: 40%; }
            64% { --grad-pos-x: 20%; --grad-pos-y: 80%; }
            80% { --grad-pos-x: 50%; --grad-pos-y: 15%; }
            100% { --grad-pos-x: 10%; --grad-pos-y: 10%; }
        }

        /* è‡ªå®šç¾©æ»¾å‹•æ¢ */
        .record-scrollbar::-webkit-scrollbar { width: 8px; }
        .record-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .record-scrollbar::-webkit-scrollbar-thumb { background: rgba(var(--glow-rgb), 0.5); border-radius: 4px; }
        .record-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(var(--glow-rgb), 0.8); }

        /* å…”å­æ¨£å¼ */
        #wandering-rabbit {
            position: fixed;
            width: 72px; 
            height: 72px; 
            z-index: 90; 
            pointer-events: none;
            fill: rgb(var(--glow-light-rgb)); 
            filter: drop-shadow(0 0 15px rgba(var(--glow-rgb), 0.8));
        }
        .rabbit-dropping {
            position: absolute;
            width: 6px; 
            height: 6px;
            background-color: #4a2c2a; 
            border-radius: 1px; 
            transform: scale(1);
            opacity: 1;
            transition: transform 2s ease-out, opacity 2s ease-out; 
            z-index: 89; 
            pointer-events: none; 
            box-shadow: 0 0 2px rgba(0,0,0,0.5); 
        }
        .rabbit-dropping.fade-out {
            transform: scale(0.2);
            opacity: 0;
        }

        /* ç¢ºä¿ä¸»å®¹å™¨å±…ä¸­ä¸¦ä½”ç”¨é©ç•¶å¯¬åº¦ */
        .flex.items-center.justify-center.min-h-screen.p-4 {
            align-items: flex-start; /* é ‚éƒ¨å°é½Šä»¥æ›´å¥½åœ°åˆ©ç”¨å‚ç›´ç©ºé–“ */
            padding-top: 2rem; /* æ·»åŠ ä¸€äº›é ‚éƒ¨å…§é‚Šè· */
            padding-bottom: 2rem; /* æ·»åŠ ä¸€äº›åº•éƒ¨å…§é‚Šè· */
        }
        /* ä¸»å…§å®¹çš„ flex æ“´å±•ä»¥å¡«å……å¯ç”¨ç©ºé–“ */
        .lg\\:col-span-1.p-6.flex.flex-col.space-y-8, .lg\\:col-span-2.p-6.space-y-6 {
            flex-grow: 1;
        }

        /* æ›´æ–°æ—¥èªŒæ¢ç›®æ¨£å¼ */
        .changelog-entry {
            padding: 1rem; /* p-4 */
            border-radius: 0.5rem; /* rounded-lg */
            margin-bottom: 1rem; /* mb-4 */
            background-color: rgba(var(--glow-rgb), 0.1); /* bg-gray-800 ç­‰æ•ˆï¼Œä½†å‹•æ…‹ */
            border: 1px solid rgba(var(--glow-rgb), 0.4); /* border-gray-700 ç­‰æ•ˆï¼Œä½†å‹•æ…‹ */
            box-shadow: 0 2px 8px rgba(var(--glow-rgb), 0.1); /* å¾®å¦™é™°å½± */
            transition: all 0.3s ease; /* ä¸»é¡Œåˆ‡æ›å¹³æ»‘éæ¸¡ */
        }

        .changelog-entry ul {
            list-style: none; /* ç§»é™¤é è¨­é …ç›®ç¬¦è™Ÿ */
            padding-left: 1.5em; /* ç‚ºè‡ªå®šç¾©é …ç›®ç¬¦è™Ÿç¸®é€² */
        }

        .changelog-entry li::before {
            content: 'â˜… '; /* æ›´æ–°æ—¥èªŒçš„è‡ªå®šç¾©æ˜Ÿè™Ÿé …ç›®ç¬¦è™Ÿ */
            color: rgb(var(--glow-light-rgb)); /* ä½¿ç”¨ç™¼å…‰è‰² */
            font-weight: bold;
            display: inline-block;
            width: 1.5em; /* æ˜Ÿè™Ÿçš„ç©ºé–“ */
            margin-left: -1.5em;
        }
        /* å¾å…¨å±€æ›´æ–°æ—¥èªŒåˆ—è¡¨ä¸­ç§»é™¤å½ˆä¸¸æ¨£å¼ï¼ˆå¦‚æœå·²å…¨å±€æ‡‰ç”¨ï¼‰ */
        #changelog-list.list-pellet li::before {
            content: none; /* è¦†è“‹ä»¥åœ¨æ­¤è™•ç§»é™¤å…¨å±€å½ˆä¸¸ */
        }

    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div id="grid-background"></div>
    <!-- éŠèµ°å…”è§’è‰² -->
    <div id="wandering-rabbit">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8" fill="currentColor">
            <rect x="1" y="0" width="1" height="1"/><rect x="3" y="0" width="1" height="1"/>
            <rect x="0" y="1" width="1" height="1"/><rect x="4" y="1" width="1" height="1"/>
            <rect x="0" y="2" width="1" height="1"/><rect x="6" y="2" width="1" height="1"/>
            <rect x="0" y="3" width="1" height="1"/><rect x="6" y="3" width="1" height="1"/>
            <rect x="0" y="4" width="1" height="1"/><rect x="6" y="4" width="1" height="1"/>
            <rect x="2" y="2" width="1" height="1"/><rect x="3" y="2" width="1" height="1"/>
            <rect x="2" y="3" width="1" height="1"/><rect x="3" y="3" width="1" height="1"/>
            <rect x="1" y="5" width="1" height="1"/><rect x="2" y="5" width="1" height="1"/>
            <rect x="3" y="5" width="1" height="1"/><rect x="4" y="5" width="1" height="1"/><rect x="5" y="5" width="1" height="1"/>
        </svg>
    </div>
    <div id="scanline-overlay"></div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="main-container w-full max-w-7xl rounded-2xl shadow-2xl overflow-hidden transition-all duration-500 glow-border">
        <!-- é çœ‰ -->
        <div class="px-4 py-2 flex items-center justify-between border-b" style="border-color: rgba(var(--glow-rgb), 0.3)">
            <!-- æ›´æ–°æ¨™é¡Œæ–‡å­—ä»¥æ¨¡ä»¿çµ‚ç«¯æç¤ºç¬¦ -->
            <p class="font-pixel text-xs sm:text-sm tracking-widest glow-text">BCC_SYS_v8.0.2_TRON <span style="font-size: 0.75em;">CANGUROMIO_BCC@ARCHIVE:~$</span></p>
            <!-- æ§åˆ¶æŒ‰éˆ•ï¼ˆç¾åœ¨ä½¿ç”¨ ID å’Œ programmatically ç¶å®šäº‹ä»¶ï¼‰ -->
            <div class="flex items-center space-x-3 text-gray-400">
                <button id="changelog-btn" title="æ›´æ–°æ—¥èªŒ" class="transition-colors hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg></button>
                <button id="theme-btn" title="è‰²å½©å¾ªç’°" class="transition-colors hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" /></svg></button>
                <button id="performance-btn" title="æ€§èƒ½ç›£æ§" class="transition-colors hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg></button>
                <button id="fullscreen-btn" title="å…¨è¢å¹•" class="transition-colors hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 0l-5-5" /></svg></button>
            </div>
        </div>

        <!-- ä¸»å…§å®¹ç¶²æ ¼ -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 p-6">
            <!-- å·¦å´é¢æ¿ -->
            <div class="lg:col-span-1 p-6 flex flex-col space-y-8 ui-module" style="animation-delay: 0.2s;">
                <div class="text-center">
                    <div class="pacman-container mx-auto glow-border">
                        <div class="profile-image-wrapper">
                            <img id="profile-pic" src="./dist/Bunny CC_Profile.JPG" 
                                 onerror="this.onerror=null; this.src='https://placehold.co/160x160/010409/22d3ee?text=Error';"
                                 class="w-full h-full object-cover">
                        </div>
                    </div>
                    <h1 class="font-pixel text-2xl font-bold mt-4 glow-text">BUNNY CC</h1>
                    <p class="text-sm font-pixel" style="color: var(--text-muted-color)">ID: B-20240312</p>
                </div>
                <div class="ui-module" style="animation-delay: 0.4s;">
                    <h2 class="font-pixel text-base pb-2 mb-4 glow-text" style="border-bottom: 1px solid rgba(var(--glow-rgb), 0.3)">é‡Œç¨‹ç¢‘</h2>
                    <div id="timing" class="space-y-2 text-sm whitespace-pre-line leading-relaxed list-pellet" style="color: var(--text-muted-color)"></div>
                </div>
            </div>

            <!-- å³å´é¢æ¿ -->
            <div class="lg:col-span-2 p-6 space-y-6">
                <div class="ui-module" style="animation-delay: 0.6s;">
                    <h2 class="font-pixel text-base pb-2 mb-4 glow-text" style="border-bottom: 1px solid rgba(var(--glow-rgb), 0.3)">é«”é‡è»Œè·¡</h2>
                    <div class="h-64"><canvas id="weightChart"></canvas></div>
                    <div id="weight-change-info" class="mt-4 text-center p-3 rounded-lg h-12 flex items-center justify-center text-sm" style="background-color: rgba(var(--glow-rgb), 0.05); border: 1px solid rgba(var(--glow-rgb), 0.2)"></div>
                </div>
                <div class="ui-module" style="animation-delay: 0.8s;">
                    <h2 class="font-pixel text-base pb-2 mb-4 glow-text" style="border-bottom: 1px solid rgba(var(--glow-rgb), 0.3)">æ•¸æ“šæµ</h2>
                    <div id="all-records-container" class="record-scrollbar h-56 overflow-y-auto pr-2 space-y-3 text-sm"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- æ¨¡æ…‹æ¡† -->
    <div id="changelog-modal" class="modal-overlay fixed inset-0 z-50 hidden items-center justify-center">
        <div class="main-container glow-border w-11/12 max-w-2xl modal-content-base" onclick="event.stopPropagation()">
            <h2 class="font-pixel text-lg p-4 glow-text border-b" style="border-color:rgba(var(--glow-rgb), 0.3)">æ›´æ–°æ—¥èªŒ</h2>
            <div class="p-6 max-h-[70vh] overflow-y-auto record-scrollbar" id="changelog-list">
                <!-- æ›´æ–°æ—¥èªŒå…§å®¹å°‡ç”± JavaScript å¡«å…… -->
            </div>
            <!-- æ¨¡æ…‹æ¡†é—œé–‰æŒ‰éˆ• -->
            <button id="changelog-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
        </div>
    </div>
    <div id="theme-modal" class="modal-overlay fixed inset-0 z-50 hidden items-center justify-center">
        <div class="main-container glow-border w-11/12 max-w-md modal-content-base" onclick="event.stopPropagation()">
            <h2 class="font-pixel text-lg p-4 glow-text border-b" style="border-color:rgba(var(--glow-rgb), 0.3)">è‰²å½©å¾ªç’°</h2>
            <div id="theme-grid" class="p-6 grid grid-cols-3 sm:grid-cols-4 gap-4"></div>
            <div class="flex justify-between p-4 border-t" style="border-color:rgba(var(--glow-rgb), 0.3)">
                <button id="prev-theme-page-btn" class="px-4 py-2 rounded-md font-bold text-white transition-colors duration-200" style="background-color: rgb(var(--glow-rgb)); hover:background-color: rgba(var(--glow-rgb), 0.8);" disabled>ä¸Šä¸€é </button>
                <button id="next-theme-page-btn" class="px-4 py-2 rounded-md font-bold text-white transition-colors duration-200" style="background-color: rgb(var(--glow-rgb)); hover:background-color: rgba(var(--glow-rgb), 0.8);">ä¸‹ä¸€é </button>
            </div>
            <!-- æ¨¡æ…‹æ¡†é—œé–‰æŒ‰éˆ• -->
            <button id="theme-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
        </div>
    </div>
    <div id="performance-modal" class="modal-overlay fixed inset-0 z-50 hidden items-center justify-center">
        <div class="main-container glow-border w-11/12 max-w-lg modal-content-base" onclick="event.stopPropagation()">
            <h2 class="font-pixel text-lg p-4 glow-text border-b" style="border-color:rgba(var(--glow-rgb), 0.3)">æ€§èƒ½ç›£æ§</h2>
            <div class="p-6 max-h-[70vh] overflow-y-auto record-scrollbar" id="performance-metrics">
                <p class="text-sm" style="color: var(--text-muted-color);">æ¿€æ´»æ„Ÿæ‡‰å™¨é™£åˆ—ä»¥ç²å–å¯¦æ™‚æŒ‡æ¨™ã€‚</p>
                <!-- æŒ‰éˆ•ç¾åœ¨ä½¿ç”¨ ID ä¸¦ programmatically ç¶å®šäº‹ä»¶ -->
                <button id="activate-sensor-btn" class="mt-4 px-4 py-2 rounded-md font-bold text-white transition-colors duration-200" style="background-color: rgb(var(--glow-rgb)); hover:background-color: rgba(var(--glow-rgb), 0.8);">æ¿€æ´»æ„Ÿæ‡‰å™¨é™£åˆ—</button>
                <div id="performance-data-output" class="mt-4 space-y-2 text-sm" style="color: var(--text-color);"></div>
                <p class="text-xs mt-4 text-red-400">æ³¨æ„: ç”±æ–¼å®‰å…¨å”è­°ï¼Œç„¡æ³•ç›´æ¥è¨ªå• CPU/GPU åˆ©ç”¨ç‡å’Œå…¬å…± IPã€‚</p>
            </div>
            <!-- æ¨¡æ…‹æ¡†é—œé–‰æŒ‰éˆ• -->
            <button id="performance-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
        </div>
    </div>

    <script>
        // content_fetcher æ˜¯å…¨åŸŸå¯ç”¨çš„ï¼Œä¸éœ€è¦ import
        // import { content_fetcher } from 'content_fetcher'; // ç§»é™¤æ­¤è¡Œ

        // --- é…ç½® ---
        const CONFIG = {
            PROFILE_PIC_PATH: './dist/Bunny CC_Profile.JPG', // ç”¨æ–¼ GitHub Pages éƒ¨ç½²çš„ç›¸å°è·¯å¾‘
            PET_RECORDS_FETCH_ID: 'uploaded:PetRecords.json', // ä½¿ç”¨ content_fetcher çš„ ID
            START_DATE: '2024/03/12 00:00:00', // é€±å¹´è¨ˆæ™‚å™¨èµ·å§‹æ—¥æœŸ
            // æ“´å±•çš„ THEMES é™£åˆ—è‡³ 56 ç¨®ç¨ç‰¹é…è‰²æ–¹æ¡ˆ
            THEMES: [
                { name: 'é’è‰²', rgb: '34, 211, 238', light_rgb: '103, 232, 249'},
                { name: 'å“ç´…', rgb: '244, 114, 182', light_rgb: '249, 168, 212'},
                { name: 'æª¸æª¬ç¶ ', rgb: '132, 204, 22', light_rgb: '163, 230, 53'},
                { name: 'æ©™è‰²', rgb: '249, 115, 22', light_rgb: '251, 146, 60'},
                { name: 'é»ƒè‰²', rgb: '251, 191, 36', light_rgb: '252, 211, 77'},
                { name: 'ç´…è‰²', rgb: '239, 68, 68', light_rgb: '248, 113, 113'},
                { name: 'é›è—', rgb: '88, 86, 214', light_rgb: '129, 140, 248'},
                { name: 'ç¶ è‰²', rgb: '34, 197, 94', light_rgb: '74, 222, 128'},
                { name: 'ç™½è‰²', rgb: '229, 231, 235', light_rgb: '243, 244, 246'},
                { name: 'ç´«è‰²', rgb: '168, 85, 247', light_rgb: '192, 132, 252'},
                { name: 'é‡‘è‰²', rgb: '255, 215, 0', light_rgb: '255, 228, 77'},
                { name: 'æ°´é´¨è‰²', rgb: '0, 128, 128', light_rgb: '0, 168, 168'},
                { name: 'çŠç‘šç´…', rgb: '255, 127, 80', light_rgb: '255, 160, 122'},
                { name: 'å¤©è—è‰²', rgb: '135, 206, 235', light_rgb: '173, 216, 230'},
                { name: 'ç«ç‘°è‰²', rgb: '255, 0, 127', light_rgb: '255, 51, 153'},
                { name: 'é›»å…‰è—', rgb: '125, 249, 255', light_rgb: '173, 255, 255'},
                { name: 'æ·±ç²‰ç´…', rgb: '255, 20, 147', light_rgb: '255, 105, 180'},
                { name: 'æ˜¥ç¶ ', rgb: '0, 255, 127', light_rgb: '127, 255, 212'},
                { name: 'ç«æ©™è‰²', rgb: '255, 87, 51', light_rgb: '255, 139, 90'},
                { name: 'ç´«ç¾…è˜­', rgb: '238, 130, 238', light_rgb: '221, 160, 221'},
                { name: 'æ£®æ—ç¶ ', rgb: '34, 139, 34', light_rgb: '60, 179, 113'},
                { name: 'å¯¶è—è‰²', rgb: '65, 105, 225', light_rgb: '100, 149, 237'},
                { name: 'ç†±ç²‰ç´…', rgb: '255, 105, 180', light_rgb: '255, 140, 200'},
                { name: 'é‡‘é»ƒè‰²', rgb: '218, 165, 32', light_rgb: '255, 193, 7'},
                { name: 'æ·±è˜­èŠ±ç´«', rgb: '153, 50, 204', light_rgb: '186, 85, 211'},
                { name: 'è–„è·ç¶ ', rgb: '152, 255, 152', light_rgb: '192, 255, 192'},
                { name: 'çŸ³è‹±ç²‰', rgb: '232, 173, 192', light_rgb: '240, 200, 210'},
                { name: 'åˆå¤œè—', rgb: '25, 25, 112', light_rgb: '65, 105, 225'},
                { name: 'ç¥ç€é‡‘', rgb: '255, 191, 0', light_rgb: '255, 215, 0'},
                { name: 'æ¹–è—è‰²', rgb: '0, 139, 139', light_rgb: '0, 191, 191'},
                // é¡å¤– 26 ç¨®ä¸»é¡Œä»¥é”åˆ° 56 ç¨®
                { name: 'è”šè—è‰²', rgb: '42, 82, 190', light_rgb: '64, 130, 250'},
                { name: 'æ·±ç´…', rgb: '220, 20, 60', light_rgb: '255, 99, 71'},
                { name: 'æš—æ¿å²©ç°', rgb: '47, 79, 79', light_rgb: '95, 158, 160'},
                { name: 'æ·±ç´«ç¾…è˜­', rgb: '148, 0, 211', light_rgb: '186, 85, 211'},
                { name: 'é“å¥‡è—', rgb: '30, 144, 255', light_rgb: '65, 105, 225'},
                { name: 'ç«ç£šç´…', rgb: '178, 34, 34', light_rgb: '220, 20, 60'},
                { name: 'ç´«ç´…è‰²', rgb: '255, 0, 255', light_rgb: '255, 105, 180'},
                { name: 'ä¸­æ˜¥ç¶ ', rgb: '0, 250, 154', light_rgb: '127, 255, 212'},
                { name: 'æµ·è»è—', rgb: '0, 0, 128', light_rgb: '70, 130, 180'},
                { name: 'æ©„æ¬–è¤', rgb: '107, 142, 35', light_rgb: '154, 205, 50'},
                { name: 'æ©˜ç´…è‰²', rgb: '255, 69, 0', light_rgb: '255, 99, 71'},
                { name: 'æ·¡ç´«ç¾…è˜­ç´…', rgb: '219, 112, 147', light_rgb: '255, 182, 193'},
                { name: 'ç§˜é­¯è‰²', rgb: '205, 133, 63', light_rgb: '244, 164, 96'},
                { name: 'ç²‰è—è‰²', rgb: '176, 224, 230', light_rgb: '204, 235, 240'},
                { name: 'æµ·ç¶ è‰²', rgb: '46, 139, 87', light_rgb: '60, 179, 113'},
                { name: 'çŸ³æ¿è—', rgb: '106, 90, 205', light_rgb: '123, 104, 238'},
                { name: 'ç•ªèŒ„ç´…', rgb: '255, 99, 71', light_rgb: '255, 128, 96'},
                { name: 'ç¶ æ¾çŸ³', rgb: '64, 224, 208', light_rgb: '128, 240, 220'},
                { name: 'æš—é®­é­šè‰²', rgb: '233, 150, 122', light_rgb: '255, 160, 122'},
                { name: 'æ·±å¤©è—', rgb: '0, 191, 255', light_rgb: '135, 206, 250'},
                { name: 'ä¸­æµ·è—', rgb: '102, 205, 170', light_rgb: '127, 255, 212'},
                { name: 'ä¸­æµ·ç¶ ', rgb: '60, 179, 113', light_rgb: '84, 198, 140'},
                { name: 'ä¸­çŸ³æ¿è—', rgb: '123, 104, 238', light_rgb: '150, 135, 250'},
                { name: 'é‹¼éµè—', rgb: '70, 130, 180', light_rgb: '100, 149, 237'},
                { name: 'æš—é‡‘é»ƒè‰²', rgb: '184, 134, 11', light_rgb: '218, 165, 32'},
                { name: 'è»è—è‰²', rgb: '95, 158, 160', light_rgb: '120, 180, 180'}
            ],
            THEMES_PER_PAGE: 8 // æ¯é é¡¯ç¤ºçš„ä¸»é¡Œæ•¸ (8*7 ç¿»é åˆ¶, ä½†ç¸½æ•¸ 56ï¼Œæ¯é  8 å€‹ï¼Œå…± 7 é )
        };

        // --- å…¨å±€ç‹€æ…‹èˆ‡ UI å…ƒç´  ---
        let weightChart = null; // Chart.js å¯¦ä¾‹
        let allRecordsData = []; // å„²å­˜æ‰€æœ‰è§£æå¾Œçš„å¯µç‰©è¨˜éŒ„
        let weightChartData = []; // å„²å­˜ç”¨æ–¼åœ–è¡¨çš„éæ¿¾é«”é‡è¨˜éŒ„
        let currentThemePage = 0; // ç•¶å‰ä¸»é¡Œé é¢ç´¢å¼•

        // å…”å­å‹•ç•«è®Šé‡
        let wanderingRabbit; 
        const droppingsPool = [];
        const MAX_DROPPINGS = 70; 
        let currentDroppingIndex = 0;
        let lastDropTime = 0;
        let targetX, targetY, currentX, currentY; 
        let animationSpeedMultiplier = 1; // å‹•ç•«é€Ÿåº¦ä¹˜æ•¸ï¼Œç”¨æ–¼ Safari å„ªåŒ–
        let DROP_INTERVAL_MS = 150; // æ‰è½ã€Œå·§å…‹åŠ›è±†ã€çš„æ™‚é–“é–“éš”

        /**
         * åˆ‡æ›æ¨¡æ…‹æ¡†å…ƒç´ çš„é¡¯ç¤ºç‹€æ…‹ã€‚
         * @param {string} modalId - è¦åˆ‡æ›çš„æ¨¡æ…‹æ¡†å…ƒç´ çš„ IDã€‚
         */
        function toggleModal(modalId) {
            console.log(`[DEBUG] å˜—è©¦åˆ‡æ›æ¨¡æ…‹æ¡†: ${modalId}`);
            const modal = document.getElementById(modalId);
            if (modal) {
                const isHidden = modal.classList.contains('hidden');
                modal.classList.toggle('hidden', !isHidden);
                modal.classList.toggle('flex', isHidden); // é¡¯ç¤ºæ™‚æ·»åŠ  flex

                // åªæœ‰ç•¶æ€§èƒ½æ¨¡æ…‹æ¡†é¡¯ç¤ºæ™‚æ‰é¡¯ç¤ºæŒ‡æ¨™
                if (modalId === 'performance-modal' && isHidden) { 
                    displayPerformanceMetrics(); // èª¿ç”¨å‡½æ•¸
                }
                // ç•¶ä¸»é¡Œæ¨¡æ…‹æ¡†é¡¯ç¤ºæ™‚ï¼Œé‡æ–°ç”Ÿæˆä¸»é¡Œæ¨£æœ¬ä»¥ç¢ºä¿åˆ†é æ­£ç¢º
                if (modalId === 'theme-modal' && isHidden) {
                    currentThemePage = 0; // é‡ç½®åˆ°ç¬¬ä¸€é 
                    generateThemeSwatches();
                }
            } else {
                console.error(`[ERROR] åŸ·è¡Œ toggleModal æ™‚æœªæ‰¾åˆ° ID ç‚º '${modalId}' çš„æ¨¡æ…‹æ¡†ã€‚`);
            }
        }

        /**
         * åˆ‡æ›æ–‡æª”çš„å…¨è¢å¹•æ¨¡å¼ã€‚
         */
        function toggleFullscreen() {
            console.log("[DEBUG] å˜—è©¦åˆ‡æ›å…¨è¢å¹•ã€‚");
            const docEl = document.documentElement;
            if (!document.fullscreenElement) {
                docEl.requestFullscreen().catch(err => console.error(`[ERROR] é€²å…¥å…¨è¢å¹•å¤±æ•—: ${err.message}`));
            } else {
                document.exitFullscreen().catch(err => console.error(`[ERROR] é€€å‡ºå…¨è¢å¹•å¤±æ•—: ${err.message}`));
            }
        }

        /**
         * åœ¨æ€§èƒ½æ¨¡æ…‹æ¡†ä¸­é¡¯ç¤ºç€è¦½å™¨æ€§èƒ½æŒ‡æ¨™ã€‚
         */
        function displayPerformanceMetrics() {
            console.log("[DEBUG] é¡¯ç¤ºæ€§èƒ½æŒ‡æ¨™ã€‚");
            const performanceDataOutput = document.getElementById('performance-data-output');
            if (!performanceDataOutput) {
                console.error("[ERROR] æœªæ‰¾åˆ°æ€§èƒ½æ•¸æ“šè¼¸å‡ºå…ƒç´ ä»¥é€²è¡Œé¡¯ç¤ºã€‚");
                return;
            }

            let outputHtml = '<h3>ç•¶å‰æ€§èƒ½æ•¸æ“š:</h3>';

            // è¨˜æ†¶é«”ä½¿ç”¨æƒ…æ³ (éæ¨™æº–ï¼Œä¸»è¦ç”¨æ–¼ Chrome)
            if (window.performance && window.performance.memory) {
                const memory = window.performance.memory;
                outputHtml += `<p><strong>JS å †ä½¿ç”¨é‡:</strong> ${(memory.usedJSHeapSize / (1024 * 1024)).toFixed(2)} MB</p>`;
                outputHtml += `<p><strong>ç¸½ JS å †:</strong> ${(memory.totalJSHeapSize / (1024 * 1024)).toFixed(2)} MB</p>`;
                outputHtml += `<p><strong>JS å †é™åˆ¶:</strong> ${(memory.jsHeapSizeLimit / (1024 * 1024)).toFixed(2)} MB</p>`;
            } else {
                outputHtml += `<p><em>Performance.memory API ä¸å¯ç”¨ã€‚</em></p>`;
            }

            // å°èˆªè¨ˆæ™‚ API
            if (window.performance && window.performance.getEntriesByType) {
                const navTiming = performance.getEntriesByType("navigation")[0];
                if (navTiming) {
                    outputHtml += `<h3>é é¢åŠ è¼‰æ™‚é–“:</h3>`;
                    outputHtml += `<p><strong>DOM å…§å®¹åŠ è¼‰:</strong> ${(navTiming.domContentLoadedEventEnd - navTiming.domContentLoadedEventStart).toFixed(2)} ms</p>`;
                    outputHtml += `<p><strong>ç¸½åŠ è¼‰æ™‚é–“:</strong> ${(navTiming.loadEventEnd - navTiming.startTime).toFixed(2)} ms</p>`;
                    outputHtml += `<p><strong>DNS è§£æ:</strong> ${(navTiming.domainLookupEnd - navTiming.domainLookupStart).toFixed(2)} ms</p>`;
                    outputHtml += `<p><strong>TCP æ¡æ‰‹:</strong> ${(navTiming.connectEnd - navTiming.connectStart).toFixed(2)} ms</p>`;
                    outputHtml += `<p><strong>è«‹æ±‚-éŸ¿æ‡‰å»¶é²:</strong> ${(navTiming.responseEnd - navTiming.requestStart).toFixed(2)} ms</p>`;
                }
            } else {
                outputHtml += `<p><em>æ€§èƒ½è¨ˆæ™‚ API ä¸å¯ç”¨ã€‚</em></p>`;
            }

            // ç¶²çµ¡è³‡è¨Š API (å¯¦é©—æ€§ï¼Œä¸¦éæ‰€æœ‰ç€è¦½å™¨éƒ½æ”¯æŒ)
            if (navigator.connection) {
                const connection = navigator.connection;
                outputHtml += `<h3>ç¶²çµ¡å­ç³»çµ±è³‡è¨Š:</h3>`;
                outputHtml += `<p><strong>æœ‰æ•ˆé¡å‹:</strong> ${connection.effectiveType || 'N/A'}</p>`;
                outputHtml += `<p><strong>å¾€è¿”æ™‚é–“ (RTT):</strong> ${connection.rtt || 'N/A'} ms</p>`;
                outputHtml += `<p><strong>ä¸‹è¡Œå¸¶å¯¬:</strong> ${connection.downlink || 'N/A'} Mbps</p>`;
                outputHtml += `<p><strong>æ•¸æ“šç¯€çœæ¨¡å¼:</strong> ${connection.saveData ? 'å·²å•Ÿç”¨' : 'å·²ç¦ç”¨'}</p>`;
            } else {
                outputHtml += `<p><em>ç¶²çµ¡è³‡è¨Š API ä¸å¯ç”¨ã€‚</em></p>`;
            }

            // ç¡¬é«”ä¸¦ç™¼ (CPU æ ¸å¿ƒæ•¸)
            if (navigator.hardwareConcurrency) {
                outputHtml += `<h3>ç¡¬é«”å­ç³»çµ±è³‡è¨Š:</h3>`;
                outputHtml += `<p><strong>è™•ç†å™¨æ ¸å¿ƒæ•¸:</strong> ${navigator.hardwareConcurrency}</p>`;
            } else {
                outputHtml += `<p><em>è™•ç†å™¨æ ¸å¿ƒæ•¸ç„¡æ³•æª¢æ¸¬ã€‚</em></p>`;
            }

            // è¨­å‚™è¨˜æ†¶é«” (å¯¦é©—æ€§)
            if (navigator.deviceMemory) {
                outputHtml += `<p><strong>ç³»çµ±è¨˜æ†¶é«” (ç´„):</strong> ${navigator.deviceMemory} GB</p>`;
            } else {
                outputHtml += `<p><em>ç³»çµ±è¨˜æ†¶é«”ç„¡æ³•æª¢æ¸¬ã€‚</em></p>`;
            }

            // ç€è¦½å™¨ç”¨æˆ¶ä»£ç†å’Œä½œæ¥­ç³»çµ± (ä¾†è‡ª navigator.userAgent)
            outputHtml += `<h3>ç€è¦½å™¨èˆ‡ä½œæ¥­ç³»çµ±è¨ºæ–·:</h3>`;
            if (navigator && navigator.userAgent) {
                outputHtml += `<p><strong>ç”¨æˆ¶ä»£ç† (UA):</strong> ${navigator.userAgent}</p>`;
                let os = "æœªçŸ¥";
                if (navigator.userAgent.includes("Win")) os = "Windows";
                else if (navigator.userAgent.includes("Mac")) os = "macOS";
                else if (navigator.userAgent.includes("Linux")) os = "Linux";
                else if (navigator.userAgent.includes("Android")) os = "Android";
                else if (navigator.userAgent.includes("iPad")) os = "iPadOS";
                else if (navigator.userAgent.includes("iPhone")) os = "iOS";
                outputHtml += `<p><strong>æ“ä½œç³»çµ± (ä¼°è¨ˆ):</strong> ${os}</p>`;
            } else {
                outputHtml += `<p><em>ç”¨æˆ¶ä»£ç†è³‡è¨Šç„¡æ³•è¨ªå•ã€‚</em></p>`;
            }
            
            performanceDataOutput.innerHTML = outputHtml;
        }


        /**
         * æ ¹æ“š RGB å€¼æ”¹è®Šæ‡‰ç”¨ç¨‹åºçš„æ•´é«”ä¸»é¡Œã€‚
         * æ­¤å‡½æ•¸ç¾åœ¨é‚„æœƒæ›´æ–°èƒŒæ™¯å¾‘å‘æ¼¸è®Šé¡è‰²ã€‚
         * @param {Object} theme - åŒ…å«ä¸»é¡Œ RGB å’Œ light_rgb å€¼çš„å°è±¡ã€‚
         */
        function changeTheme(theme) {
            console.log(`[DEBUG] æ”¹è®Šä¸»é¡Œç‚º: ${theme.name}`);
            const docEl = document.documentElement;
            docEl.style.setProperty('--glow-rgb', theme.rgb);
            docEl.style.setProperty('--glow-light-rgb', theme.light_rgb);

            // å‹•æ…‹è¨­ç½®èƒŒæ™¯å¾‘å‘æ¼¸è®Šé¡è‰²ï¼ŒåŸºæ–¼ä¸»é¡Œå’Œæ—¥é–“/å¤œé–“æ¨¡å¼
            const isDayMode = document.body.classList.contains('day-mode');
            const currentBgColor = getComputedStyle(docEl).getPropertyValue('--bg-color');
            let baseBgColorRgb;
            // å˜—è©¦è§£æåŸºç¤èƒŒæ™¯é¡è‰²
            const match = currentBgColor.match(/\d+/g);
            if (match && match.length >= 3) {
                baseBgColorRgb = [parseInt(match[0]), parseInt(match[1]), parseInt(match[2])];
            } else {
                // å¦‚æœè§£æå¤±æ•—ï¼Œå›é€€åˆ°é è¨­çš„æ·±è‰²/æ·ºè‰²
                baseBgColorRgb = isDayMode ? [240, 248, 255] : [1, 4, 9]; 
            }
            
            const radialStartAlpha = isDayMode ? 0.15 : 0.08;
            const radialEndAlpha = 0.9; 
            
            docEl.style.setProperty('--bg-radial-start', `rgba(${theme.rgb}, ${radialStartAlpha})`);
            docEl.style.setProperty('--bg-radial-end', `rgba(${baseBgColorRgb.join(', ')}, ${radialEndAlpha})`);

            // ä¹Ÿæ ¹æ“šæ–°ä¸»é¡Œçš„ç™¼å…‰è‰²æ›´æ–°é¢æ¿å’Œæ¨¡æ…‹æ¡†çš„è¡¨é¢è‰²
            const surfaceAlpha = isDayMode ? 0.15 : 0.08;
            docEl.style.setProperty('--surface-color', `rgba(${theme.rgb}, ${surfaceAlpha})`);


            // å¦‚æœåœ–è¡¨å­˜åœ¨ï¼Œé‡æ–°æ¸²æŸ“åœ–è¡¨ä»¥æ‡‰ç”¨æ–°é¡è‰²
            if (weightChart) {
                renderWeightChart(); 
            }
        }

        /**
         * ç”Ÿæˆä¸¦å°‡ä¸»é¡Œé¡è‰²æ¨£æœ¬æ·»åŠ åˆ°ä¸»é¡Œæ¨¡æ…‹æ¡†ã€‚
         */
        function generateThemeSwatches() {
            console.log("[DEBUG] ç”Ÿæˆä¸»é¡Œæ¨£æœ¬ã€‚");
            const themeGrid = document.getElementById('theme-grid');
            const prevBtn = document.getElementById('prev-theme-page-btn');
            const nextBtn = document.getElementById('next-theme-page-btn');

            if (!themeGrid || !prevBtn || !nextBtn) {
                console.error("[ERROR] æœªæ‰¾åˆ°ä¸»é¡Œç¶²æ ¼æˆ–åˆ†é æŒ‰éˆ•å…ƒç´ ä»¥ç”Ÿæˆæ¨£æœ¬ã€‚");
                return;
            }

            themeGrid.innerHTML = ''; // æ¸…é™¤ä¹‹å‰çš„æ¨£æœ¬

            const startIndex = currentThemePage * CONFIG.THEMES_PER_PAGE;
            const endIndex = startIndex + CONFIG.THEMES_PER_PAGE;
            const themesToShow = CONFIG.THEMES.slice(startIndex, endIndex);

            themesToShow.forEach(theme => {
                const swatch = document.createElement('button');
                swatch.className = "h-12 w-full rounded-md transition-all duration-200 hover:scale-110 hover:shadow-lg focus:ring-2 ring-offset-2";
                swatch.style.backgroundColor = `rgb(${theme.rgb})`;
                swatch.style.boxShadow = `0 0 15px rgba(${theme.rgb}, 0.5)`;
                swatch.style.ringColor = `rgb(${theme.rgb})`;
                swatch.style.ringOffsetColor = `var(--bg-color)`;
                swatch.title = theme.name;
                swatch.addEventListener('click', () => changeTheme(theme));
                themeGrid.appendChild(swatch);
            });

            // æ›´æ–°åˆ†é æŒ‰éˆ•ç‹€æ…‹
            prevBtn.disabled = currentThemePage === 0;
            nextBtn.disabled = endIndex >= CONFIG.THEMES.length;

            console.log("[DEBUG] ä¸»é¡Œæ¨£æœ¬å·²ç”Ÿæˆã€‚");
        }
        
        // --- æ•¸æ“šèˆ‡è¨ˆæ™‚é‚è¼¯ ---
        /**
         * æ›´æ–°é€±å¹´è¨ˆæ™‚é¡¯ç¤ºã€‚
         */
        function updateTiming() {
            const timingElement = document.getElementById('timing');
            if (!timingElement) {
                console.warn("[WARN] æœªæ‰¾åˆ° UI å…ƒç´  'timing' ä»¥é€²è¡Œ updateTimingã€‚è·³éã€‚");
                return;
            }

            const start = new Date(CONFIG.START_DATE);
            const now = new Date();
            const elapsedMs = now.getTime() - start.getTime();

            const elapsedDays = (elapsedMs / (1000 * 60 * 60 * 24)).toFixed(3);
            const totalSeconds = Math.floor(elapsedMs / 1000);
            const elapsedHours = Math.floor(totalSeconds / 3600);
            const elapsedMinutes = Math.floor((totalSeconds % 3600) / 60);
            const elapsedSeconds = totalSeconds % 60;
            
            const formatDate = (d) => `${d.getFullYear()}-${(d.getMonth() + 1).toString().padStart(2, '0')}-${d.getDate().toString().padStart(2, '0')}`;
            
            // å¹«åŠ©å‡½æ•¸ï¼šæ ¹æ“šå›ºå®šå¤©æ•¸é–“éš”ç²å–ä¸‹ä¸€å€‹é€±å¹´æ—¥æœŸ
            const getNextAnniversary = (baseDate, days) => {
                let count = 0, nextDate;
                do { 
                    count++; 
                    nextDate = new Date(baseDate.getTime() + count * days * 24 * 60 * 60 * 1000); 
                } while (nextDate < now);
                return { date: nextDate, count };
            };
            
            // å¹«åŠ©å‡½æ•¸ï¼šç²å–ä¸‹ä¸€å€‹å¹´åº¦é€±å¹´æ—¥æœŸ
            const getNextYearly = (baseDate) => {
                let count = 0, nextDate;
                do { 
                    count++; 
                    nextDate = new Date(baseDate); 
                    nextDate.setFullYear(baseDate.getFullYear() + count); 
                } while (nextDate < now);
                return { date: nextDate, count };
            };
            
            const next100 = getNextAnniversary(new Date(CONFIG.START_DATE), 100);
            const next180 = getNextAnniversary(new Date(CONFIG.START_DATE), 180);
            const next300 = getNextAnniversary(new Date(CONFIG.START_DATE), 300);
            const nextYear = getNextYearly(new Date(CONFIG.START_DATE));
            
            timingElement.innerHTML = `<ul>
                <li>Bunny CC å·²èˆ‡å¾ç­‰å…±åº¦ ${elapsedDays} å¤ªé™½é€±æœŸã€‚</li>
                <li>ä¸‹å€‹ç™¾å¹´æ¨™è¨˜: ${formatDate(next100.date)} (é€±æœŸ ${next100.count})ã€‚</li>
                <li>ä¸‹å€‹ 180 æ—¥æ¨™è¨˜: ${formatDate(next180.date)} (é€±æœŸ ${next180.count})ã€‚</li>
                <li>ä¸‹å€‹ 300 æ—¥æ¨™è¨˜: ${formatDate(next300.date)} (é€±æœŸ ${next300.count})ã€‚</li>
                <li>ä¸‹å€‹æ˜Ÿè¾°å¹´æ¨™è¨˜: ${formatDate(nextYear.date)} (ç¬¬ ${nextYear.count} å¹´)ã€‚</li>
                <li>é€å»æ™‚å…‰: ${elapsedHours}æ™‚ ${elapsedMinutes}åˆ† ${elapsedSeconds}ç§’ã€‚</li>
            </ul>`;
        }
        
        /**
         * å¾ JSON æ–‡ä»¶åŠ è¼‰å¯µç‰©è¨˜éŒ„ä¸¦è™•ç†ä»¥ç”¨æ–¼é¡¯ç¤ºå’Œåœ–è¡¨ã€‚
         * ç¾åœ¨ä½¿ç”¨ content_fetcher ä¾†åŠ è¼‰ä¸Šå‚³çš„æ–‡ä»¶ã€‚
         */
        async function loadAndProcessData() {
            console.log("[DEBUG] é–‹å§‹æ•¸æ“šåŠ è¼‰èˆ‡è™•ç†ã€‚");
            const allRecordsContainer = document.getElementById('all-records-container');
            if (!allRecordsContainer) {
                console.error("[ERROR] æœªæ‰¾åˆ°æ‰€æœ‰è¨˜éŒ„å®¹å™¨å…ƒç´ ä»¥é€²è¡Œæ•¸æ“šåŠ è¼‰ã€‚");
                return;
            }

            // é¡¯ç¤ºåŠ è¼‰è¨Šæ¯
            allRecordsContainer.innerHTML = `<p class="text-center text-xl" style="color: var(--text-muted-color);">å•Ÿå‹•å¯µç‰©æª”æ¡ˆæª¢ç´¢ä¸­...è«‹ç¨å€™ã€‚</p>`;

            try {
                // ä½¿ç”¨ content_fetcher ä¾†åŠ è¼‰ä¸Šå‚³çš„æ–‡ä»¶
                const recordsText = await content_fetcher.fetch({ // content_fetcher is now directly accessible
                    query: CONFIG.PET_RECORDS_FETCH_ID,
                    source_references: [{ id: CONFIG.PET_RECORDS_FETCH_ID, type: 'FILE' }]
                });
                const records = JSON.parse(recordsText);
                console.log('[DEBUG] å·²åŠ è¼‰ä¸¦è§£æå¯µç‰©è¨˜éŒ„æ•¸æ“š:', records);
                
                // è™•ç†æ‰€æœ‰è¨˜éŒ„: è½‰æ›æ™‚é–“æˆ³ä¸¦æ·»åŠ  31 å¹´åç§»
                allRecordsData = records.map(r => {
                    // ç¢ºä¿ r.date æ˜¯æ•¸å­—ä¸¦è½‰æ›ç‚ºæ¯«ç§’
                    const dateTimestamp = typeof r.date === 'number' ? Math.floor(r.date) : Date.parse(r.date) / 1000;
                    const d = new Date(dateTimestamp * 1000); 
                    d.setFullYear(d.getFullYear() + 31); // æ·»åŠ  31 å¹´åç§» (æ ¹æ“šç”¨æˆ¶ä¹‹å‰çš„ä»£ç¢¼)
                    return { ...r, processedDate: d };
                }).sort((a, b) => b.processedDate.getTime() - a.processedDate.getTime()); // é™åºæ’åºä»¥ä¾›é¡¯ç¤º

                // éæ¿¾é«”é‡åœ–è¡¨æ•¸æ“š - æ³¨æ„é€™è£¡çš„ 'ä½“é‡æµ‹é‡' (ç°¡é«”ä¸­æ–‡)
                weightChartData = records
                    .filter(r => r.activity === 'ä½“é‡æµ‹é‡' && typeof r.weight === 'number' && r.weight > 0)
                    .map(r => {
                        const dateTimestamp = typeof r.date === 'number' ? Math.floor(r.date) : Date.parse(r.date) / 1000;
                        const d = new Date(dateTimestamp * 1000);
                        d.setFullYear(d.getFullYear() + 31);
                        return { date: d, weight: r.weight };
                    })
                    .sort((a, b) => a.date.getTime() - b.date.getTime()); // å‡åºæ’åºä»¥ä¾›åœ–è¡¨æŒ‰æ™‚é–“é †åºé¡¯ç¤º

                renderAllRecords();
                renderWeightChart();
                console.log("[DEBUG] æ•¸æ“šåŠ è¼‰èˆ‡è™•ç†å®Œæˆã€‚");

            } catch (error) {
                console.error("[ERROR] æ•¸æ“šåŠ è¼‰éŒ¯èª¤:", error);
                allRecordsContainer.innerHTML = `<p class="text-red-400 text-center">éŒ¯èª¤: æª”æ¡ˆæª¢ç´¢å¤±æ•—ã€‚è«‹æŸ¥é–±æ—¥èªŒã€‚</p>`;
            }
        }

        /**
         * åœ¨åˆ—è¡¨å®¹å™¨ä¸­æ¸²æŸ“æ‰€æœ‰å¯µç‰©è¨˜éŒ„ã€‚
         */
        function renderAllRecords() {
            console.log("[DEBUG] æ¸²æŸ“æ‰€æœ‰è¨˜éŒ„ã€‚");
            const allRecordsContainer = document.getElementById('all-records-container');
            if (!allRecordsContainer) return;

            allRecordsContainer.innerHTML = allRecordsData.map(rec => {
                const dateStr = rec.processedDate.toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' });
                return `<div class="p-3 rounded-md" style="background: rgba(var(--glow-rgb), 0.05); border-left: 3px solid rgba(var(--glow-rgb), 0.5)">
                            <div class="flex justify-between items-center">
                                <strong class="font-bold glow-text text-sm">æ´»å‹•: ${rec.activity}</strong>
                                <time class="text-xs" style="color:var(--text-muted-color)">æ™‚é–“æ¨™è¨˜: ${dateStr}</time>
                            </div>
                            <p class="mt-1" style="color: var(--text-color)">ç­†è¨˜: ${rec.notes || 'ç„¡'}</p>
                        </div>`;
            }).join('');
            // å¦‚æœæ²’æœ‰è¨˜éŒ„ï¼Œé¡¯ç¤ºä¸€æ¢è¨Šæ¯
            if (allRecordsData.length === 0) {
                allRecordsContainer.innerHTML = `<p class="text-center text-xl text-gray-500 mt-8">åœ¨æ­¤æª”æ¡ˆä¸­æœªæ‰¾åˆ°ä»»ä½•è¨˜éŒ„ã€‚</p>`;
            }
            console.log("[DEBUG] æ‰€æœ‰è¨˜éŒ„å·²æ¸²æŸ“ã€‚");
        }

        /**
         * æ¸²æŸ“é«”é‡è®ŠåŒ–åœ–è¡¨ã€‚
         */
        function renderWeightChart() {
            console.log("[DEBUG] æ¸²æŸ“é«”é‡åœ–è¡¨ã€‚");
            const weightChartCanvas = document.getElementById('weightChart');
            const weightChangeInfo = document.getElementById('weight-change-info');

            if (!weightChartCanvas) {
                console.error("[ERROR] æœªæ‰¾åˆ°é«”é‡åœ–è¡¨ç•«å¸ƒå…ƒç´ ä»¥é€²è¡Œæ¸²æŸ“ã€‚");
                return;
            }

            if (weightChart) {
                weightChart.destroy(); // éŠ·æ¯€ç¾æœ‰åœ–è¡¨å¯¦ä¾‹
                console.log("[DEBUG] ç¾æœ‰åœ–è¡¨å·²éŠ·æ¯€ã€‚");
            }

            if (!weightChartData.length) {
                weightChartCanvas.style.display = 'none';
                if (weightChangeInfo) weightChangeInfo.innerHTML = `<p class="text-yellow-400">æœªæª¢æ¸¬åˆ°è³ªé‡æ•¸æ“šã€‚</p>`;
                console.log("[DEBUG] æ²’æœ‰é«”é‡æ•¸æ“šå¯æ¸²æŸ“åœ–è¡¨ã€‚");
                return;
            } else {
                weightChartCanvas.style.display = 'block';
                if (weightChangeInfo) weightChangeInfo.innerHTML = `<p class="text-gray-400">é»æ“Šæ•¸æ“šé»ä»¥é€²è¡Œè³ªé‡æ³¢å‹•åˆ†æã€‚</p>`;
            }
            
            const ctx = weightChartCanvas.getContext('2d');
            const style = getComputedStyle(document.documentElement);
            const primaryColor = `rgb(${style.getPropertyValue('--glow-rgb').trim()})`;
            const textColor = style.getPropertyValue('--text-muted-color').trim();
            const gridColor = `rgba(${style.getPropertyValue('--glow-rgb').trim()}, 0.1)`;

            weightChart = new Chart(ctx, {
                type: 'line',
                data: {
                    // æ¨™ç±¤æ˜¯ç°¡å–®çš„æ—¥æœŸå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ 'time' åˆ»åº¦çš„ Date å°è±¡
                    labels: weightChartData.map(d => d.date.toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' })),
                    datasets: [{
                        label: 'è³ªé‡ (g)',
                        data: weightChartData.map(d => d.weight),
                        borderColor: primaryColor,
                        backgroundColor: `rgba(${style.getPropertyValue('--glow-rgb').trim()}, 0.2)`,
                        borderWidth: 2,
                        pointBackgroundColor: primaryColor,
                        pointBorderColor: 'var(--bg-color)',
                        pointRadius: 4,
                        pointHoverRadius: 7,
                        tension: 0.4,
                        fill: true,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: false },
                        tooltip: { // è‡ªå®šç¾©å·¥å…·æç¤ºæ¨£å¼
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + 'g';
                                        const currentIndex = context.dataIndex;
                                        // è¨ˆç®—èˆ‡å‰ä¸€å€‹é»çš„å·®ç•°
                                        if (currentIndex > 0) {
                                            const previousWeight = context.dataset.data[currentIndex - 1];
                                            const currentWeight = context.parsed.y;
                                            const difference = currentWeight - previousWeight;
                                            label += ` (å¢é‡: ${difference >= 0 ? '+' : ''}${difference.toFixed(1)}g)`;
                                        }
                                    }
                                    return label;
                                }
                            },
                            titleFont: { family: "'Noto Sans SC', sans-serif" }, // å·¥å…·æç¤ºä½¿ç”¨ Noto Sans
                            bodyFont: { family: "'Noto Sans SC', sans-serif" },
                            padding: 10,
                            boxPadding: 5,
                            displayColors: false,
                            backgroundColor: 'rgba(0, 0, 0, 0.7)',
                            borderColor: primaryColor,
                            borderWidth: 1,
                            cornerRadius: 5,
                        }
                    },
                    scales: {
                        y: { 
                            grid: { color: gridColor, drawBorder: false }, 
                            ticks: { color: textColor, font: { family: "'Noto Sans SC', sans-serif" }} 
                        },
                        x: { 
                            grid: { display: false }, 
                            ticks: { color: textColor, font: { family: "'Noto Sans SC', sans-serif" }} 
                        }
                    }
                    ,
                    onClick: (event, elements) => {
                        if (elements.length > 0 && weightChangeInfo) { // ç¢ºä¿å…ƒç´ å­˜åœ¨
                            const index = elements[0].index;
                            if (index > 0) {
                                const diff = weightChartData[index].weight - weightChartData[index - 1].weight;
                                const sign = diff >= 0 ? '+' : '';
                                const color = diff >= 0 ? 'text-lime-400' : 'text-red-400';
                                weightChangeInfo.innerHTML = `<p>å¢é‡: <span class="font-bold ${color}">${sign}${diff.toFixed(1)}g</span></p>`;
                            } else {
                                weightChangeInfo.innerHTML = `<p>åˆå§‹è³ªé‡æƒæã€‚</p>`;
                            }
                        }
                    }
                }
            });
            console.log("[DEBUG] é«”é‡åœ–è¡¨å·²æ¸²æŸ“ã€‚");
        }

        // --- éŠèµ°å…”å‹•ç•«é‚è¼¯ ---
        function animateRabbit() {
            if (!wanderingRabbit) {
                console.warn("[WARN] æœªæ‰¾åˆ°éŠèµ°å…”å…ƒç´ ï¼Œåœæ­¢å‹•ç•«ã€‚");
                return;
            }

            const speed = 2.5 * animationSpeedMultiplier; 
            
            // å¾ transform ç²å–ç•¶å‰ä½ç½®
            const style = window.getComputedStyle(wanderingRabbit);
            const transform = style.transform || style.webkitTransform || style.mozTransform;
            let currentRabbitX = 0, currentRabbitY = 0;

            if (transform && transform !== 'none') {
                const matrix = new DOMMatrix(transform);
                currentRabbitX = matrix.m41;
                currentRabbitY = matrix.m42;
            } else {
                // å°ä¸æ”¯æŒ style.transform çš„ DOMMatrix æˆ– transform å°šæœªè¨­ç½®çš„ç€è¦½å™¨é€²è¡Œå›é€€ã€‚
                // é€™è£¡æˆ‘å€‘éœ€è¦è§£æç•¶å‰æ¨£å¼è€Œä¸æ˜¯ä¾è³´æ–¼ prevX/prevY
                currentRabbitX = parseFloat(wanderingRabbit.style.transform.match(/translateX\(([^)]+)px\)/)?.[1] || '0');
                currentRabbitY = parseFloat(wanderingRabbit.style.transform.match(/translateY\(([^)]+)px\)/)?.[1] || '0');
            }


            // å¦‚æœç›®æ¨™æœªå®šç¾©æˆ–å…”å­é è¿‘ç›®æ¨™ï¼Œè¨­ç½®ä¸€å€‹æ–°çš„éš¨æ©Ÿç›®æ¨™
            if (targetX === undefined || targetY === undefined || 
                Math.sqrt(Math.pow(targetX - currentRabbitX, 2) + Math.pow(targetY - currentRabbitY, 2)) < speed) { 
                targetX = Math.random() * (window.innerWidth - wanderingRabbit.offsetWidth); 
                targetY = Math.random() * (window.innerHeight - wanderingRabbit.offsetHeight); 
            }
            
            const prevX = currentRabbitX; // å„²å­˜å…”å­ç§»å‹•å‰çš„ä½ç½®ç”¨æ–¼æ‰è½ç‰©
            const prevY = currentRabbitY;

            const distanceX = targetX - currentRabbitX;
            const distanceY = targetY - currentRabbitY; // ä¿®æ­£ï¼šæ‡‰ä½¿ç”¨ currentRabbitY
            const distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);

            if (distance > 0) { // åªæœ‰ç•¶å­˜åœ¨è·é›¢æ™‚æ‰ç§»å‹•
                currentX = currentRabbitX + (distanceX / distance) * speed;
                currentY = currentRabbitY + (distanceY / distance) * speed;
            } else { // å¦‚æœå·²ç¶“åˆ°é”ç›®æ¨™ï¼Œå‰‡åœç•™æˆ–é‡æ–°è¨ˆç®— (ç”±ä¸Šé¢çš„æ¢ä»¶è™•ç†)
                currentX = targetX;
                currentY = targetY;
            }

            // å°‡ä½ç½®é™åˆ¶åœ¨é‚Šç•Œå…§
            currentX = Math.max(0, Math.min(currentX, window.innerWidth - wanderingRabbit.offsetWidth)); 
            currentY = Math.max(0, Math.min(currentY, window.innerHeight - wanderingRabbit.offsetHeight)); 

            wanderingRabbit.style.transform = `translate(${currentX}px, ${currentY}px)`;

            if (performance.now() - lastDropTime > DROP_INTERVAL_MS) {
                const dropping = droppingsPool[currentDroppingIndex];
                if (dropping) { 
                    dropping.style.left = `${prevX + (wanderingRabbit.offsetWidth - 6) / 2}px`; 
                    dropping.style.top = `${prevY + (wanderingRabbit.offsetHeight - 6) / 2 + 10}px`;  
                    
                    dropping.classList.remove('fade-out');
                    void dropping.offsetWidth; // è§¸ç™¼é‡æ’ä»¥é‡æ–°é–‹å§‹å‹•ç•«
                    dropping.classList.add('fade-out');

                    currentDroppingIndex = (currentDroppingIndex + 1) % MAX_DROPPINGS;
                    lastDropTime = performance.now();
                }
            }
            window.requestAnimationFrame(animateRabbit);
        }

        // --- æ›´æ–°æ—¥èªŒå¡«å…… ---
        function populateChangelog() {
            console.log("[DEBUG] å¡«å……æ›´æ–°æ—¥èªŒã€‚");
            const changelogList = document.getElementById('changelog-list');
            if (!changelogList) {
                console.error("[ERROR] æœªæ‰¾åˆ°æ›´æ–°æ—¥èªŒåˆ—è¡¨å…ƒç´ ä»¥å¡«å……ã€‚");
                return;
            }
            const changelogContent = `
                <h4>âœ¨ v8.0.2 - ğŸŒŸ Grand Revival Rabbit (ç‹è€…æ­¸ä¾†å…”)</h4>
                <div class="changelog-entry">
                    <p><strong>Fixes (The Maladies Vanquished! ç—¼ç–¾ç›¡é™¤ï¼):</strong></p>
                    <ul>
                        <li><span style="color: red;"><strong>The Oracle's Tongue Now Loosened! (ç¥è«­ä¹‹èˆŒçµ‚å¾©ç”¦ï¼):</strong></span> The vexing silence of the <code>content_fetcher</code>, which oft whispered of its undefined nature, hath been banished! By removing the shroud of 'module' from our chief script, this noble oracle now speaketh freely, and the data, which once lay hidden, doth now cascade forth in its full glory! Henceforth, no more blank pages shall greet thine eyes, for the archives are fully restored! (æ•¸æ“šç©ºç™½å•é¡Œå·²å¾¹åº•è§£æ±ºï¼ğŸ‰)</li>
                        <li>The Hare's Gambit, More Precise! (ç‰å…”ä¹‹è¡Œï¼Œæ›´è¶¨ç²¾æº–ï¼): The labyrinthine path of the wandering rabbit's journey hath been fine-tuned. Its steps, once prone to a slight miscalculation, now tread with an unparalleled accuracy, ensuring its playful dance is flawless upon the digital stage! (å…”å­äº‚è·‘çš„ bug å·²ä¿®å¾©ï¼ğŸ¥³)</li>
                    </ul>
                </div>
                <h4>âœ¨ v8.0.1 - ğŸ› Bug Fix Rabbit (é™¤èŸ²å…”)</h4>
                <div class="changelog-entry">
                    <p><strong>Fixes (The Maladies Vanquished! ç—¼ç–¾ç›¡é™¤ï¼):</strong></p>
                    <ul>
                        <li><span style="color: red;"><strong>Edge Browser's Folly Cured! (Edge ç€è¦½å™¨ä¹‹è ¢ç—…å·²ç™’ï¼):</strong></span> The peculiar ailment in Edge, which caused our script to stumble with an 'Unexpected identifier 'addEventListener',' hath been utterly vanquished! We have, with cunning, removed all direct 'onclick' attributes from our HTML, and now, our buttons heed the whispers of JavaScript's 'addEventListener', thereby ensuring their proper conduct and the swift flow of interaction! (Edge ç€è¦½å™¨åŸ·è¡ŒéŒ¯èª¤å·²ä¿®æ­£ï¼ğŸ‰)</li>
                        <li><span style="color: red;"><strong>Weight Chart's Data Unveiled! (é«”é‡åœ–è¡¨æ•¸æ“šçµ‚ç¾ä¸–ï¼):</strong></span> The cryptic absence of data from our weight chart, which stemmed from a subtle discord in the naming of 'weight measurement' activities, hath been resolved! We now heed the simpler tongue of 'ä½“é‡æµ‹é‡' (simplified Chinese), and lo, the cherished records of mass are now laid bare for all to witness! (é«”é‡åœ–è¡¨æ•¸æ“šè¼‰å…¥å·²ä¿®æ­£ï¼ğŸ“ˆ)</li>
                        <li>The 'Content_Fetcher' No Longer a Mystery! (å…§å®¹æŠ“å–è€…ä¸å†æ˜¯è¬ï¼): The perplexing error of 'content_fetcher module import' hath been set right. This noble tool, being a gift of the very environment, now serves without need of explicit import, answering to our call as a trusted companion! (<code>content_fetcher</code> æ¨¡çµ„å¼•å…¥éŒ¯èª¤å·²ä¿®æ­£ï¼ğŸ› ï¸)</li>
                        <li>The Wandering Hare's Path Refined! (éŠèµ°å…”ä¹‹å¾‘è·¯æ›´ç²¾ï¼): The whimsical trajectory of our wandering rabbit's animation hath been subtly adjusted, ensuring its movements are now as graceful as a zephyr's dance! (éŠèµ°å…”å‹•ç•«è·¯å¾‘é‚è¼¯å·²å¾®èª¿ï¼ğŸƒâ€â™€ï¸)</li>
                    </ul>
                </div>
                <h4>âœ¨ v8.0.0 - ğŸ‡ Arcane Chronos Rabbit (å¥§ç§˜æ™‚åºå…”)</h4>
                <div class="changelog-entry">
                    <p><strong>New Illuminations (A Light Newly Cast! æ–°å…‰ä¹ç¾ï¼):</strong></p>
                    <ul>
                        <li>The Axis of Time, Flowing Anew! (æ™‚å…‰ä¹‹è»¸ï¼Œæµè½‰ä¸æ¯ï¼): The sprite of the wandering rabbit doth now animate with renewed vigour, its steps as fluid as a river's course, a veritable cascade of frames, breathing boundless life into this archive! (å…”å­å‹•ç•«å›ä¾†å•¦ï¼ğŸ°)</li>
                        <li>The Spectrum's Grand Embrace! (è™¹å½©ä¹‹è­œï¼Œå»£ç´å¤©åœ°ï¼): Our palette of thematic colours hath expanded to fifty-six distinct hues, each a radiant spark, waiting to adorn this archive in garments of unparalleled splendor! (ä¸»é¡Œé¡è‰²å¤šé” 56 ç¨®ï¼ğŸŒˆ)</li>
                        <li>The Arcana of Measure, Unveiling Performance! (è¡“æ•¸ä¹‹å¥§ï¼Œæ´æ‚‰æ€§èƒ½ï¼): Our method of performance scrutiny hath been refined, now capable of revealing the browser's secret whispers, the depths of its memory, and the pulse of its network! Yet, the CPU's core, the GPU's might, and the IP's hidden trail, remain shrouded in mystery, beyond our common ken. (æ–°å¢æ€§èƒ½ç›£æ§æ¨¡å¡Šï¼ğŸ’»)</li>
                        <li>Ancient Texts Reborn, Scented with Ink! (å¤ç±æ–°ç”Ÿï¼Œç­†å¢¨ç•™é¦™ï¼): This chronicle of updates hath been re-penned with the quill of Shakespeare, each word imbued with antique grace and profound depth, offering a feast of eloquence to the discerning reader! (æ›´æ–°æ—¥èªŒè®Šæˆå¤é¢¨è‹±èªäº†ï¼ğŸ“œ)</li>
                        <li>The Prologue's Mark, A Terminal's Soul! (å§‹é æ¨™è¨˜ï¼Œçµ‚ç«¯ä¹‹éˆï¼): The inscription at the page's head, which once spoke of shared archives, hath transformed into the style of a terminal's command prompt, lending this archive a fresh, technological allure! (æ¨™é¡Œè®Šæˆçµ‚ç«¯æ©Ÿé¢¨æ ¼ï¼ğŸ˜)</li>
                    </ul>
                    <p><strong>Refinements (An Ode to Refinement! ç²¾é€²é Œæ­Œï¼):</strong></p>
                    <ul>
                        <li>Data's Flow, Unhindered! (æ•¸æ“šæµè½‰ï¼Œç„¡ç¤™æš¢è¡Œï¼): The core mechanisms for data processing and element interplay have reverted to their former robust foundation, ensuring all logic proceeds as seamlessly as in days of yore, without a single hitch! (æ•¸æ“šåŠ è¼‰å’Œé é¢äº¤äº’é‚è¼¯å›æ­¸ç©©å®šï¼ğŸ‘)</li>
                    </ul>
                    <p><strong>Fixes (The Maladies Vanquished! ç—¼ç–¾ç›¡é™¤ï¼):</strong></p>
                    <ul>
                        <li>Woes of Yore, Now Dispelled! (å¾€æ˜”ä¹‹å›°ï¼Œç›¡çš†æ¶ˆå¼­ï¼): All manner of runtime afflictions, such as 'Unexpected identifier 'addEventListener'' and 'window.toggleModal is not a function', have been utterly uprooted in this iteration, rendering the archive stable and serene! (å„ç¨®å ±éŒ¯éƒ½æ²’äº†ï¼ğŸ¥³)</li>
                    </ul>
                </div>
                <!-- Previous Changelog Entries (çœç•¥äº†ï¼Œå› ç‚ºå…§å®¹è¼ƒé•·ï¼Œä½†çµæ§‹èˆ‡ä¸Šé¢ç›¸åŒ) -->
            `;
            changelogList.innerHTML = changelogContent;
            console.log("[DEBUG] æ›´æ–°æ—¥èªŒå·²å¡«å……ã€‚");
        }

        /**
         * è¨­ç½®æ‰€æœ‰ UI æŒ‰éˆ•çš„äº‹ä»¶ç›£è½å™¨ã€‚
         */
        function setupEventListeners() {
            console.log("[DEBUG] è¨­ç½®äº‹ä»¶ç›£è½å™¨ã€‚");
            document.getElementById('changelog-btn')?.addEventListener('click', () => toggleModal('changelog-modal'));
            document.getElementById('theme-btn')?.addEventListener('click', () => toggleModal('theme-modal'));
            document.getElementById('performance-btn')?.addEventListener('click', () => toggleModal('performance-modal'));
            document.getElementById('fullscreen-btn')?.addEventListener('click', toggleFullscreen);

            // æ¨¡æ…‹æ¡†é—œé–‰æŒ‰éˆ•
            document.getElementById('changelog-close-btn')?.addEventListener('click', () => toggleModal('changelog-modal'));
            document.getElementById('theme-close-btn')?.addEventListener('click', () => toggleModal('theme-modal'));
            document.getElementById('performance-close-btn')?.addEventListener('click', () => toggleModal('performance-modal'));
            
            // æ€§èƒ½æ¨¡æ…‹æ¡†ä¸­çš„æ¿€æ´»æ„Ÿæ‡‰å™¨æŒ‰éˆ•
            document.getElementById('activate-sensor-btn')?.addEventListener('click', displayPerformanceMetrics);

            // ä¸»é¡Œåˆ†é æŒ‰éˆ•
            document.getElementById('prev-theme-page-btn')?.addEventListener('click', () => {
                if (currentThemePage > 0) {
                    currentThemePage--;
                    generateThemeSwatches();
                }
            });
            document.getElementById('next-theme-page-btn')?.addEventListener('click', () => {
                const totalPages = Math.ceil(CONFIG.THEMES.length / CONFIG.THEMES_PER_PAGE);
                if (currentThemePage < totalPages - 1) {
                    currentThemePage++;
                    generateThemeSwatches();
                }
            });

            // æ¨¡æ…‹æ¡†ç–ŠåŠ å±¤é»æ“Šé—œé–‰åŠŸèƒ½ (åƒ…ç•¶é»æ“Šç–ŠåŠ å±¤æœ¬èº«æ™‚)
            document.getElementById('changelog-modal')?.addEventListener('click', (event) => {
                if (event.target.id === 'changelog-modal') toggleModal('changelog-modal');
            });
            document.getElementById('theme-modal')?.addEventListener('click', (event) => {
                if (event.target.id === 'theme-modal') toggleModal('theme-modal');
            });
            document.getElementById('performance-modal')?.addEventListener('click', (event) => {
                if (event.target.id === 'performance-modal') toggleModal('performance-modal');
            });

            console.log("[DEBUG] äº‹ä»¶ç›£è½å™¨å·²è¨­ç½®ã€‚");
        }


        // --- ä¸» window.onload ç›£è½å™¨ ---
        // ä½¿ç”¨ window.onload ä»¥ç¢ºä¿æ‰€æœ‰ DOM å…ƒç´ åœ¨å˜—è©¦ç²å–å…¶å¼•ç”¨æˆ–é™„åŠ äº‹ä»¶ç›£è½å™¨ä¹‹å‰å·²å®Œå…¨åŠ è¼‰ä¸¦å¯è¨ªå•ã€‚
        window.onload = function() {
            console.log("[DEBUG] window.onload äº‹ä»¶è§¸ç™¼ã€‚é–‹å§‹åˆå§‹åŒ–...");

            // åˆå§‹åŒ–å…”å­å…ƒç´ åŠå…¶ä½ç½®
            wanderingRabbit = document.getElementById('wandering-rabbit');
            if (wanderingRabbit) {
                // å°‡ currentX, currentY åˆå§‹åŒ–ç‚ºéš¨æ©Ÿèµ·å§‹ä½ç½®
                currentX = Math.random() * (window.innerWidth - wanderingRabbit.offsetWidth); 
                currentY = Math.random() * (window.innerHeight - wanderingRabbit.offsetHeight); 
                wanderingRabbit.style.transform = `translate(${currentX}px, ${currentY}px)`;
                
                // åˆå§‹åŒ–æ‰è½ç‰©æ± 
                for (let i = 0; i < MAX_DROPPINGS; i++) {
                    const dropping = document.createElement('div');
                    dropping.className = 'rabbit-dropping';
                    document.body.appendChild(dropping);
                    droppingsPool.push(dropping);
                }
                console.log("[DEBUG] å…”å­æ‰è½ç‰©æ± å·²åˆå§‹åŒ–ã€‚");
                window.requestAnimationFrame(animateRabbit); // é–‹å§‹å‹•ç•«å¾ªç’°
                console.log("[DEBUG] å…”å­å‹•ç•«å·²å•Ÿå‹•ã€‚");
            } else {
                console.warn("[WARN] æœªæ‰¾åˆ°éŠèµ°å…”å…ƒç´ ï¼Œå‹•ç•«å·²ç¦ç”¨ã€‚");
            }

            // æª¢æ¸¬ Safari ä¸¦èª¿æ•´å‹•ç•«å¹€ç‡ä»¥ç²å¾—æ„ŸçŸ¥çš„æµæš¢åº¦
            const isSafari = navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome');
            if (isSafari) {
                animationSpeedMultiplier = 1.2; 
                DROP_INTERVAL_MS = 100; 
                console.log("[DEBUG] æª¢æ¸¬åˆ° Safari ç€è¦½å™¨ï¼Œå‹•ç•«é€Ÿåº¦å·²å„ªåŒ–ã€‚");
            }

            // è¨­ç½®é ­åƒåœ–ç‰‡æº
            const profilePic = document.getElementById('profile-pic');
            if (profilePic) {
                profilePic.src = CONFIG.PROFILE_PIC_PATH;
            } else {
                console.error("[ERROR] åˆå§‹åŒ–æ™‚æœªæ‰¾åˆ°é ­åƒåœ–ç‰‡å…ƒç´ ã€‚");
            }

            // è¨­ç½®äº‹ä»¶ç›£è½å™¨
            setupEventListeners();
            
            // é–‹å§‹è¨ˆæ™‚å™¨æ›´æ–°
            setInterval(updateTiming, 100);
            console.log("[DEBUG] è¨ˆæ™‚å™¨æ›´æ–°å·²å•Ÿå‹•ã€‚");

            // åŠ è¼‰ä¸¦è™•ç†æ•¸æ“š
            loadAndProcessData();

            // ç”Ÿæˆä¸»é¡Œæ¨£æœ¬ (åˆå§‹æœƒé¡¯ç¤ºç¬¬ä¸€é )
            generateThemeSwatches();

            // æ·»åŠ èª¿æ•´å¤§å°ç›£è½å™¨ä»¥èª¿æ•´å…”å­å‹•ç•«é‚Šç•Œ
            window.addEventListener('resize', () => {
                if (!wanderingRabbit) return; 
                const style = window.getComputedStyle(wanderingRabbit);
                const transform = style.transform || style.webkitTransform || style.mozTransform;
                let currentRabbitX = 0, currentRabbitY = 0;

                if (transform && transform !== 'none') {
                    const matrix = new DOMMatrix(transform);
                    currentRabbitX = matrix.m41;
                    currentRabbitY = matrix.m42;
                } else {
                    currentRabbitX = parseFloat(wanderingRabbit.style.transform.match(/translateX\(([^)]+)px\)/)?.[1] || '0');
                    currentRabbitY = parseFloat(wanderingRabbit.style.transform.match(/translateY\(([^)]+)px\)/)?.[1] || '0');
                }

                currentX = Math.min(Math.max(0, currentRabbitX), window.innerWidth - wanderingRabbit.offsetWidth); 
                currentY = Math.min(Math.max(0, currentRabbitY), window.innerHeight - wanderingRabbit.offsetHeight); 
                wanderingRabbit.style.transform = `translate(${currentX}px, ${currentY}px)`;

                targetX = Math.random() * (window.innerWidth - wanderingRabbit.offsetWidth); 
                targetY = Math.random() * (window.innerHeight - wanderingRabbit.offsetHeight); 
                console.log("[DEBUG] çª—å£å·²èª¿æ•´å¤§å°ï¼Œå…”å­ä½ç½®å’Œç›®æ¨™å·²æ›´æ–°ã€‚");
            });

            // å¡«å……æ›´æ–°æ—¥èªŒå…§å®¹
            populateChangelog();
            
            // è¨­ç½®åˆå§‹éš¨æ©Ÿä¸»é¡Œ
            const initialTheme = CONFIG.THEMES[Math.floor(Math.random() * CONFIG.THEMES.length)];
            changeTheme(initialTheme);
            console.log("[DEBUG] åˆå§‹ä¸»é¡Œå·²è¨­ç½®ã€‚");
            console.log("[DEBUG] åˆå§‹åŒ–å®Œæˆã€‚");
        };
    </script>
</body>
</html>
