<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ° Bunny CC Archive v8.0.4 - âš™ï¸ Data Resilience Rabbit</title>
    <!-- Tailwind CSS CDN - æ³¨æ„ï¼šç”¨æ–¼ç”Ÿç”¢ç’°å¢ƒæ™‚ï¼Œè«‹ä½œç‚º PostCSS æ’ä»¶å®‰è£æˆ–ä½¿ç”¨ Tailwind CLI -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Press Start 2P ç”¨æ–¼åƒç´ åŒ–æ¨™é¡Œ, Noto Sans SC ç”¨æ–¼ä¸»è¦å…§å®¹ -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* CSS è®Šæ•¸ç”¨æ–¼ TRON ä¸»é¡Œ (é¡è‰²é€é JS å‹•æ…‹è¨­ç½®) */
        :root {
            --glow-rgb: 34, 211, 238; /* é’è‰² - é è¨­ */
            --glow-light-rgb: 103, 232, 249; /* æ·ºé’è‰² - é è¨­ */
            --bg-color: #010409; /* æ·±è—è‰² - é è¨­åŸºç¤èƒŒæ™¯ */
            /* é¢æ¿è¡¨é¢é¡è‰²ç¾åœ¨å‹•æ…‹ä½¿ç”¨ glow-rgb ä¸¦å¸¶æœ‰é€æ˜åº¦ */
            --surface-color: rgba(var(--glow-rgb), 0.08); /* é¢æ¿çš„å¾®å¦™ç™¼å…‰è‰²èª¿ */
            --grid-color: rgba(var(--glow-rgb), 0.15); /* ç¶²æ ¼ç·šé¡è‰²åŸºæ–¼ç™¼å…‰è‰² */
            --text-color: #e6edf3; /* æ·ºç°ç™½è‰²æ–‡å­— */
            --text-muted-color: #8b949e; /* æŸ”å’Œç°è‰²æ–‡å­— */

            /* æ–°å¢: èƒŒæ™¯å¾‘å‘æ¼¸è®Šé¡è‰² (é€é JS å‹•æ…‹è¨­ç½®) */
            --bg-radial-start: rgba(var(--glow-rgb), 0.08); /* ä¸­å¿ƒå¾®å¼±ç™¼å…‰ */
            --bg-radial-end: rgba(1, 4, 9, 0.9); /* èå…¥æ·±è‰²èƒŒæ™¯ */
            --grad-pos-x: 20%; /* é€é CSS é—œéµå¹€å‹•ç•« */
            --grad-pos-y: 20%; /* é€é CSS é—œéµå¹€å‹•ç•« */
        }

        /* æ—¥é–“æ¨¡å¼ç‰¹å®šè¦†è“‹ (é€é JS æ¿€æ´») */
        body.day-mode {
            --bg-color: #f0f8ff; /* æ·ºè—è‰²ä½œç‚ºè¼ƒæ·ºçš„åŸºç¤è‰² */
            --text-color: #333333; /* è¼ƒæ·±çš„æ–‡å­—ç”¨æ–¼å°æ¯” */
            --text-muted-color: #666666; /* æ—¥é–“æ¨¡å¼çš„æŸ”å’Œç°è‰² */
            --surface-color: rgba(var(--glow-rgb), 0.15); /* é¢æ¿çš„è¼ƒæ·ºç™¼å…‰è‰²èª¿ */

            /* æ—¥é–“æ¨¡å¼å¾‘å‘æ¼¸è®Šèª¿æ•´ */
            --bg-radial-start: rgba(var(--glow-rgb), 0.15); /* è¼ƒå¼·çš„ç™¼å…‰èµ·å§‹ */
            --bg-radial-end: rgba(240, 248, 255, 0.9); /* èå…¥æ·ºè‰²èƒŒæ™¯ */
        }

        /* åŸºæœ¬æ¨£å¼ */
        body {
            font-family: 'Noto Sans SC', sans-serif; /* ä¸»è¦å…§å®¹ä½¿ç”¨ Noto Sans SC å­—é«” */
            background-color: var(--bg-color); /* åŸºç¤èƒŒæ™¯è‰² */
            color: var(--text-color);
            transition: background-color 0.5s ease, color 0.5s ease; /* ä¸»é¡Œåˆ‡æ›å¹³æ»‘éæ¸¡ */
            overflow-x: hidden; /* é˜²æ­¢æ°´å¹³æ»¾å‹•æ¢ */
            overflow-y: auto; /* å…è¨±å…§å®¹å‚ç›´æ»¾å‹• */
            opacity: 0;
            animation: fadeIn 1s ease 0.5s forwards;
            position: relative; /* ç”¨æ–¼ç–ŠåŠ å±¤çš„ z-index ä¸Šä¸‹æ–‡ */
        }
        
        .font-pixel { font-family: 'Press Start 2P', cursive; } /* åƒ…å°ç‰¹å®šå…ƒç´ æ‡‰ç”¨åƒç´ å­—é«” */
        .glow-text { color: rgb(var(--glow-light-rgb)); text-shadow: 0 0 8px rgba(var(--glow-rgb), 0.8); }
        .glow-border { 
            border: 1px solid rgba(var(--glow-rgb), 0.4); 
            box-shadow: 0 0 12px rgba(var(--glow-rgb), 0.2), inset 0 0 8px rgba(var(--glow-rgb), 0.15); 
            transition: border-color 0.5s ease, box-shadow 0.5s ease; /* å¹³æ»‘éæ¸¡ */
        }
        
        /* å‹•ç•«ç¶²æ ¼å’Œå¾‘å‘æ¼¸è®ŠèƒŒæ™¯ */
        #grid-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2; /* ä½æ–¼æ‰€æœ‰å…§å®¹ä¹‹ä¸‹ */
            background-image:
                /* å¾‘å‘æ¼¸è®Šç”¨æ–¼å…‰å½±æ•ˆæœ - ç¬¬ä¸€å±¤ */
                radial-gradient(circle at var(--grad-pos-x) var(--grad-pos-y), 
                                var(--bg-radial-start) 0%, 
                                var(--bg-radial-end) 60%),
                /* ç¾æœ‰ç¶²æ ¼ç·š - ç¬¬äºŒå±¤ */
                linear-gradient(rgba(var(--glow-rgb), 0.15) 1px, transparent 1px),
                linear-gradient(90deg, rgba(var(--glow-rgb), 0.15) 1px, transparent 1px);
            background-size: cover, 50px 50px, 50px 50px; /* å¾‘å‘è¦†è“‹ï¼Œç¶²æ ¼ 50px */
            background-repeat: no-repeat, repeat, repeat; /* å¾‘å‘ä¸é‡è¤‡ï¼Œç¶²æ ¼é‡è¤‡ */
            /* å¾‘å‘æ¼¸è®Šç§»å‹•è·¯å¾‘æ›´æ–°ç‚ºæ›´éš¨æ©Ÿå’Œæµæš¢ */
            animation: pan-grid 20s linear infinite, radial-move 60s cubic-bezier(0.4, 0, 0.2, 1) infinite alternate;
            transition: background-image 0.5s ease; /* ä¸»é¡Œé¡è‰²åˆ‡æ›çš„å¹³æ»‘éæ¸¡ */
        }

        /* æƒæç·šç–ŠåŠ  */
        #scanline-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100; /* ä½æ–¼å¤§å¤šæ•¸å…§å®¹ä¹‹ä¸Šï¼Œæ¨¡æ…‹æ¡†ä¹‹ä¸‹ */
            pointer-events: none; /* å…è¨±é»æ“Šç©¿é€ */
            background: linear-gradient(to bottom, rgba(18, 18, 18, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(to bottom, rgba(255, 255, 255, 0.08), rgba(0, 0, 0, 0.08));
            background-size: 100% 4px, 100% 1px;
            animation: scanline-move 10s linear infinite;
        }

        /* æ´¾å…‹æ›¼é ­åƒå®¹å™¨ - å¢å¼·å‹•æ…‹æ•ˆæœ */
        .pacman-container {
            position: relative;
            width: 160px; height: 160px;
            border-radius: 50%; 
            overflow: hidden; 
            transition: box-shadow 0.3s ease; /* å¹³æ»‘ç™¼å…‰éæ¸¡ */
        }
        .pacman-container .profile-image-wrapper {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            overflow: hidden; 
            position: relative; 
            transition: clip-path 0.4s ease-in-out; /* å¹³æ»‘å˜´å·´å‹•ç•« */
            /* åˆå§‹ç‹€æ…‹: å®Œæ•´åœ“å½¢ */
            clip-path: circle(50% at 50% 50%);
        }

        .pacman-container:hover .profile-image-wrapper {
            /* æ‡¸åœæ™‚ï¼Œå‰µå»ºæ´¾å…‹æ›¼å˜´å·´æ•ˆæœ */
            clip-path: polygon(0% 0%, 100% 0%, 100% 40%, 50% 50%, 100% 60%, 100% 100%, 0% 100%);
        }
        
        /* æ‡¸åœæ™‚æ·»åŠ å‹•æ…‹ç™¼å…‰æ•ˆæœ */
        .pacman-container:hover {
            box-shadow: 0 0 30px rgba(var(--glow-rgb), 0.9), inset 0 0 20px rgba(var(--glow-rgb), 0.6); /* æ‡¸åœæ™‚å¼·çƒˆç™¼å…‰ */
        }


        /* ä¸»å®¹å™¨å’Œ UI å…ƒç´  */
        .main-container {
            background-color: var(--surface-color); /* ç¾åœ¨ä½¿ç”¨å‹•æ…‹è¡¨é¢è‰² */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            min-height: 80vh; 
            min-width: 320px; /* ç¢ºä¿å°è¢å¹•çš„æœ€å°å¯¬åº¦ */
            position: relative; /* ç”¨æ–¼æ¨¡å¡Šçš„ z-index ä¸Šä¸‹æ–‡ */
            transition: background-color 0.5s ease; /* ä¸»é¡Œåˆ‡æ›å¹³æ»‘éæ¸¡ */
            border-radius: 1rem; /* æ›´åœ“æ½¤çš„ç¾ä»£ç§‘æŠ€æ„Ÿ */
        }
        .ui-module { 
            transition: all 0.5s; 
            opacity: 0; 
            transform: translateY(20px); 
            animation: module-boot 0.5s ease forwards; 
            min-height: 150px; 
            background-color: rgba(var(--glow-rgb), 0.05); /* åŸºæ–¼ä¸»é¡Œçš„å¾®å¦™æ¨¡å¡ŠèƒŒæ™¯ */
            border-left: 3px solid rgba(var(--glow-rgb), 0.5); /* å·¦å´é‚Šæ¡†ä¹ŸåŸºæ–¼ä¸»é¡Œ */
            transition: background-color 0.5s ease, border-left-color 0.5s ease; /* å¹³æ»‘éæ¸¡ */
            border-radius: 0.75rem; /* æ¨¡å¡Šä¸€è‡´çš„åœ“è§’ */
            box-shadow: 0 4px 15px rgba(var(--glow-rgb), 0.1); /* æ›´æ˜é¡¯çš„å¾®å¦™é™°å½± */
        }
        .list-pellet li::before {
            content: 'â€¢';
            color: rgb(var(--glow-light-rgb));
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
            animation: pellet-glow 1.5s infinite alternate;
        }

        /* æ¨¡æ…‹æ¡† */
        .modal-overlay { background-color: rgba(0,0,0,0.7); backdrop-filter: blur(4px); z-index: 1000; } /* ç¢ºä¿æ¨¡æ…‹æ¡†ä½æ–¼é ‚éƒ¨ */
        .modal-content-base {
            background-color: var(--surface-color); /* æ¨¡æ…‹æ¡†ä¹Ÿä½¿ç”¨å‹•æ…‹è¡¨é¢è‰² */
            transition: background-color 0.5s ease; /* å¹³æ»‘éæ¸¡ */
            border-radius: 1rem; /* æ¨¡æ…‹æ¡†ä¸€è‡´çš„åœ“è§’ */
        }


        /* å‹•ç•« */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes pan-grid { from { background-position: 0 0; } to { background-position: -50px -50px; } }
        @keyframes scanline-move { from { background-position: 0 0; } to { background-position: 0 100%; } }
        @keyframes pellet-glow { from { text-shadow: 0 0 2px; } to { text-shadow: 0 0 10px rgba(var(--glow-light-rgb), 1); } }
        @keyframes module-boot { to { opacity: 1; transform: translateY(0); } }
        /* æ–°å¢: å¾‘å‘æ¼¸è®Šç§»å‹•å‹•ç•« - æ›´è¤‡é›œçš„è·¯å¾‘ä»¥å¯¦ç¾éš¨æ©Ÿæ€§ */
        @keyframes radial-move {
            0% { --grad-pos-x: 10%; --grad-pos-y: 10%; }
            16% { --grad-pos-x: 90%; --grad-pos-y: 20%; }
            32% { --grad-pos-x: 30%; --grad-pos-y: 90%; }
            48% { --grad-pos-x: 70%; --grad-pos-y: 40%; }
            64% { --grad-pos-x: 20%; --grad-pos-y: 80%; }
            80% { --grad-pos-x: 50%; --grad-pos-y: 15%; }
            100% { --grad-pos-x: 10%; --grad-pos-y: 10%; }
        }

        /* è‡ªå®šç¾©æ»¾å‹•æ¢ */
        .record-scrollbar::-webkit-scrollbar { width: 8px; }
        .record-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .record-scrollbar::-webkit-scrollbar-thumb { background: rgba(var(--glow-rgb), 0.5); border-radius: 4px; }
        .record-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(var(--glow-rgb), 0.8); }

        /* å…”å­æ¨£å¼ */
        #wandering-rabbit {
            position: fixed;
            width: 72px; 
            height: 72px; 
            z-index: 90; 
            pointer-events: none;
            fill: rgb(var(--glow-light-rgb)); 
            filter: drop-shadow(0 0 15px rgba(var(--glow-rgb), 0.8));
        }
        .rabbit-dropping {
            position: absolute;
            width: 6px; 
            height: 6px;
            background-color: #4a2c2a; 
            border-radius: 1px; 
            transform: scale(1);
            opacity: 1;
            transition: transform 2s ease-out, opacity 2s ease-out; 
            z-index: 89; 
            pointer-events: none; 
            box-shadow: 0 0 2px rgba(0,0,0,0.5); 
        }
        .rabbit-dropping.fade-out {
            transform: scale(0.2);
            opacity: 0;
        }

        /* ç¢ºä¿ä¸»å®¹å™¨å±…ä¸­ä¸¦ä½”ç”¨é©ç•¶å¯¬åº¦ */
        .flex.items-center.justify-center.min-h-screen.p-4 {
            align-items: flex-start; /* é ‚éƒ¨å°é½Šä»¥æ›´å¥½åœ°åˆ©ç”¨å‚ç›´ç©ºé–“ */
            padding-top: 2rem; /* æ·»åŠ ä¸€äº›é ‚éƒ¨å…§é‚Šè· */
            padding-bottom: 2rem; /* æ·»åŠ ä¸€äº›åº•éƒ¨å…§é‚Šè· */
        }
        /* ä¸»å…§å®¹çš„ flex æ“´å±•ä»¥å¡«å……å¯ç”¨ç©ºé–“ */
        .lg\\:col-span-1.p-6.flex.flex-col.space-y-8, .lg\\:col-span-2.p-6.space-y-6 {
            flex-grow: 1;
        }

        /* æ›´æ–°æ—¥èªŒæ¢ç›®æ¨£å¼ */
        .changelog-entry {
            padding: 1rem; /* p-4 */
            border-radius: 0.5rem; /* rounded-lg */
            margin-bottom: 1rem; /* mb-4 */
            background-color: rgba(var(--glow-rgb), 0.1); /* bg-gray-800 ç­‰æ•ˆï¼Œä½†å‹•æ…‹ */
            border: 1px solid rgba(var(--glow-rgb), 0.4); /* border-gray-700 ç­‰æ•ˆï¼Œä½†å‹•æ…‹ */
            box-shadow: 0 2px 8px rgba(var(--glow-rgb), 0.1); /* å¾®å¦™é™°å½± */
            transition: all 0.3s ease; /* ä¸»é¡Œåˆ‡æ›å¹³æ»‘éæ¸¡ */
        }

        .changelog-entry ul {
            list-style: none; /* ç§»é™¤é è¨­é …ç›®ç¬¦è™Ÿ */
            padding-left: 1.5em; /* ç‚ºè‡ªå®šç¾©é …ç›®ç¬¦è™Ÿç¸®é€² */
        }

        .changelog-entry li::before {
            content: 'â˜… '; /* æ›´æ–°æ—¥èªŒçš„è‡ªå®šç¾©æ˜Ÿè™Ÿé …ç›®ç¬¦è™Ÿ */
            color: rgb(var(--glow-light-rgb)); /* ä½¿ç”¨ç™¼å…‰è‰² */
            font-weight: bold;
            display: inline-block;
            width: 1.5em; /* æ˜Ÿè™Ÿçš„ç©ºé–“ */
            margin-left: -1.5em;
        }
        /* å¾å…¨å±€æ›´æ–°æ—¥èªŒåˆ—è¡¨ä¸­ç§»é™¤å½ˆä¸¸æ¨£å¼ï¼ˆå¦‚æœå·²å…¨å±€æ‡‰ç”¨ï¼‰ */
        #changelog-list.list-pellet li::before {
            content: none; /* è¦†è“‹ä»¥åœ¨æ­¤è™•ç§»é™¤å…¨å±€å½ˆä¸¸ */
        }

    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div id="grid-background"></div>
    <!-- éŠèµ°å…”è§’è‰² -->
    <div id="wandering-rabbit">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8" fill="currentColor">
            <rect x="1" y="0" width="1" height="1"/><rect x="3" y="0" width="1" height="1"/>
            <rect x="0" y="1" width="1" height="1"/><rect x="4" y="1" width="1" height="1"/>
            <rect x="0" y="2" width="1" height="1"/><rect x="6" y="2" width="1" height="1"/>
            <rect x="0" y="3" width="1" height="1"/><rect x="6" y="3" width="1" height="1"/>
            <rect x="0" y="4" width="1" height="1"/><rect x="6" y="4" width="1" height="1"/>
            <rect x="2" y="2" width="1" height="1"/><rect x="3" y="2" width="1" height="1"/>
            <rect x="2" y="3" width="1" height="1"/><rect x="3" y="3" width="1" height="1"/>
            <rect x="1" y="5" width="1" height="1"/><rect x="2" y="5" width="1" height="1"/>
            <rect x="3" y="5" width="1" height="1"/><rect x="4" y="5" width="1" height="1"/><rect x="5" y="5" width="1" height="1"/>
        </svg>
    </div>
    <div id="scanline-overlay"></div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="main-container w-full max-w-7xl rounded-2xl shadow-2xl overflow-hidden transition-all duration-500 glow-border">
        <!-- é çœ‰ -->
        <div class="px-4 py-2 flex items-center justify-between border-b" style="border-color: rgba(var(--glow-rgb), 0.3)">
            <!-- æ›´æ–°æ¨™é¡Œæ–‡å­—ä»¥æ¨¡ä»¿çµ‚ç«¯æç¤ºç¬¦ -->
            <p class="font-pixel text-xs sm:text-sm tracking-widest glow-text">BCC_SYS_v8.0.4_TRON <span style="font-size: 0.75em;">CANGUROMIO_BCC@ARCHIVE:~$</span></p>
            <!-- æ§åˆ¶æŒ‰éˆ•ï¼ˆç¾åœ¨ä½¿ç”¨ ID å’Œ programmatically ç¶å®šäº‹ä»¶ï¼‰ -->
            <div class="flex items-center space-x-3 text-gray-400">
                <button id="changelog-btn" title="æ›´æ–°æ—¥èªŒ" class="transition-colors hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg></button>
                <button id="theme-btn" title="è‰²å½©å¾ªç’°" class="transition-colors hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" /></svg></button>
                <button id="performance-btn" title="æ€§èƒ½ç›£æ§" class="transition-colors hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg></button>
                <button id="fullscreen-btn" title="å…¨è¢å¹•" class="transition-colors hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 0l-5-5" /></svg></button>
            </div>
        </div>

        <!-- ä¸»å…§å®¹ç¶²æ ¼ -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 p-6">
            <!-- å·¦å´é¢æ¿ -->
            <div class="lg:col-span-1 p-6 flex flex-col space-y-8 ui-module" style="animation-delay: 0.2s;">
                <div class="text-center">
                    <div class="pacman-container mx-auto glow-border">
                        <div class="profile-image-wrapper">
                            <img id="profile-pic" src="./dist/Bunny CC_Profile.JPG" 
                                 onerror="this.onerror=null; this.src='https://placehold.co/160x160/010409/22d3ee?text=Error';"
                                 class="w-full h-full object-cover">
                        </div>
                    </div>
                    <h1 class="font-pixel text-2xl font-bold mt-4 glow-text">BUNNY CC</h1>
                    <p class="text-sm font-pixel" style="color: var(--text-muted-color)">ID: B-20240312</p>
                </div>
                <div class="ui-module" style="animation-delay: 0.4s;">
                    <h2 class="font-pixel text-base pb-2 mb-4 glow-text" style="border-bottom: 1px solid rgba(var(--glow-rgb), 0.3)">é‡Œç¨‹ç¢‘</h2>
                    <div id="timing" class="space-y-2 text-sm whitespace-pre-line leading-relaxed list-pellet" style="color: var(--text-muted-color)"></div>
                </div>
            </div>

            <!-- å³å´é¢æ¿ -->
            <div class="lg:col-span-2 p-6 space-y-6">
                <div class="ui-module" style="animation-delay: 0.6s;">
                    <h2 class="font-pixel text-base pb-2 mb-4 glow-text" style="border-bottom: 1px solid rgba(var(--glow-rgb), 0.3)">é«”é‡è»Œè·¡</h2>
                    <div class="h-64"><canvas id="weightChart"></canvas></div>
                    <div id="weight-change-info" class="mt-4 text-center p-3 rounded-lg h-12 flex items-center justify-center text-sm" style="background-color: rgba(var(--glow-rgb), 0.05); border: 1px solid rgba(var(--glow-rgb), 0.2)"></div>
                </div>
                <div class="ui-module" style="animation-delay: 0.8s;">
                    <h2 class="font-pixel text-base pb-2 mb-4 glow-text" style="border-bottom: 1px solid rgba(var(--glow-rgb), 0.3)">æ•¸æ“šæµ</h2>
                    <div id="all-records-container" class="record-scrollbar h-56 overflow-y-auto pr-2 space-y-3 text-sm"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- æ¨¡æ…‹æ¡† -->
    <div id="changelog-modal" class="modal-overlay fixed inset-0 z-50 hidden items-center justify-center">
        <div class="main-container glow-border w-11/12 max-w-2xl modal-content-base" onclick="event.stopPropagation()">
            <h2 class="font-pixel text-lg p-4 glow-text border-b" style="border-color:rgba(var(--glow-rgb), 0.3)">æ›´æ–°æ—¥èªŒ</h2>
            <div class="p-6 max-h-[70vh] overflow-y-auto record-scrollbar" id="changelog-list">
                <!-- æ›´æ–°æ—¥èªŒå…§å®¹å°‡ç”± JavaScript å¡«å…… -->
            </div>
            <!-- æ¨¡æ…‹æ¡†é—œé–‰æŒ‰éˆ• -->
            <button id="changelog-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
        </div>
    </div>
    <div id="theme-modal" class="modal-overlay fixed inset-0 z-50 hidden items-center justify-center">
        <div class="main-container glow-border w-11/12 max-w-md modal-content-base" onclick="event.stopPropagation()">
            <h2 class="font-pixel text-lg p-4 glow-text border-b" style="border-color:rgba(var(--glow-rgb), 0.3)">è‰²å½©å¾ªç’°</h2>
            <div id="theme-grid" class="p-6 grid grid-cols-3 sm:grid-cols-4 gap-4"></div>
            <div class="flex justify-between p-4 border-t" style="border-color:rgba(var(--glow-rgb), 0.3)">
                <button id="prev-theme-page-btn" class="px-4 py-2 rounded-md font-bold text-white transition-colors duration-200" style="background-color: rgb(var(--glow-rgb)); hover:background-color: rgba(var(--glow-rgb), 0.8);">ä¸Šä¸€é </button>
                <button id="next-theme-page-btn" class="px-4 py-2 rounded-md font-bold text-white transition-colors duration-200" style="background-color: rgb(var(--glow-rgb)); hover:background-color: rgba(var(--glow-rgb), 0.8);">ä¸‹ä¸€é </button>
            </div>
            <!-- æ¨¡æ…‹æ¡†é—œé–‰æŒ‰éˆ• -->
            <button id="theme-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
        </div>
    </div>
    <div id="performance-modal" class="modal-overlay fixed inset-0 z-50 hidden items-center justify-center">
        <div class="main-container glow-border w-11/12 max-w-lg modal-content-base" onclick="event.stopPropagation()">
            <h2 class="font-pixel text-lg p-4 glow-text border-b" style="border-color:rgba(var(--glow-rgb), 0.3)">æ€§èƒ½ç›£æ§</h2>
            <div class="p-6 max-h-[70vh] overflow-y-auto record-scrollbar" id="performance-metrics">
                <p class="text-sm" style="color: var(--text-muted-color);">æ¿€æ´»æ„Ÿæ‡‰å™¨é™£åˆ—ä»¥ç²å–å¯¦æ™‚æŒ‡æ¨™ã€‚</p>
                <!-- æŒ‰éˆ•ç¾åœ¨ä½¿ç”¨ ID ä¸¦ programmatically ç¶å®šäº‹ä»¶ -->
                <button id="activate-sensor-btn" class="mt-4 px-4 py-2 rounded-md font-bold text-white transition-colors duration-200" style="background-color: rgb(var(--glow-rgb)); hover:background-color: rgba(var(--glow-rgb), 0.8);">æ¿€æ´»æ„Ÿæ‡‰å™¨é™£åˆ—</button>
                <div id="performance-data-output" class="mt-4 space-y-2 text-sm" style="color: var(--text-color);"></div>
                <p class="text-xs mt-4 text-red-400">æ³¨æ„: ç”±æ–¼å®‰å…¨å”è­°ï¼Œç„¡æ³•ç›´æ¥è¨ªå• CPU/GPU åˆ©ç”¨ç‡å’Œå…¬å…± IPã€‚</p>
            </div>
            <!-- æ¨¡æ…‹æ¡†é—œé–‰æŒ‰éˆ• -->
            <button id="performance-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
        </div>
    </div>

    <script>
        // --- é…ç½® ---
        const CONFIG = {
            PROFILE_PIC_PATH: './dist/Bunny CC_Profile.JPG', // Path for profile picture
            // Changed to a relative path for a static asset. 
            // If you want to use the uploaded file, change this back to 'uploaded:PetRecords.json'
            PET_RECORDS_FETCH_ID: './dist/bunnycc/PetRecords.json', 
            START_DATE: '2024/03/12 00:00:00', // Anniversary timer start date
            // Extended THEMES array to 56 unique color schemes
            THEMES: [
                { name: 'é’è‰²', rgb: '34, 211, 238', light_rgb: '103, 232, 249'},
                { name: 'å“ç´…', rgb: '244, 114, 182', light_rgb: '249, 168, 212'},
                { name: 'æª¸æª¬ç¶ ', rgb: '132, 204, 22', light_rgb: '163, 230, 53'},
                { name: 'æ©™è‰²', rgb: '249, 115, 22', light_rgb: '251, 146, 60'},
                { name: 'é»ƒè‰²', rgb: '251, 191, 36', light_rgb: '252, 211, 77'},
                { name: 'ç´…è‰²', rgb: '239, 68, 68', light_rgb: '248, 113, 113'},
                { name: 'é›è—', rgb: '88, 86, 214', light_rgb: '129, 140, 248'},
                { name: 'ç¶ è‰²', rgb: '34, 197, 94', light_rgb: '74, 222, 128'},
                { name: 'ç™½è‰²', rgb: '229, 231, 235', light_rgb: '243, 244, 246'},
                { name: 'ç´«è‰²', rgb: '168, 85, 247', light_rgb: '192, 132, 252'},
                { name: 'é‡‘è‰²', rgb: '255, 215, 0', light_rgb: '255, 228, 77'},
                { name: 'æ°´é´¨è‰²', rgb: '0, 128, 128', light_rgb: '0, 168, 168'},
                { name: 'çŠç‘šç´…', rgb: '255, 127, 80', light_rgb: '255, 160, 122'},
                { name: 'å¤©è—è‰²', rgb: '135, 206, 235', light_rgb: '173, 216, 230'},
                { name: 'ç«ç‘°è‰²', rgb: '255, 0, 127', light_rgb: '255, 51, 153'},
                { name: 'é›»å…‰è—', rgb: '125, 249, 255', light_rgb: '173, 255, 255'},
                { name: 'æ·±ç²‰ç´…', rgb: '255, 20, 147', light_rgb: '255, 105, 180'},
                { name: 'æ˜¥ç¶ ', rgb: '0, 255, 127', light_rgb: '127, 255, 212'},
                { name: 'ç«æ©™è‰²', rgb: '255, 87, 51', light_rgb: '255, 139, 90'},
                { name: 'ç´«ç¾…è˜­', rgb: '238, 130, 238', light_rgb: '221, 160, 221'},
                { name: 'æ£®æ—ç¶ ', rgb: '34, 139, 34', light_rgb: '60, 179, 113'},
                { name: 'å¯¶è—è‰²', rgb: '65, 105, 225', light_rgb: '100, 149, 237'},
                { name: 'ç†±ç²‰ç´…', rgb: '255, 105, 180', light_rgb: '255, 140, 200'},
                { name: 'é‡‘é»ƒè‰²', rgb: '218, 165, 32', light_rgb: '255, 193, 7'},
                { name: 'æ·±è˜­èŠ±ç´«', rgb: '153, 50, 204', light_rgb: '186, 85, 211'},
                { name: 'è–„è·ç¶ ', rgb: '152, 255, 152', light_rgb: '192, 255, 192'},
                { name: 'çŸ³è‹±ç²‰', rgb: '232, 173, 192', light_rgb: '240, 200, 210'},
                { name: 'åˆå¤œè—', rgb: '25, 25, 112', light_rgb: '65, 105, 225'},
                { name: 'ç¥ç€é‡‘', rgb: '255, 191, 0', light_rgb: '255, 215, 0'},
                { name: 'æ¹–è—è‰²', rgb: '0, 139, 139', light_rgb: '0, 191, 191'},
                // Additional 26 themes to reach 56
                { name: 'è”šè—è‰²', rgb: '42, 82, 190', light_rgb: '64, 130, 250'},
                { name: 'æ·±ç´…', rgb: '220, 20, 60', light_rgb: '255, 99, 71'},
                { name: 'æš—æ¿å²©ç°', rgb: '47, 79, 79', light_rgb: '95, 158, 160'},
                { name: 'æ·±ç´«ç¾…è˜­', rgb: '148, 0, 211', light_rgb: '186, 85, 211'},
                { name: 'é“å¥‡è—', rgb: '30, 144, 255', light_rgb: '65, 105, 225'},
                { name: 'ç«ç£šç´…', rgb: '178, 34, 34', light_rgb: '220, 20, 60'},
                { name: 'ç´«ç´…è‰²', rgb: '255, 0, 255', light_rgb: '255, 105, 180'},
                { name: 'ä¸­æ˜¥ç¶ ', rgb: '0, 250, 154', light_rgb: '127, 255, 212'},
                { name: 'æµ·è»è—', rgb: '0, 0, 128', light_rgb: '70, 130, 180'},
                { name: 'æ©„æ¬–è¤', rgb: '107, 142, 35', light_rgb: '154, 205, 50'},
                { name: 'æ©˜ç´…è‰²', rgb: '255, 69, 0', light_rgb: '255, 99, 71'},
                { name: 'æ·¡ç´«ç¾…è˜­ç´…', rgb: '219, 112, 147', light_rgb: '255, 182, 193'},
                { name: 'ç§˜é­¯è‰²', rgb: '205, 133, 63', light_rgb: '244, 164, 96'},
                { name: 'ç²‰è—è‰²', rgb: '176, 224, 230', light_rgb: '204, 235, 240'},
                { name: 'æµ·ç¶ è‰²', rgb: '46, 139, 87', light_rgb: '60, 179, 113'},
                { name: 'çŸ³æ¿è—', rgb: '106, 90, 205', light_rgb: '123, 104, 238'},
                { name: 'ç•ªèŒ„ç´…', rgb: '255, 99, 71', light_rgb: '255, 128, 96'},
                { name: 'ç¶ æ¾çŸ³', rgb: '64, 224, 208', light_rgb: '128, 240, 220'},
                { name: 'æš—é®­é­šè‰²', rgb: '233, 150, 122', light_rgb: '255, 160, 122'},
                { name: 'æ·±å¤©è—', rgb: '0, 191, 255', light_rgb: '135, 206, 250'},
                { name: 'ä¸­æµ·è—', rgb: '102, 205, 170', light_rgb: '127, 255, 212'},
                { name: 'ä¸­æµ·ç¶ ', rgb: '60, 179, 113', light_rgb: '84, 198, 140'},
                { name: 'ä¸­çŸ³æ¿è—', rgb: '123, 104, 238', light_rgb: '150, 135, 250'},
                { name: 'é‹¼éµè—', rgb: '70, 130, 180', light_rgb: '100, 149, 237'},
                { name: 'æš—é‡‘é»ƒè‰²', rgb: '184, 134, 11', light_rgb: '218, 165, 32'},
                { name: 'è»è—è‰²', rgb: '95, 158, 160', light_rgb: '120, 180, 180'}
            ],
            THEMES_PER_PAGE: 8 // Number of themes to display per page (8*7 pages for 56 themes)
        };

        // --- Global State and UI Elements ---
        let weightChart = null; // Chart.js instance
        let allRecordsData = []; // Stores all parsed pet records
        let weightChartData = []; // Stores filtered weight records for the chart
        let currentThemePage = 0; // Current page index for themes

        // Rabbit animation variables
        let wanderingRabbit; 
        const droppingsPool = [];
        const MAX_DROPPINGS = 70; 
        let currentDroppingIndex = 0;
        let lastDropTime = 0;
        let targetX, targetY, currentX, currentY; 
        let animationSpeedMultiplier = 1; // Animation speed multiplier for Safari optimization
        let DROP_INTERVAL_MS = 150; // Interval for dropping "chocolate beans"

        /**
         * Toggles the display state of a modal element.
         * @param {string} modalId - The ID of the modal element to toggle.
         */
        function toggleModal(modalId) {
            console.log(`[DEBUG] Attempting to toggle modal: ${modalId}`);
            const modal = document.getElementById(modalId);
            if (modal) {
                const isHidden = modal.classList.contains('hidden');
                modal.classList.toggle('hidden', !isHidden);
                modal.classList.toggle('flex', isHidden); // Add flex when showing

                // Only display performance metrics when the performance modal is shown
                if (modalId === 'performance-modal' && isHidden) { 
                    displayPerformanceMetrics(); // Call function
                }
                // When the theme modal is shown, regenerate theme swatches to ensure correct pagination
                if (modalId === 'theme-modal' && isHidden) {
                    currentThemePage = 0; // Reset to the first page
                    generateThemeSwatches();
                }
            } else {
                console.error(`[ERROR] Modal with ID '${modalId}' not found during toggleModal execution.`);
            }
        }

        /**
         * Toggles the document's fullscreen mode.
         */
        function toggleFullscreen() {
            console.log("[DEBUG] Attempting to toggle fullscreen.");
            const docEl = document.documentElement;
            if (!document.fullscreenElement) {
                docEl.requestFullscreen().catch(err => console.error(`[ERROR] Failed to enter fullscreen: ${err.message}`));
            } else {
                document.exitFullscreen().catch(err => console.error(`[ERROR] Failed to exit fullscreen: ${err.message}`));
            }
        }

        /**
         * Displays browser performance metrics in the performance modal.
         */
        function displayPerformanceMetrics() {
            console.log("[DEBUG] Displaying performance metrics.");
            const performanceDataOutput = document.getElementById('performance-data-output');
            if (!performanceDataOutput) {
                console.error("[ERROR] Performance data output element not found for display.");
                return;
            }

            let outputHtml = '<h3>Current Performance Data:</h3>';

            // Memory usage (non-standard, primarily for Chrome)
            if (window.performance && window.performance.memory) {
                const memory = window.performance.memory;
                outputHtml += `<p><strong>JS Heap Used:</strong> ${(memory.usedJSHeapSize / (1024 * 1024)).toFixed(2)} MB</p>`;
                outputHtml += `<p><strong>Total JS Heap:</strong> ${(memory.totalJSHeapSize / (1024 * 1024)).toFixed(2)} MB</p>`;
                outputHtml += `<p><strong>JS Heap Limit:</strong> ${(memory.jsHeapSizeLimit / (1024 * 1024)).toFixed(2)} MB</p>`;
            } else {
                outputHtml += `<p><em>Performance.memory API not available.</em></p>`;
            }

            // Navigation Timing API
            if (window.performance && window.performance.getEntriesByType) {
                const navTiming = performance.getEntriesByType("navigation")[0];
                if (navTiming) {
                    outputHtml += `<h3>Page Load Times:</h3>`;
                    outputHtml += `<p><strong>DOM Content Loaded:</strong> ${(navTiming.domContentLoadedEventEnd - navTiming.domContentLoadedEventStart).toFixed(2)} ms</p>`;
                    outputHtml += `<p><strong>Total Load Time:</strong> ${(navTiming.loadEventEnd - navTiming.startTime).toFixed(2)} ms</p>`;
                    outputHtml += `<p><strong>DNS Resolution:</strong> ${(navTiming.domainLookupEnd - navTiming.domainLookupStart).toFixed(2)} ms</p>`;
                    outputHtml += `<p><strong>TCP Handshake:</strong> ${(navTiming.connectEnd - navTiming.connectStart).toFixed(2)} ms</p>`;
                    outputHtml += `<p><strong>Request-Response Latency:</strong> ${(navTiming.responseEnd - navTiming.requestStart).toFixed(2)} ms</p>`;
                }
            } else {
                outputHtml += `<p><em>Performance Timing API not available.</em></p>`;
            }

            // Network Information API (experimental, not supported by all browsers)
            if (navigator.connection) {
                const connection = navigator.connection;
                outputHtml += `<h3>Network Subsystem Info:</h3>`;
                outputHtml += `<p><strong>Effective Type:</strong> ${connection.effectiveType || 'N/A'}</p>`;
                outputHtml += `<p><strong>Round Trip Time (RTT):</strong> ${connection.rtt || 'N/A'} ms</p>`;
                outputHtml += `<p><strong>Downlink Bandwidth:</strong> ${connection.downlink || 'N/A'} Mbps</p>`;
                outputHtml += `<p><strong>Data Saver Mode:</strong> ${connection.saveData ? 'Enabled' : 'Disabled'}</p>`;
            } else {
                outputHtml += `<p><em>Network Information API not available.</em></p>`;
            }

            // Hardware Concurrency (number of CPU cores)
            if (navigator.hardwareConcurrency) {
                outputHtml += `<h3>Hardware Subsystem Info:</h3>`;
                outputHtml += `<p><strong>Processor Cores:</strong> ${navigator.hardwareConcurrency}</p>`;
            } else {
                outputHtml += `<p><em>Processor core count not detectable.</em></p>`;
            }

            // Device Memory (experimental)
            if (navigator.deviceMemory) {
                outputHtml += `<p><strong>System Memory (Approx.):</strong> ${navigator.deviceMemory} GB</p>`;
            } else {
                outputHtml += `<p><em>System memory not detectable.</em></p>`;
            }

            // Browser User Agent and OS (from navigator.userAgent)
            outputHtml += `<h3>Browser and OS Diagnostics:</h3>`;
            if (navigator && navigator.userAgent) {
                outputHtml += `<p><strong>User Agent (UA):</strong> ${navigator.userAgent}</p>`;
                let os = "Unknown";
                if (navigator.userAgent.includes("Win")) os = "Windows";
                else if (navigator.userAgent.includes("Mac")) os = "macOS";
                else if (navigator.userAgent.includes("Linux")) os = "Linux";
                else if (navigator.userAgent.includes("Android")) os = "Android";
                else if (navigator.userAgent.includes("iPad")) os = "iPadOS";
                else if (navigator.userAgent.includes("iPhone")) os = "iOS";
                outputHtml += `<p><strong>Operating System (Estimated):</strong> ${os}</p>`;
            } else {
                outputHtml += `<p><em>User Agent information not accessible.</em></p>`;
            }
            
            performanceDataOutput.innerHTML = outputHtml;
        }


        /**
         * Changes the overall theme of the application based on RGB values.
         * This function now also updates the background radial gradient colors.
         * @param {Object} theme - An object containing the theme's RGB and light_rgb values.
         */
        function changeTheme(theme) {
            console.log(`[DEBUG] Changing theme to: ${theme.name}`);
            const docEl = document.documentElement;
            docEl.style.setProperty('--glow-rgb', theme.rgb);
            docEl.style.setProperty('--glow-light-rgb', theme.light_rgb);

            // Dynamically set background radial gradient colors, based on theme and day/night mode
            const isDayMode = document.body.classList.contains('day-mode');
            const currentBgColor = getComputedStyle(docEl).getPropertyValue('--bg-color');
            let baseBgColorRgb;
            // Attempt to parse base background color
            const match = currentBgColor.match(/\d+/g);
            if (match && match.length >= 3) {
                baseBgColorRgb = [parseInt(match[0]), parseInt(match[1]), parseInt(match[2])];
            } else {
                // Fallback to default dark/light if parsing fails
                baseBgColorRgb = isDayMode ? [240, 248, 255] : [1, 4, 9]; 
            }
            
            const radialStartAlpha = isDayMode ? 0.15 : 0.08;
            const radialEndAlpha = 0.9; 
            
            docEl.style.setProperty('--bg-radial-start', `rgba(${theme.rgb}, ${radialStartAlpha})`);
            docEl.style.setProperty('--bg-radial-end', `rgba(${baseBgColorRgb.join(', ')}, ${radialEndAlpha})`);

            // Also update the surface color for panels and modals based on the new theme's glow color
            const surfaceAlpha = isDayMode ? 0.15 : 0.08;
            docEl.style.setProperty('--surface-color', `rgba(${theme.rgb}, ${surfaceAlpha})`);


            // If the chart exists, re-render the chart to apply new colors
            if (weightChart) {
                renderWeightChart(); 
            }
        }

        /**
         * Generates and appends theme color swatches to the theme modal.
         * Implements pagination for themes.
         */
        function generateThemeSwatches() {
            console.log("[DEBUG] Generating theme swatches.");
            const themeGrid = document.getElementById('theme-grid');
            const prevBtn = document.getElementById('prev-theme-page-btn');
            const nextBtn = document.getElementById('next-theme-page-btn');

            if (!themeGrid || !prevBtn || !nextBtn) {
                console.error("[ERROR] Theme grid or pagination buttons not found for swatch generation.");
                return;
            }

            themeGrid.innerHTML = ''; // Clear previous swatches

            const startIndex = currentThemePage * CONFIG.THEMES_PER_PAGE;
            const endIndex = startIndex + CONFIG.THEMES_PER_PAGE;
            const themesToShow = CONFIG.THEMES.slice(startIndex, endIndex);

            themesToShow.forEach(theme => {
                const swatch = document.createElement('button');
                swatch.className = "h-12 w-full rounded-md transition-all duration-200 hover:scale-110 hover:shadow-lg focus:ring-2 ring-offset-2";
                swatch.style.backgroundColor = `rgb(${theme.rgb})`;
                swatch.style.boxShadow = `0 0 15px rgba(${theme.rgb}, 0.5)`;
                swatch.style.ringColor = `rgb(${theme.rgb})`;
                swatch.style.ringOffsetColor = `var(--bg-color)`;
                swatch.title = theme.name;
                swatch.addEventListener('click', () => changeTheme(theme));
                themeGrid.appendChild(swatch);
            });

            // Update pagination button states
            prevBtn.disabled = currentThemePage === 0;
            nextBtn.disabled = endIndex >= CONFIG.THEMES.length;

            console.log("[DEBUG] Theme swatches generated for page", currentThemePage);
        }
        
        // --- Data and Timing Logic ---
        /**
         * Updates the anniversary timer display.
         */
        function updateTiming() {
            const timingElement = document.getElementById('timing');
            if (!timingElement) {
                console.warn("[WARN] UI element 'timing' not found for updateTiming. Skipping.");
                return;
            }

            const start = new Date(CONFIG.START_DATE);
            const now = new Date();
            const elapsedMs = now.getTime() - start.getTime();

            const elapsedDays = (elapsedMs / (1000 * 60 * 60 * 24)).toFixed(3);
            const totalSeconds = Math.floor(elapsedMs / 1000);
            const elapsedHours = Math.floor(totalSeconds / 3600);
            const elapsedMinutes = Math.floor((totalSeconds % 3600) / 60);
            const elapsedSeconds = totalSeconds % 60;
            
            const formatDate = (d) => `${d.getFullYear()}-${(d.getMonth() + 1).toString().padStart(2, '0')}-${d.getDate().toString().padStart(2, '0')}`;
            
            // Helper function: get next anniversary date based on fixed day intervals
            const getNextAnniversary = (baseDate, days) => {
                let count = 0, nextDate;
                do { 
                    count++; 
                    nextDate = new Date(baseDate.getTime() + count * days * 24 * 60 * 60 * 1000); 
                } while (nextDate < now);
                return { date: nextDate, count };
            };
            
            // Helper function: get next yearly anniversary date
            const getNextYearly = (baseDate) => {
                let count = 0, nextDate;
                do { 
                    count++; 
                    nextDate = new Date(baseDate); 
                    nextDate.setFullYear(baseDate.getFullYear() + count); 
                } while (nextDate < now);
                return { date: nextDate, count };
            };
            
            const next100 = getNextAnniversary(new Date(CONFIG.START_DATE), 100);
            const next180 = getNextAnniversary(new Date(CONFIG.START_DATE), 180);
            const next300 = getNextAnniversary(new Date(CONFIG.START_DATE), 300);
            const nextYear = getNextYearly(new Date(CONFIG.START_DATE));
            
            timingElement.innerHTML = `<ul>
                <li>Bunny CC å·²èˆ‡å¾ç­‰å…±åº¦ ${elapsedDays} å¤ªé™½é€±æœŸã€‚</li>
                <li>ä¸‹å€‹ç™¾å¹´æ¨™è¨˜: ${formatDate(next100.date)} (é€±æœŸ ${next100.count})ã€‚</li>
                <li>ä¸‹å€‹ 180 æ—¥æ¨™è¨˜: ${formatDate(next180.date)} (é€±æœŸ ${next180.count})ã€‚</li>
                <li>ä¸‹å€‹ 300 æ—¥æ¨™è¨˜: ${formatDate(next300.date)} (é€±æœŸ ${next300.count})ã€‚</li>
                <li>ä¸‹å€‹æ˜Ÿè¾°å¹´æ¨™è¨˜: ${formatDate(nextYear.date)} (ç¬¬ ${nextYear.count} å¹´)ã€‚</li>
                <li>é€å»æ™‚å…‰: ${elapsedHours}æ™‚ ${elapsedMinutes}åˆ† ${elapsedSeconds}ç§’ã€‚</li>
            </ul>`;
        }
        
        /**
         * Loads pet records from a JSON file and processes them for display and charting.
         * Now uses standard fetch for a relative path with enhanced error handling.
         */
        async function loadAndProcessData() {
            console.log("[DEBUG] Starting data load and processing.");
            const allRecordsContainer = document.getElementById('all-records-container');
            if (!allRecordsContainer) {
                console.error("[ERROR] All records container element not found for data loading.");
                return;
            }

            // Display loading message
            allRecordsContainer.innerHTML = `<p class="text-center text-xl" style="color: var(--text-muted-color);">Initiating pet archive retrieval... stand by.</p>`;

            try {
                const response = await fetch(CONFIG.PET_RECORDS_FETCH_ID);
                if (!response.ok) {
                    const errorResponseText = await response.text();
                    throw new Error(`HTTP error! Status: ${response.status} (${response.statusText}). Could not load data from '${CONFIG.PET_RECORDS_FETCH_ID}'. Server response: ${errorResponseText.substring(0, 200)}...`);
                }
                
                const responseText = await response.text(); // Get raw text first for detailed error logging
                console.log('[DEBUG] Raw response text (first 500 chars):', responseText.substring(0, 500));

                let records;
                try {
                    records = JSON.parse(responseText); // Explicitly parse the text content
                } catch (jsonError) {
                    throw new Error(`JSON parsing error for '${CONFIG.PET_RECORDS_FETCH_ID}': ${jsonError.message}. The file content might be malformed JSON. Content starts with: ${responseText.substring(0, 200)}...`);
                }
                
                console.log('[DEBUG] Pet records data loaded and parsed:', records);
                
                // Process all records: convert timestamps and add 31-year offset
                allRecordsData = records.map(r => {
                    // Ensure r.date is a number and convert to milliseconds
                    const dateTimestamp = typeof r.date === 'number' ? Math.floor(r.date) : Date.parse(r.date) / 1000;
                    const d = new Date(dateTimestamp * 1000); 
                    d.setFullYear(d.getFullYear() + 31); // Add 31-year offset (as per user's previous code)
                    return { ...r, processedDate: d };
                }).sort((a, b) => b.processedDate.getTime() - a.processedDate.getTime()); // Sort in descending order for display

                // Filter weight chart data - note 'ä½“é‡æµ‹é‡' (simplified Chinese)
                weightChartData = records
                    .filter(r => r.activity === 'ä½“é‡æµ‹é‡' && typeof r.weight === 'number' && r.weight > 0)
                    .map(r => {
                        const dateTimestamp = typeof r.date === 'number' ? Math.floor(r.date) : Date.parse(r.date) / 1000;
                        const d = new Date(dateTimestamp * 1000);
                        d.setFullYear(d.getFullYear() + 31);
                        return { date: d, weight: r.weight };
                    })
                    .sort((a, b) => a.date.getTime() - b.date.getTime()); // Sort in ascending order for chart chronological display

                renderAllRecords();
                renderWeightChart();
                console.log("[DEBUG] Data load and processing complete.");

            } catch (error) {
                console.error("[ERROR] Data loading error:", error);
                allRecordsContainer.innerHTML = `<p class="text-red-400 text-center">ERROR: Archive retrieval failed. Consult logs. (${error.message})</p>`;
            }
        }

        /**
         * Renders all pet records in the list container.
         */
        function renderAllRecords() {
            console.log("[DEBUG] Rendering all records.");
            const allRecordsContainer = document.getElementById('all-records-container');
            if (!allRecordsContainer) return;

            allRecordsContainer.innerHTML = allRecordsData.map(rec => {
                const dateStr = rec.processedDate.toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' });
                return `<div class="p-3 rounded-md" style="background: rgba(var(--glow-rgb), 0.05); border-left: 3px solid rgba(var(--glow-rgb), 0.5)">
                            <div class="flex justify-between items-center">
                                <strong class="font-bold glow-text text-sm">Activity: ${rec.activity}</strong>
                                <time class="text-xs" style="color:var(--text-muted-color)">Timestamp: ${dateStr}</time>
                            </div>
                            <p class="mt-1" style="color: var(--text-color)">Notes: ${rec.notes || 'N/A'}</p>
                        </div>`;
            }).join('');
            // If no records, display a message
            if (allRecordsData.length === 0) {
                allRecordsContainer.innerHTML = `<p class="text-center text-xl text-gray-500 mt-8">No records found in this archive.</p>`;
            }
            console.log("[DEBUG] All records rendered.");
        }

        /**
         * Renders the weight change chart.
         */
        function renderWeightChart() {
            console.log("[DEBUG] Rendering weight chart.");
            const weightChartCanvas = document.getElementById('weightChart');
            const weightChangeInfo = document.getElementById('weight-change-info');

            if (!weightChartCanvas) {
                console.error("[ERROR] Weight chart canvas element not found for rendering.");
                return;
            }

            if (weightChart) {
                weightChart.destroy(); // Destroy existing chart instance
                console.log("[DEBUG] Existing chart destroyed.");
            }

            if (!weightChartData.length) {
                weightChartCanvas.style.display = 'none';
                if (weightChangeInfo) weightChangeInfo.innerHTML = `<p class="text-yellow-400">No mass data detected.</p>`;
                console.log("[DEBUG] No weight data to render chart.");
                return;
            } else {
                weightChartCanvas.style.display = 'block';
                if (weightChangeInfo) weightChangeInfo.innerHTML = `<p class="text-gray-400">Click data points for mass fluctuation analysis.</p>`;
            }
            
            const ctx = weightChartCanvas.getContext('2d');
            const style = getComputedStyle(document.documentElement);
            const primaryColor = `rgb(${style.getPropertyValue('--glow-rgb').trim()})`;
            const textColor = style.getPropertyValue('--text-muted-color').trim();
            const gridColor = `rgba(${style.getPropertyValue('--glow-rgb').trim()}, 0.1)`;

            weightChart = new Chart(ctx, {
                type: 'line',
                data: {
                    // Labels are simple date strings, not Date objects for 'time' scale
                    labels: weightChartData.map(d => d.date.toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' })),
                    datasets: [{
                        label: 'Mass (g)',
                        data: weightChartData.map(d => d.weight),
                        borderColor: primaryColor,
                        backgroundColor: `rgba(${style.getPropertyValue('--glow-rgb').trim()}, 0.2)`,
                        borderWidth: 2,
                        pointBackgroundColor: primaryColor,
                        pointBorderColor: 'var(--bg-color)',
                        pointRadius: 4,
                        pointHoverRadius: 7,
                        tension: 0.4,
                        fill: true,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: false },
                        tooltip: { // Custom tooltip style
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + 'g';
                                        const currentIndex = context.dataIndex;
                                        // Calculate difference from previous point
                                        if (currentIndex > 0) {
                                            const previousWeight = context.dataset.data[currentIndex - 1];
                                            const currentWeight = context.parsed.y;
                                            const difference = currentWeight - previousWeight;
                                            label += ` (Increment: ${difference >= 0 ? '+' : ''}${difference.toFixed(1)}g)`;
                                        }
                                    }
                                    return label;
                                }
                            },
                            titleFont: { family: "'Noto Sans SC', sans-serif" }, // Tooltip uses Noto Sans
                            bodyFont: { family: "'Noto Sans SC', sans-serif" },
                            padding: 10,
                            boxPadding: 5,
                            displayColors: false,
                            backgroundColor: 'rgba(0, 0, 0, 0.7)',
                            borderColor: primaryColor,
                            borderWidth: 1,
                            cornerRadius: 5,
                        }
                    },
                    scales: {
                        y: { 
                            grid: { color: gridColor, drawBorder: false }, 
                            ticks: { color: textColor, font: { family: "'Noto Sans SC', sans-serif" }} 
                        },
                        x: { 
                            grid: { display: false }, 
                            ticks: { color: textColor, font: { family: "'Noto Sans SC', sans-serif" }} 
                        }
                    }
                    ,
                    onClick: (event, elements) => {
                        if (elements.length > 0 && weightChangeInfo) { // Ensure elements exist
                            const index = elements[0].index;
                            if (index > 0) {
                                const diff = weightChartData[index].weight - weightChartData[index - 1].weight;
                                const sign = diff >= 0 ? '+' : '';
                                const color = diff >= 0 ? 'text-lime-400' : 'text-red-400';
                                weightChangeInfo.innerHTML = `<p>Increment: <span class="font-bold ${color}">${sign}${diff.toFixed(1)}g</span></p>`;
                            } else {
                                weightChangeInfo.innerHTML = `<p>Initial mass scan.</p>`;
                            }
                        }
                    }
                }
            });
            console.log("[DEBUG] Weight chart rendered.");
        }

        // --- Wandering Rabbit Animation Logic ---
        function animateRabbit() {
            if (!wanderingRabbit) {
                console.warn("[WARN] Wandering rabbit element not found, stopping animation.");
                return;
            }

            const speed = 2.5 * animationSpeedMultiplier; 
            
            // Get current position from transform
            const style = window.getComputedStyle(wanderingRabbit);
            const transform = style.transform || style.webkitTransform || style.mozTransform;
            let currentRabbitX = 0, currentRabbitY = 0;

            if (transform && transform !== 'none') {
                const matrix = new DOMMatrix(transform);
                currentRabbitX = matrix.m41;
                currentRabbitY = matrix.m42;
            } else {
                // Fallback for browsers that don't support DOMMatrix or transform not yet set.
                // Here we need to parse current style instead of relying on prevX/prevY
                currentRabbitX = parseFloat(wanderingRabbit.style.transform.match(/translateX\(([^)]+)px\)/)?.[1] || '0');
                currentRabbitY = parseFloat(wanderingRabbit.style.transform.match(/translateY\(([^)]+)px\)/)?.[1] || '0');
            }


            // If target is undefined or rabbit is close to target, set a new random target
            if (targetX === undefined || targetY === undefined || 
                Math.sqrt(Math.pow(targetX - currentRabbitX, 2) + Math.pow(targetY - currentRabbitY, 2)) < speed) { 
                targetX = Math.random() * (window.innerWidth - wanderingRabbit.offsetWidth); 
                targetY = Math.random() * (window.innerHeight - wanderingRabbit.offsetHeight); 
            }
            
            const prevX = currentRabbitX; // Store rabbit's position before moving for dropping
            const prevY = currentRabbitY;

            const distanceX = targetX - currentRabbitX;
            const distanceY = targetY - currentRabbitY; // Corrected: should use currentRabbitY
            const distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);

            if (distance > 0) { // Only move if there is a distance
                currentX = currentRabbitX + (distanceX / distance) * speed;
                currentY = currentRabbitY + (distanceY / distance) * speed;
            } else { // If already at target, stay or recalculate (handled by above condition)
                currentX = targetX;
                currentY = targetY;
            }

            // Constrain position within boundaries
            currentX = Math.max(0, Math.min(currentX, window.innerWidth - wanderingRabbit.offsetWidth)); 
            currentY = Math.max(0, Math.min(currentY, window.innerHeight - wanderingRabbit.offsetHeight)); 

            wanderingRabbit.style.transform = `translate(${currentX}px, ${currentY}px)`;

            if (performance.now() - lastDropTime > DROP_INTERVAL_MS) {
                const dropping = droppingsPool[currentDroppingIndex];
                if (dropping) { 
                    dropping.style.left = `${prevX + (wanderingRabbit.offsetWidth - 6) / 2}px`; 
                    dropping.style.top = `${prevY + (wanderingRabbit.offsetHeight - 6) / 2 + 10}px`;  
                    
                    dropping.classList.remove('fade-out');
                    void dropping.offsetWidth; // Trigger reflow to restart animation
                    dropping.classList.add('fade-out');

                    currentDroppingIndex = (currentDroppingIndex + 1) % MAX_DROPPINGS;
                    lastDropTime = performance.now();
                }
            }
            window.requestAnimationFrame(animateRabbit);
        }

        // --- Changelog Population ---
        function populateChangelog() {
            console.log("[DEBUG] Populating changelog.");
            const changelogList = document.getElementById('changelog-list');
            if (!changelogList) {
                console.error("[ERROR] Changelog list element not found for population.");
                return;
            }
            const changelogContent = `
                <h4>âœ¨ v8.0.4 - âš™ï¸ Data Resilience Rabbit (æ•¸æ“šéŸŒæ€§å…”)</h4>
                <div class="changelog-entry">
                    <p><strong>Fixes (The Maladies Vanquished! ç—¼ç–¾ç›¡é™¤ï¼):</strong></p>
                    <ul>
                        <li><span style="color: red;"><strong>The Oracle's Whispers, Now Clearer! (ç¥è«­ä½èªï¼Œæ›´é¡¯æ¾„æ¾ˆï¼):</strong></span> The elusive error, which oft whispered of "Unexpected identifier 'PetRecords'" when our scrolls were read, hath been tamed! We have imbued our reading ritual with greater wisdom, to divine whether the very fabric of the data be sound, or perchance, broken. Thus, when the archive doth fail to yield its secrets in proper JSON tongue, a clearer warning shall appear, guiding thee to mend its fractured syntax! (æ•¸æ“šè§£æéŒ¯èª¤æ™‚ï¼ŒéŒ¯èª¤è¨Šæ¯æ›´è©³ç´°ï¼Œæ–¹ä¾¿æ‚¨æª¢æŸ¥ JSON æ ¼å¼ï¼ğŸ”)</li>
                    </ul>
                </div>
                <h4>âœ¨ v8.0.3 - ğŸ›¤ï¸ Path Weaver Rabbit (è·¯å¾‘ç·¨ç¹”å…”)</h4>
                <div class="changelog-entry">
                    <p><strong>Fixes (The Maladies Vanquished! ç—¼ç–¾ç›¡é™¤ï¼):</strong></p>
                    <ul>
                        <li><span style="color: red;"><strong>The Archive's Trajectory, Now Fixed! (æª”æ¡ˆè»Œè·¡ï¼Œç¾å·²å›ºå®šï¼):</strong></span> The esteemed `PetRecords.json` archive, which once sought its solace via arcane `content_fetcher` from the ethereal uploads, now doth heed a more earthly decree! Its path is now bound directly to `dist/bunnycc/PetRecords.json` within the very fabric of this application. This change, though profound, ensures its unwavering presence, yet know, good sir, it shall no longer consult the uploaded scrolls! (æ•¸æ“šè·¯å¾‘å·²å¼·åˆ¶å¯«å…¥ `dist/bunnycc/PetRecords.json`ï¼Œç›´æ¥è®€å–ï¼ğŸ“¦ ä½†è¨˜å¾—é€™ä¸å†æ˜¯æ‚¨ä¸Šå‚³çš„é‚£å€‹æ–‡ä»¶äº†å“¦ï¼ğŸ¤”)</li>
                    </ul>
                </div>
                <h4>âœ¨ v8.0.2 - ğŸŒŸ Grand Revival Rabbit (ç‹è€…æ­¸ä¾†å…”)</h4>
                <div class="changelog-entry">
                    <p><strong>Fixes (The Maladies Vanquished! ç—¼ç–¾ç›¡é™¤ï¼):</strong></p>
                    <ul>
                        <li><span style="color: red;"><strong>The Oracle's Tongue Now Loosened! (ç¥è«­ä¹‹èˆŒçµ‚å¾©ç”¦ï¼):</strong></span> The vexing silence of the <code>content_fetcher</code>, which oft whispered of its undefined nature, hath been banished! By removing the shroud of 'module' from our chief script, this noble oracle now speaketh freely, and the data, which once lay hidden, doth now cascade forth in its full glory! Henceforth, no more blank pages shall greet thine eyes, for the archives are fully restored! (æ•¸æ“šç©ºç™½å•é¡Œå·²å¾¹åº•è§£æ±ºï¼ğŸ‰)</li>
                        <li>The Hare's Gambit, More Precise! (ç‰å…”ä¹‹è¡Œï¼Œæ›´è¶¨ç²¾æº–ï¼): The labyrinthine path of the wandering rabbit's journey hath been fine-tuned. Its steps, once prone to a slight miscalculation, now tread with an unparalleled accuracy, ensuring its playful dance is flawless upon the digital stage! (å…”å­äº‚è·‘çš„ bug å·²ä¿®å¾©ï¼ğŸ¥³)</li>
                    </ul>
                </div>
                <h4>âœ¨ v8.0.1 - ğŸ› Bug Fix Rabbit (é™¤èŸ²å…”)</h4>
                <div class="changelog-entry">
                    <p><strong>Fixes (The Maladies Vanquished! ç—¼ç–¾ç›¡é™¤ï¼):</strong></p>
                    <ul>
                        <li><span style="color: red;"><strong>Edge Browser's Folly Cured! (Edge ç€è¦½å™¨ä¹‹è ¢ç—…å·²ç™’ï¼):</strong></span> The peculiar ailment in Edge, which caused our script to stumble with an 'Unexpected identifier 'addEventListener',' hath been utterly vanquished! We have, with cunning, removed all direct 'onclick' attributes from our HTML, and now, our buttons heed the whispers of JavaScript's 'addEventListener', thereby ensuring their proper conduct and the swift flow of interaction! (Edge ç€è¦½å™¨åŸ·è¡ŒéŒ¯èª¤å·²ä¿®æ­£ï¼ğŸ‰)</li>
                        <li><span style="color: red;"><strong>Weight Chart's Data Unveiled! (é«”é‡åœ–è¡¨æ•¸æ“šçµ‚ç¾ä¸–ï¼):</strong></span> The cryptic absence of data from our weight chart, which stemmed from a subtle discord in the naming of 'weight measurement' activities, hath been resolved! We now heed the simpler tongue of 'ä½“é‡æµ‹é‡' (simplified Chinese), and lo, the cherished records of mass are now laid bare for all to witness! (é«”é‡åœ–è¡¨æ•¸æ“šè¼‰å…¥å·²ä¿®æ­£ï¼ğŸ“ˆ)</li>
                        <li>The 'Content_Fetcher' No Longer a Mystery! (å…§å®¹æŠ“å–è€…ä¸å†æ˜¯è¬ï¼): The perplexing error of 'content_fetcher module import' hath been set right. This noble tool, being a gift of the very environment, now serves without need of explicit import, answering to our call as a trusted companion! (<code>content_fetcher</code> æ¨¡çµ„å¼•å…¥éŒ¯èª¤å·²ä¿®æ­£ï¼ğŸ› ï¸)</li>
                        <li>The Wandering Hare's Path Refined! (éŠèµ°å…”ä¹‹å¾‘è·¯æ›´ç²¾ï¼): The whimsical trajectory of our wandering rabbit's animation hath been subtly adjusted, ensuring its movements are now as graceful as a zephyr's dance! (éŠèµ°å…”å‹•ç•«è·¯å¾‘é‚è¼¯å·²å¾®èª¿ï¼ğŸƒâ€â™€ï¸)</li>
                    </ul>
                </div>
                <h4>âœ¨ v8.0.0 - ğŸ‡ Arcane Chronos Rabbit (å¥§ç§˜æ™‚åºå…”)</h4>
                <div class="changelog-entry">
                    <p><strong>New Illuminations (A Light Newly Cast! æ–°å…‰ä¹ç¾ï¼):</strong></p>
                    <ul>
                        <li>The Axis of Time, Flowing Anew! (æ™‚å…‰ä¹‹è»¸ï¼Œæµè½‰ä¸æ¯ï¼): The sprite of the wandering rabbit doth now animate with renewed vigour, its steps as fluid as a river's course, a veritable cascade of frames, breathing boundless life into this archive! (å…”å­å‹•ç•«å›ä¾†å•¦ï¼ğŸ°)</li>
                        <li>The Spectrum's Grand Embrace! (è™¹å½©ä¹‹è­œï¼Œå»£ç´å¤©åœ°ï¼): Our palette of thematic colours hath expanded to fifty-six distinct hues, each a radiant spark, waiting to adorn this archive in garments of unparalleled splendor! (ä¸»é¡Œé¡è‰²å¤šé” 56 ç¨®ï¼ğŸŒˆ)</li>
                        <li>The Arcana of Measure, Unveiling Performance! (è¡“æ•¸ä¹‹å¥§ï¼Œæ´æ‚‰æ€§èƒ½ï¼): Our method of performance scrutiny hath been refined, now capable of revealing the browser's secret whispers, the depths of its memory, and the pulse of its network! Yet, the CPU's core, the GPU's might, and the IP's hidden trail, remain shrouded in mystery, beyond our common ken. (æ–°å¢æ€§èƒ½ç›£æ§æ¨¡å¡Šï¼ğŸ’»)</li>
                        <li>Ancient Texts Reborn, Scented with Ink! (å¤ç±æ–°ç”Ÿï¼Œç­†å¢¨ç•™é¦™ï¼): This chronicle of updates hath been re-penned with the quill of Shakespeare, each word imbued with antique grace and profound depth, offering a feast of eloquence to the discerning reader! (æ›´æ–°æ—¥èªŒè®Šæˆå¤é¢¨è‹±èªäº†ï¼ğŸ“œ)</li>
                        <li>The Prologue's Mark, A Terminal's Soul! (å§‹é æ¨™è¨˜ï¼Œçµ‚ç«¯ä¹‹éˆï¼): The inscription at the page's head, which once spoke of shared archives, hath transformed into the style of a terminal's command prompt, lending this archive a fresh, technological allure! (æ¨™é¡Œè®Šæˆçµ‚ç«¯æ©Ÿé¢¨æ ¼ï¼ğŸ˜)</li>
                    </ul>
                    <p><strong>Refinements (An Ode to Refinement! ç²¾é€²é Œæ­Œï¼):</strong></p>
                    <ul>
                        <li>Data's Flow, Unhindered! (æ•¸æ“šæµè½‰ï¼Œç„¡ç¤™æš¢è¡Œï¼): The core mechanisms for data processing and element interplay have reverted to their former robust foundation, ensuring all logic proceeds as seamlessly as in days of yore, without a single hitch! (æ•¸æ“šåŠ è¼‰å’Œé é¢äº¤äº’é‚è¼¯å›æ­¸ç©©å®šï¼ğŸ‘)</li>
                    </ul>
                    <p><strong>Fixes (The Maladies Vanquished! ç—¼ç–¾ç›¡é™¤ï¼):</strong></p>
                    <ul>
                        <li>Woes of Yore, Now Dispelled! (å¾€æ˜”ä¹‹å›°ï¼Œç›¡çš†æ¶ˆå¼­ï¼): All manner of runtime afflictions, such as 'Unexpected identifier 'addEventListener'' and 'window.toggleModal is not a function', have been utterly uprooted in this iteration, rendering the archive stable and serene! (å„ç¨®å ±éŒ¯éƒ½æ²’äº†ï¼ğŸ¥³)</li>
                    </ul>
                </div>
                <!-- Previous Changelog Entries (æ­¤è™•ç‚ºç¯€é¸ï¼Œå®Œæ•´çš„æ—¥èªŒå°‡åŒ…å«æ‰€æœ‰èˆŠç‰ˆæœ¬æ¢ç›®ï¼Œä¸¦å·²é€²è¡Œé¢¨æ ¼è½‰æ›) -->

                <h4>âœ¨ v7.0.1 - ğŸŒŒ Cosmic Symphony Rabbit (å®‡å®™äº¤éŸ¿å…”)</h4>
                <div class="changelog-entry">
                    <p><strong>Additions (A New Decree Hath Been Issued! æ–°ä»¤å·²é ’ï¼):</p>
                    <ul>
                        <li>A grand decree for Chronological Scrolls: Each sagacious update, henceforth, shall reside within its own hallowed frame, distinctly marked for ease of contemplation and historical traverse. (æ›´æ–°æ—¥èªŒç¾åœ¨ç¨ç«‹æˆé ï¼Œæ–¹ä¾¿æŸ¥é–±ï¼ğŸ“–)</li>
                    </ul>
                    <p><strong>Optimizations (Improvements of Noble Bearing! ç²¾é€²é Œæ­Œï¼):</p>
                    <ul>
                        <li>The arcane glyphs and solitary marks, which once obscured the pristine pronouncements within these chronicles, have been expunged, that truth may shine unblemished, free from the shackles of superfluous punctuation. (é‚£äº›å¤šé¤˜çš„ç¬¦è™Ÿå’Œå–®å€‹æ¨™è¨˜éƒ½æ¸…ç†æ‰äº†ï¼âœ¨)</li>
                    </ul>
                    <p><strong>Fixes (The Vexing Maladies Vanquished! ç—¼ç–¾ç›¡é™¤ï¼):</p>
                    <ul>
                        <li>A whisper of correction for the Temporal Weaver, ensuring the epochal calculations remain true, unaffected by the whispers of future dawns. (æ™‚é–“è¨ˆç®—çš„ bug ä¹Ÿä¿®å¾©äº†ï¼Œä¸æœƒäº‚è·³äº†ï¼ğŸ•°ï¸)</li>
                    </ul>
                </div>

                <h4>âœ¨ v7.0.0 - ğŸŒ  Luminous Fusion Rabbit (ç‚«å…‰èåˆå…”)</h4>
                <div class="changelog-entry">
                    <p><strong>Optimizations (Improvements of Noble Bearing! ç²¾é€²é Œæ­Œï¼):</p>
                    <ul>
                        <li>The Visage's Interplay now Heightened: Upon the mouse's approach, the Pac-Man's maw doth gape with greater vigour, and a radiant flash illuminates the portrait's bounds, thereby elevating the interactive marvel. (é ­åƒäº’å‹•æ•ˆæœæ›´ç‚«é…·äº†ï¼ğŸ¤©)</li>
                        <li>The Canvas of Aetherial Radiance now Adorned: The web's backdrop embraceth a dynamic radial gradient, its hues meticulously woven with the chosen theme's palette, shifting subtly as if breathing, thus forging a deeper, more artistic vista. (èƒŒæ™¯å¢åŠ äº†å‹•æ…‹å…‰æšˆæ•ˆæœï¼Œè¶…ç´šå¤¢å¹»ï¼ğŸ’«)</li>
                        <li>The Errant Hare's Gambol now Flows with Fluid Grace: The elusive rabbit's peregrinations across the display, once plagued by stuttering, now proceed with an unblemished rhythm, infusing the archive with newfound vivacity. (å…”å­è·‘èµ·ä¾†æ›´æµæš¢äº†ï¼Œåƒåœ¨é£›ï¼ğŸ’¨)</li>
                        <li>Universal Accord for Digital Scrolls: The interface's harmony across all digital realms, from the venerable Edge to the swift Chrome, and adapting to screens of manifold sizes, hath been fortified, ensuring an impeccable and beauteous presentation. (è·¨ç€è¦½å™¨å’ŒéŸ¿æ‡‰å¼ä½ˆå±€æ›´æ£’äº†ï¼ğŸ“±ğŸ’»)</li>
                        <li>The Lexicon and Chroma Elevated: The primary script now rendered in Noto Sans SC for clarity's sake, granting the gaze an unobstructed passage through knowledge. Furthermore, our chromatic repertoire hath expanded by five, presenting a grand total of twenty vibrant themes, inviting the connoisseur to adorn the archive in a vestment of light and shade. (å­—é«”æ›´æ¸…æ™°ï¼Œä¸»é¡Œé¡è‰²å¢åŠ äº† 5 ç¨®ï¼ğŸ¨)</li>
                    </ul>
                    <p><strong>Additions (A New Decree Hath Been Issued! æ–°ä»¤å·²é ’ï¼):</p>
                    <ul>
                        <li>The Oracle of Performance now stands Revealed! A button, newly forged, doth summon forth a tableau revealing the browser's vital humours, specifically its memory's embrace, thereby granting insight into the digital essence's consumption. (æ–°å¢æ€§èƒ½ç›£æ§æŒ‰éˆ•ï¼Œå¯ä»¥çœ‹ç€è¦½å™¨å…§å­˜ä½”ç”¨äº†ï¼ğŸ“Š)</li>
                    </ul>
                    <p><strong>Fixes (The Vexing Maladies Vanquished! ç—¼ç–¾ç›¡é™¤ï¼):</p>
                    <ul>
                        <li>The Chronicle of Changes, once shrouded in silence, now Unfurls in its Entirety. The malady of blank entries hath been utterly dispelled, and the annals of transformation stand complete, preserving every epochal shift. (æ›´æ–°æ—¥èªŒç©ºç™½å•é¡Œçµ‚æ–¼è§£æ±ºäº†ï¼ğŸ‰)</li>
                    </ul>
                </div>
            `;
            changelogList.innerHTML = changelogContent;
            console.log("[DEBUG] Changelog populated.");
        }

        /**
         * Sets up event listeners for all UI buttons.
         */
        function setupEventListeners() {
            console.log("[DEBUG] Setting up event listeners.");
            document.getElementById('changelog-btn')?.addEventListener('click', () => toggleModal('changelog-modal'));
            document.getElementById('theme-btn')?.addEventListener('click', () => toggleModal('theme-modal'));
            document.getElementById('performance-btn')?.addEventListener('click', () => toggleModal('performance-modal'));
            document.getElementById('fullscreen-btn')?.addEventListener('click', toggleFullscreen);

            // Modal close buttons
            document.getElementById('changelog-close-btn')?.addEventListener('click', () => toggleModal('changelog-modal'));
            document.getElementById('theme-close-btn')?.addEventListener('click', () => toggleModal('theme-modal'));
            document.getElementById('performance-close-btn')?.addEventListener('click', () => toggleModal('performance-modal'));
            
            // Activate sensor button in performance modal
            document.getElementById('activate-sensor-btn')?.addEventListener('click', displayPerformanceMetrics);

            // Theme pagination buttons
            document.getElementById('prev-theme-page-btn')?.addEventListener('click', () => {
                if (currentThemePage > 0) {
                    currentThemePage--;
                    generateThemeSwatches();
                }
            });
            document.getElementById('next-theme-page-btn')?.addEventListener('click', () => {
                const totalPages = Math.ceil(CONFIG.THEMES.length / CONFIG.THEMES_PER_PAGE);
                if (currentThemePage < totalPages - 1) {
                    currentThemePage++;
                    generateThemeSwatches();
                }
            });

            // Modal overlay click-to-close functionality (only if clicking the overlay itself)
            document.getElementById('changelog-modal')?.addEventListener('click', (event) => {
                if (event.target.id === 'changelog-modal') toggleModal('changelog-modal');
            });
            document.getElementById('theme-modal')?.addEventListener('click', (event) => {
                if (event.target.id === 'theme-modal') toggleModal('theme-modal');
            });
            document.getElementById('performance-modal')?.addEventListener('click', (event) => {
                if (event.target.id === 'performance-modal') toggleModal('performance-modal');
            });

            console.log("[DEBUG] Event listeners set up.");
        }


        // --- Main window.onload listener ---
        // Use window.onload to ensure all DOM elements are fully loaded and accessible before attempting to get their references or attach event listeners.
        window.onload = function() {
            console.log("[DEBUG] window.onload event triggered. Starting initialization...");

            // Initialize rabbit element and its position
            wanderingRabbit = document.getElementById('wandering-rabbit');
            if (wanderingRabbit) {
                // Initialize currentX, currentY to a random starting position
                currentX = Math.random() * (window.innerWidth - wanderingRabbit.offsetWidth); 
                currentY = Math.random() * (window.innerHeight - wanderingRabbit.offsetHeight); 
                wanderingRabbit.style.transform = `translate(${currentX}px, ${currentY}px)`;
                
                // Initialize droppings pool
                for (let i = 0; i < MAX_DROPPINGS; i++) {
                    const dropping = document.createElement('div');
                    dropping.className = 'rabbit-dropping';
                    document.body.appendChild(dropping);
                    droppingsPool.push(dropping);
                }
                console.log("[DEBUG] Rabbit droppings pool initialized.");
                window.requestAnimationFrame(animateRabbit); // Start animation loop
                console.log("[DEBUG] Rabbit animation started.");
            } else {
                console.warn("[WARN] Wandering rabbit element not found, animation disabled.");
            }

            // Detect Safari and adjust animation framerate for perceived smoothness
            const isSafari = navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome');
            if (isSafari) {
                animationSpeedMultiplier = 1.2; 
                DROP_INTERVAL_MS = 100; 
                console.log("[DEBUG] Safari browser detected, animation speed optimized.");
            }

            // Set profile picture source
            const profilePic = document.getElementById('profile-pic');
            if (profilePic) {
                profilePic.src = CONFIG.PROFILE_PIC_PATH;
            } else {
                console.error("[ERROR] Profile picture element not found during initialization.");
            }

            // Set up event listeners
            setupEventListeners();
            
            // Start timer updates
            setInterval(updateTiming, 100);
            console.log("[DEBUG] Timer updates started.");

            // Load and process data
            loadAndProcessData();

            // Generate theme swatches (will display the first page initially)
            generateThemeSwatches();

            // Add resize listener to adjust rabbit animation boundaries
            window.addEventListener('resize', () => {
                if (!wanderingRabbit) return; 
                const style = window.getComputedStyle(wanderingRabbit);
                const transform = style.transform || style.webkitTransform || style.mozTransform;
                let currentRabbitX = 0, currentRabbitY = 0;

                if (transform && transform !== 'none') {
                    const matrix = new DOMMatrix(transform);
                    currentRabbitX = matrix.m41;
                    currentRabbitY = matrix.m42;
                } else {
                    currentRabbitX = parseFloat(wanderingRabbit.style.transform.match(/translateX\(([^)]+)px\)/)?.[1] || '0');
                    currentRabbitY = parseFloat(wanderingRabbit.style.transform.match(/translateY\(([^)]+)px\)/)?.[1] || '0');
                }

                currentX = Math.min(Math.max(0, currentRabbitX), window.innerWidth - wanderingRabbit.offsetWidth); 
                currentY = Math.min(Math.max(0, currentRabbitY), window.innerHeight - wanderingRabbit.offsetHeight); 
                wanderingRabbit.style.transform = `translate(${currentX}px, ${currentY}px)`;

                targetX = Math.random() * (window.innerWidth - wanderingRabbit.offsetWidth); 
                targetY = Math.random() * (window.innerHeight - wanderingRabbit.offsetHeight); 
                console.log("[DEBUG] Window resized, rabbit position and target updated.");
            });

            // Populate changelog content
            populateChangelog();
            
            // Set initial random theme
            const initialTheme = CONFIG.THEMES[Math.floor(Math.random() * CONFIG.THEMES.length)];
            changeTheme(initialTheme);
            console.log("[DEBUG] Initial theme set.");
            console.log("[DEBUG] Initialization complete.");
        };
    </script>
</body>
</html>
