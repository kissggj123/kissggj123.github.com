<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸Šæµ· & è‹å· å°é¹å……ç”µç«™</title>
    <script src="https://webapi.amap.com/maps?v=2.0&key=f5be8cdf1391fe2323abc034220d2676"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        #map { width: 100%; height: 600px; }
        .info { font-size: 14px; }
        .info img { max-width: 100px; margin-top: 5px; display: block; }
        .copy-btn { margin-top: 5px; cursor: pointer; color: blue; text-decoration: underline; }
    </style>
</head>
<body>
    <h2>ä¸Šæµ· & è‹å· å°é¹å……ç”µç«™</h2>
    <div id="map"></div>
    <script>
        var map = new AMap.Map("map", {
            center: [121.47, 31.23], // ä»¥ä¸Šæµ·ä¸ºä¸­å¿ƒ
            zoom: 11
        });
        
        function fetchPOIData(city) {
            $.getJSON("https://restapi.amap.com/v3/place/text", {
                key: "f5be8cdf1391fe2323abc034220d2676",
                city: city,
                keywords: "å°é¹å……ç”µ",
                types: "011100|011102|011103|073000|073001|073002",
                offset: 20,
                page: 1,
                extensions: "all",
                output: "json"
            }, function(data) {
                if (data.pois && data.pois.length > 0) {
                    data.pois.forEach(function(poi) {
                        var marker = new AMap.Marker({
                            position: poi.location.split(","),
                            map: map
                        });
                        
                        var content = `<div class='info'>
                            <strong>${poi.name}</strong><br>
                            åœ°å€: ${poi.address || 'æœªçŸ¥'}<br>
                            ç”µè¯: ${poi.tel || 'æ— '}<br>
                            <span class='copy-btn' onclick='copyToClipboard("${poi.address}")'>ğŸ“‹ å¤åˆ¶åœ°å€</span><br>`;
                        
                        if (poi.photos && poi.photos.length > 0) {
                            content += `<img src='${poi.photos[0].url}' alt='å……ç”µç«™å›¾ç‰‡'>`;
                        }
                        content += `</div>`;
                        
                        var infoWindow = new AMap.InfoWindow({ content: content });
                        marker.on("click", function() {
                            infoWindow.open(map, marker.getPosition());
                        });
                    });
                }
            });
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert("åœ°å€å·²å¤åˆ¶: " + text);
            }).catch(err => {
                console.error("å¤åˆ¶å¤±è´¥", err);
            });
        }
        
        // è·å–ä¸Šæµ·å’Œè‹å·çš„æ•°æ®
        fetchPOIData("ä¸Šæµ·");
        fetchPOIData("è‹å·");
    </script>
</body>
</html>
